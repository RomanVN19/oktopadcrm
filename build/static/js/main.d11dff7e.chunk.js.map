{"version":3,"sources":["oktopad.svg","katejs-trigger/lib/structure.js","katejs-trigger/lib/AppClient.js","katejs-fields/lib/structure.js","katejs-fields/lib/forms/ExtraFieldsItemMixin.js","katejs-fields/lib/AppClient.js","katejs-fields/lib/forms/ExtraFieldsListItem.js","structure.js","forms/NoteItem.js","forms/NoteList.js","forms/ProductSalesReport.js","forms/OrderToDeliverReport.js","forms/OrderList.js","forms/ClientDebt.js","forms/ClientSelection.js","forms/OrderItem.js","forms/PaymentItem.js","forms/CashFlow.js","forms/OrderDynamics.js","forms/ClientListMixin.js","forms/ClientSales.js","forms/ClientItemMixin.js","utils.js","forms/Dashboard.js","forms/ExpenseItem.js","forms/ReceiptItemMixin.js","forms/ProducsFlowReport.js","forms/DebtsFlowReport.js","forms/ProductCard.js","forms/DealItem.js","forms/TaskItem.js","forms/DealList.js","forms/SaleSchemaItem.js","forms/TaskList.js","forms/InvoiceItem.js","components/Kanban.js","components/index.js","updates.js","icons.js","AppClient.js","forms/ProductItemMixin.js","translations.js","index.js"],"names":["module","exports","structures","Trigger","fields","name","type","Fields","STRING","tables","AppClient","parent","params","init","addToMenu","use","package","ExtraFieldsList","REFERENCE","entity","ExtraFieldValuesList","EntityFieldsValuesList","skipForForm","FieldType","FieldTypeOptions","Object","keys","map","key","title","value","getExtraElement","field","index","id","Elements","INPUT","Form","args","app","fieldsLists","constructor","existingCard","elements","get","extraElementsCard","CARD","push","a","result","this","uuid","query","where","entityUuid","limit","response","length","extraFieldsvalues","values","forEach","findIndex","f","content","formValues","getValues","save","extraFieldsApplied","forms","ExtraFieldsListItem","fieldsTable","fieldType","columns","find","column","dataPath","SELECT","options","selectValue","set","entitiesWithExtraFields","splice","updateExtraFieldsLists","menu","item","form","successAuth","reduce","acc","val","entityName","concat","fieldsList","formName","endsWith","indexOf","ExtraFieldsItemMixin","client","attributes","sum","DECIMAL","precision","total","contractor","amount","user","contact","products","Note","BOOLEAN","TEXT","Client","Product","skipForList","Order","Invoice","Cashbox","Payment","Expense","DebtRecord","resources","MoneyRecord","ProductRecord","PriceType","PriceList","Receipt","SaleSchema","Deal","INTEGER","DealComment","DATE","Task","Contact","Settings","NoteItem","GRID","cols","getElement","TABS","getTableElement","width","ItemForm","addActions","doneFilter","noteDone","NoteList","showAll","filters","undefined","load","actions","SWITCH","panelStyle","onChange","col","format","ListForm","addElements","OrderReport","formReport","startDate","endDate","report","moment","startOf","endOf","t","data","timeFormat","Date","BUTTON","onClick","TABLE","date","showNegative","$gte","$lte","order","clients","balance","clientUuid","debts","row","debt","toPay","CHECKBOX","clientQuery","$or","$like","phone","address","clientChange","ordersClientFilter","maxWidth","unshift","getOptions","doc","ClientDebt","showModal","clientDebtModal","open","exec","rowClick","docUuid","assign","reportElements","LABEL","tag","style","sale","payment","fullWidth","MODAL","turnover","totals","docTitle","clientDebtData","clientDebtTitle","addCondition","ClientSelection","replaceSelect","changePhoneAddress","openOnFocus","clientSelect","clientSelection","clientSelectionModal","searchChange","timeout","clearTimeout","setTimeout","search","findTitle","findPhone","findAddress","clientSearch","selectClient","create","fieldValid","body","put","clientInput","GROUP","error","ProductsTable","rowChange","price","toFixed","sumChange","productChange","product","priceTypeContent","priceType","priceTypeUuid","prices","onSumChange","OrderItemMixin","print","companyName","settings","template","productsTable","marginTop","textAlign","vars","currentInvoiceData","comment","PaymentItem","fillByDebts","payments","filter","clientpayments","getOptionsClient","table","onDelete","joinRecord","noDetails","records","increase","decrease","start","record","val1","val2","res","cellStyle","fontWeight","Cashflow","Promise","all","periodStart","$gt","periodEnd","details","cashbox","OrderDynamics","noOptions","$func","fn","group","$col","ClientSales","clientSalesModal","raw","clientSalesData","clientSalesOrders","clientSalesOrdersSum","clientSalesOrdersAverage","reportStyle","maxHeight","overflowY","wholeDay","Dashboard","next","add","prev","div","display","marginRight","loadOrdersCount","loadProductSales","ordersTotalsLabel","productSalesData","ExpenseItem","Itemform","ProductTable","ProductsFlowReport","DebtsFlowReport","ProductCard","productUuid","rest","pcRest","pcTable","document","dateStyle","fontSize","userStyle","commentStyle","taskStyle","cursor","textDecoration","taskDoneStyle","mapDate","obj","mapHistory","events","element","done","openTask","color","primaryColor","generatedElements","cut","salesman","schema","step","dealClosed","addTask","onKeyPress","keyPress","postComment","toClient","commentText","dealUuid","fillHistory","fillSteps","comments","tasks","history","sort","b","currentDeal","currentClient","steps","schemas","stepIndex","event","topRow","close","ok","deal","window","back","kanbanStyles","container","justifyContent","overflowX","columnContainer","columnHeader","columnDragOver","background","itemDragging","defaultSchema","schemaFilter","schemaChange","isBoard","isBoardDeals","isHideClosed","isHideClosedDeals","topPanel","userChange","disabled","allow","changeView","hideClosedChange","marginLeft","list","stepFormat","hidden","board","styles","itemClick","boardItemClick","onDragEnd","orderSaveKey","userColIndex","userColumn","closedColIndex","closedColumn","setFilters","schemaUuid","hideClosed","userUuid","setBoardData","items","destination","droppableId","source","targetStepIndex","replace","draggableId","fetchSchemas","doneStyle","isBoardTasks","isHideDone","isHideDoneTasks","hideDoneChange","hideDone","edge","toDate","getTime","task","timestamp","colIndex","targetDate","subtract","productTable","saveOrder","colOrder","accItems","localStorage","setItem","JSON","stringify","Kanban","props","setColumns","setState","state","userStyles","height","flexDirection","alignItems","padding","minHeight","userSelect","margin","backgroundColor","nextProps","parse","getItem","colsData","itemOrder","Number","MAX_SAFE_INTEGER","restoreOrder","slice","newColumns","sourceColumn","destColumn","sourceItems","destItems","removed","copiedItems","provided","snapshot","droppableProps","ref","innerRef","isDraggingOver","draggableProps","dragHandleProps","isDragging","placeholder","Component","description","OrderList","viewBox","fill","d","OrdersMy","OrdersUnassigned","CashFlow","xmlns","version","ProductList","ClientList","OrdersToDeliverReport","ProductSalesReport","x","y","CashboxList","ExpenseList","PaymentList","points","cx","cy","r","ReceiptList","PriceListList","PriceTypeList","TaskList","DealList","InvoiceList","components","Components","baseUrl","env","apiUrl","icon","icons","rule","method","submenu","OrderItem","changeTimeout","ClientItem","clientDebt","clientSales","invoice","ProductItem","productCard","setCardVisibility","showCard","accountBalances","pcGrid","pcGridRight","DealItem","TaskItem","SaleSchemaItem","InvoiceItem","ReceiptItem","ReceiptItemMixin","PriceListItem","saveAuth","docsContent","updates","userAuthorization","usernameTitle","userHideRecovery","docsAccessFilter","docsItem","sitem","menuItem","submenuItem","settingsParams","spliceMenuItem","initSubmenu","addSubmenu","allowCreateInSelect","showUsersList","nameInitial","nameTarget","submenuTitle","i","role","submenuName","itemName","itemIndex","itemTitle","AppUser","AppDoc","AppPrint","AppSettings","AppDocs","AppImport","AppTrigger","AppFields","path","logo","translate","languages","en","ru","translations","KateJSClient"],"mappings":"gKAAAA,EAAOC,QAAU,IAA0B,qC,yNC0C9BC,EAAa,CACxBC,QAzCc,CACdC,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,kBACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,YACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,eACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,mBACNC,KAAMC,IAAOC,SAGjBC,OAAQ,CACN,CACEJ,KAAM,qBACND,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,QACNC,KAAMC,IAAOC,aC/BjBE,EAAY,SAAAC,GAAM,yDACtB,WAAYC,GAAS,IAAD,8BAClB,cAAMA,IAEDC,KAAK,CAAEX,aAAYY,WAAW,IAHjB,EADE,UAAyBC,cAAIJ,KAOrDD,EAAUM,QDkCiB,iBCjCZN,QCVTO,EAAkB,CACtBb,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,aACNC,KAAMC,IAAOC,SAGjBC,OAAQ,CACN,CACEJ,KAAM,aACND,OAAQ,CACN,CACEC,KAAM,OACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,OACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,SACNC,KAAMC,IAAOW,UACbC,OAAQ,wBAEV,CACEd,KAAM,aACNC,KAAMC,IAAOC,YAOjBY,EAAuB,CAC3BhB,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,SAGjBC,OAAQ,CACN,CACEJ,KAAM,SACND,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,YAOjBa,EAAyB,CAC7BC,aAAa,EACblB,OAAQ,CACN,CACEC,KAAM,aACNC,KAAMC,IAAOC,SAGjBC,OAAQ,CACN,CACEJ,KAAM,SACND,OAAQ,CACN,CACEC,KAAM,OACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,QACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,aACNC,KAAMC,IAAOC,YAOVe,EAAY,CACvB,QAAW,UACX,OAAU,SACV,KAAQ,OACR,UAAa,YACb,OAAU,UAGCC,EAAmBC,OAAOC,KAAKH,GAAWI,KAAI,SAAAC,GAAG,MAAK,CACjEC,MAAOD,EACPE,MAAOP,EAAUK,OAGN1B,EAAa,CACxBe,kBACAG,uBACAC,0B,QCpGIU,EAAkB,SAACC,EAAOC,GAM9B,MALgB,CACdC,GAAG,GAAD,OAJc,cAId,OAAmBD,GACrBJ,MAAOG,EAAM3B,KACbC,KAAM6B,WAASC,QAKJ,WAAAC,GAAI,qEAEjB,WAAYC,GAAO,IAAD,EAEhB,GAFgB,qBAChB,cAAMA,IACGC,IAAIC,aAAe,EAAKD,IAAIC,YAAY,EAAKC,YAAYtB,QAAS,CACzE,IAAMuB,EAAe,EAAKC,SAASC,IAAI,eACjCC,EAAoBH,GAAgB,CACxCR,GAAI,cACJ5B,KAAM6B,WAASW,MAEjBD,EAAkBF,SAAW,EAAKJ,IAAIC,YAAY,EAAKC,YAAYtB,QAAQQ,IAAII,GAC1EW,GACH,EAAKC,SAASI,KAAKF,GAVP,SAFD,+EAgBjB,6CAAAG,EAAA,6IACQC,EADR,SAEMC,KAAKX,IAAIC,aAAeU,KAAKX,IAAIC,YAAYU,KAAKT,YAAYtB,SAAW+B,KAAKC,MAFpF,gCAG+BD,KAAKX,IAAIlB,uBAAuB+B,MAAM,CAC/DC,MAAO,CAAEC,WAAYJ,KAAKC,MAC1BI,MAAO,IALb,iBAGYC,EAHZ,EAGYA,WAIQA,EAASC,SAAS,EAAD,YACWD,EADX,GACbE,EADa,KACrBC,OACJvD,EAAS8C,KAAKX,IAAIC,YAAYU,KAAKT,YAAYtB,QACrDuC,EAAkBE,SAAQ,SAAC5B,GACzB,IAAMC,EAAQ7B,EAAOyD,WAAU,SAAAC,GAAC,OAAIA,EAAEzD,OAAS2B,EAAM3B,QACjD4B,GAAS,IACX,EAAK8B,QAAL,UAxCQ,cAwCR,OAA8B9B,IAASH,MAAQE,EAAMF,WAb/D,gCAkBSmB,GAlBT,iDAhBiB,+GAoCjB,gCAAAD,EAAA,0IAEQgB,EAAad,KAAKe,aAClB7D,EAAS8C,KAAKX,IAAIC,YAAYU,KAAKT,YAAYtB,WAE7CwC,EAASvD,EAAOuB,KAAI,SAACK,EAAOC,GAAR,MAAmB,CAC3C5B,KAAM2B,EAAM3B,KACZyB,MAAOkC,EAAW,aAAD,OAAc/B,QAEjCiB,KAAKX,IAAIlB,uBAAuB6C,KAAK,CAAEf,KAAMD,KAAKC,KAAMQ,YAT5D,gDApCiB,2DAAsCtB,GAAtC,EACV8B,oBAAqB,EADX,GCNbzD,EAAY,SAAAC,GAAM,yDACtB,WAAYC,GAAS,IAAD,ECLPyB,EDKO,4BAClB,cAAMzB,IACDC,KAAK,CAAEX,aAAYY,WAAW,IACnC,EAAKsD,MAAL,2BACK,EAAKA,OADV,IAEEC,qBCVShC,EDUgC,EAAK+B,MAAMC,oBCVvC,kDACjB,WAAY/B,GAAO,IAAD,sBAEhB,IAAMgC,GADN,cAAMhC,IACmBK,SAASC,IAAI,cAChC2B,EAAYD,EAAYE,QAAQC,MAAK,SAAAC,GAAM,MAAwB,SAApBA,EAAOC,YAH5C,OAIhBJ,EAAUjE,KAAO6B,WAASyC,OAC1BL,EAAUM,QAAUrD,EACpB+C,EAAUO,aAAc,EACxB,EAAKnC,SAASoC,IAAI,aAAlB,2BACK,EAAKpC,SAASC,IAAI,eADvB,IAEEtC,KAAM6B,WAASyC,OACfE,aAAa,EACbD,QAAS,EAAKtC,IAAIyC,wBAAwBrD,KAAI,SAAAR,GAAM,MAAK,CACvDU,MAAOV,EACPW,MAAOX,SAKXmD,EAAYE,QAAQS,OAAO,EAAE,GAlBb,EADD,+EAqBjB,sBAAAjC,EAAA,0IAEEE,KAAKX,IAAI2C,yBAFX,gDArBiB,2DAAkC7C,MDajD,EAAK2C,wBAA0B,GACP,EAAKG,KAAKV,MAAK,SAAAW,GAAI,MAAkB,wBAAdA,EAAKC,QACpCxD,MAAQ,sBAVN,EADE,oFAatB,sBAAAmB,EAAA,6NAGOE,KAAKoC,YAHZ,gCAIUpC,KAAKgC,yBAJf,gDAbsB,wHAoBtB,sBAAAlC,EAAA,6PAEQE,KAAKgC,yBAFb,gDApBsB,iIAwBtB,qCAAAlC,EAAA,sEAC0CE,KAAKjC,gBAAgBmC,QAD/D,mBACoBZ,EADpB,EACUgB,SADV,iDAGEN,KAAKV,YAAcA,EAAY+C,QAAO,SAACC,EAAKC,GAG1C,OAFAD,EAAIC,EAAIC,YAAcF,EAAIC,EAAIC,aAAe,GAC7CF,EAAIC,EAAIC,YAAcF,EAAIC,EAAIC,YAAYC,OAAOF,EAAIG,YAC9CJ,IACN,IACH/D,OAAOC,KAAKwB,KAAKkB,OAAOR,SAAQ,SAACiC,GAE7BA,EAASC,SAAS,SACf,EAAKd,wBAAwBe,QAAQ,EAAK3B,MAAMyB,GAAU1E,SAAW,IACpE,EAAKiD,MAAMyB,GAAU1B,qBAEzB,EAAKC,MAAMyB,GAAYG,EAAqB,EAAK5B,MAAMyB,QAd7D,gDAxBsB,2DAAyB9E,cAAIJ,KA2CrDD,EAAUM,QFwDiB,gBEvDZN,QEjDFN,G,cAAS,CACpB6F,OAAQ,CACN5F,KAAM,SACNC,KAAMC,IAAOW,UACbC,OAAQ,SACR+E,WAAY,CAAC,OAAQ,QAAS,QAAS,YAEzCC,IAAK,CACH9F,KAAM,MACNC,KAAMC,IAAO6F,QACb3C,OAAQ,GACR4C,UAAW,GAEbC,MAAO,CACLjG,KAAM,QACNC,KAAMC,IAAO6F,QACb3C,OAAQ,GACR4C,UAAW,GAEbE,WAAY,CACVlG,KAAM,aACNC,KAAMC,IAAOW,UACbC,OAAQ,UAEVqF,OAAQ,CACNnG,KAAM,SACNC,KAAMC,IAAO6F,QACb3C,OAAQ,GACR4C,UAAW,GAEbI,KAAM,CACJpG,KAAM,OACNC,KAAMC,IAAOW,UACbC,OAAQ,QAEVuF,QAAS,CACPrG,KAAM,UACNC,KAAMC,IAAOW,UACbC,OAAQ,aAICV,EAAS,CACpBkG,SAAU,CACRtG,KAAM,WACND,OAAQ,CACN,CACEC,KAAM,UACNC,KAAMC,IAAOW,UACbC,OAAQ,UACR+E,WAAY,CAAC,OAAQ,QAAS,oBAEhC9F,EAAOoG,OACP,CACEnG,KAAM,QACNC,KAAMC,IAAO6F,QACb3C,OAAQ,GACR4C,UAAW,GAEbjG,EAAO+F,OAKPS,EAAO,CACXxG,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,WACNC,KAAMC,IAAOsG,SAEf,CACExG,KAAM,cACNC,KAAMC,IAAOuG,OAGjBrG,OAAQ,CACN,CACEJ,KAAM,YACND,OAAQ,CACN,CACEC,KAAM,OACNC,KAAMC,IAAOsG,SAEf,CACExG,KAAM,cACNC,KAAMC,IAAOC,YAOjBuG,EAAS,CACb3G,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,QACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,UACNC,KAAMC,IAAOC,UAKbwG,EAAU,CACd5G,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,QACNC,KAAMC,IAAO6F,QACb3C,OAAQ,GACR4C,UAAW,GAEb,CACEhG,KAAM,kBACNC,KAAMC,IAAOsG,QACbI,aAAa,KAMbC,EAAQ,CACZ9G,OAAQ,CACNA,EAAO6F,OACP,CACE5F,KAAM,QACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,UACNC,KAAMC,IAAOC,QAEfJ,EAAOkG,MACP,CACEjG,KAAM,UACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,UACNC,KAAMC,IAAOW,UACbC,OAAQ,UACR8F,aAAa,GAnBT,2BAsBD7G,EAAOkG,OAtBN,IAuBJjG,KAAM,aAGVI,OAAQ,CACNA,EAAOkG,WAKLQ,EAAU,CACd/G,OAAQ,CACNA,EAAO6F,OACP7F,EAAOkG,MACP,CACEjG,KAAM,UACNC,KAAMC,IAAOC,SAGjBC,OAAQ,CACNA,EAAOkG,WAILS,EAAU,CACdhH,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,UAKb6G,EAAU,CACdjH,OAAQ,CACN,CACEC,KAAM,UACNC,KAAMC,IAAOW,UACbC,OAAQ,WAEVf,EAAOkG,MACP,CACEjG,KAAM,UACNC,KAAMC,IAAOC,SAGjBC,OAAQ,CACN,CACEJ,KAAM,iBACND,OAAQ,CACNA,EAAO6F,OACP7F,EAAO+F,QAMTmB,EAAU,CACdlH,OAAQ,CACN,CACEC,KAAM,UACNC,KAAMC,IAAOW,UACbC,OAAQ,WAEVf,EAAOmG,WACPnG,EAAOkG,MACP,CACEjG,KAAM,UACNC,KAAMC,IAAOC,UAKb+G,EAAa,CACjBjG,aAAa,EACblB,OAAQ,CACNA,EAAO6F,QAETuB,UAAW,CACTpH,EAAO+F,MAILsB,EAAc,CAClBnG,aAAa,EACblB,OAAQ,CACN,CACEC,KAAM,UACNC,KAAMC,IAAOW,UACbC,OAAQ,YAGZqG,UAAW,CACTpH,EAAO+F,MAILuB,EAAgB,CACpBpG,aAAa,EACblB,OAAQ,CACN,CACEC,KAAM,UACNC,KAAMC,IAAOW,UACbC,OAAQ,YAGZqG,UAAW,CACTpH,EAAOoG,SAILmB,EAAY,CAChBvH,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,UAKboH,EAAY,CAChBxH,OAAQ,CACN,CACEC,KAAM,YACNC,KAAMC,IAAOW,UACbC,OAAQ,cAGZV,OAAQ,CACN,CACEJ,KAAM,WACND,OAAQ,CACN,CACEC,KAAM,UACNC,KAAMC,IAAOW,UACbC,OAAQ,WAEV,CACEd,KAAM,QACNC,KAAMC,IAAO6F,QACb3C,OAAQ,GACR4C,UAAW,OAOfwB,EAAU,CACdzH,OAAQ,CACNA,EAAOmG,WACPnG,EAAOkG,MACP,CACEjG,KAAM,YACNC,KAAMC,IAAOW,UACbC,OAAQ,cAGZV,OAAQ,CACNA,EAAOkG,WAILmB,EAAa,CACjB1H,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,SAGjBC,OAAQ,CACN,CACEJ,KAAM,QACND,OAAQ,CACN,CACEC,KAAM,OACNC,KAAMC,IAAOC,YAOjBuH,EAAO,CACX3H,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,QAEfJ,EAAO6F,OACP7F,EAAOsG,QACPtG,EAAOqG,KACP,CACEpG,KAAM,SACNC,KAAMC,IAAOW,UACbC,OAAQ,cAEV,CACEd,KAAM,YACNC,KAAMC,IAAOyH,SAEf,CACE3H,KAAM,aACNC,KAAMC,IAAOsG,WAKboB,EAAc,CAClB3G,aAAa,EACblB,OAAQ,CACN,CACEC,KAAM,OACNC,KAAMC,IAAOW,UACbC,OAAQ,QAEV,CACEd,KAAM,OACNC,KAAMC,IAAO2H,MAEf,CACE7H,KAAM,OACNC,KAAMC,IAAOW,UACbC,OAAQ,QAEV,CACEd,KAAM,UACNC,KAAMC,IAAOC,UAKb2H,EAAO,CACX/H,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,OACNC,KAAMC,IAAO2H,MAEf,CACE7H,KAAM,OACNC,KAAMC,IAAOsG,SAEfzG,EAAO6F,OACP7F,EAAOsG,QACP,CACErG,KAAM,OACNC,KAAMC,IAAOW,UACbC,OAAQ,QAEVf,EAAOqG,OAIL2B,GAAU,CACdhI,OAAQ,CACN,CACEC,KAAM,QACNC,KAAMC,IAAOC,QAEfJ,EAAO6F,SAIEoC,GAAW,CACtBjI,OAAQ,CACN,CACEC,KAAM,gBACNC,KAAMC,IAAOW,UACbC,OAAQ,cAEV,CACEd,KAAM,cACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,aACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,aACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,kBACNC,KAAMC,IAAOC,QAEf,CACIH,KAAM,kBACRC,KAAMC,IAAOC,QAEf,CACEH,KAAM,yBACNC,KAAMC,IAAOC,QAEf,CACEH,KAAM,qBACNC,KAAMC,IAAOC,UAONN,GAAa,CACxB+H,cACAG,WACAN,aACAC,OACAI,OACAT,gBACAD,cACAF,aACAX,OACAQ,UACAO,YACAC,YACAZ,UACAa,UACAP,UACAD,UACAN,SACAI,UACAD,S,SCleMN,GAAS1G,GAAT0G,KAuCO0B,G,kDApCb,WAAY1H,GAAS,IAAD,8BAClB,cAAMA,IAED+B,SAASI,KACZ,CACEb,GAAI,OACJ5B,KAAM6B,WAASoG,KACf5F,SAAU,CAAC,aACP6F,KAAM,GAAMC,qBAAW7B,GAAKxG,OAAO,GAAb,kBADhB,aAENoI,KAAM,GAAMC,qBAAW7B,GAAKxG,OAAO,GAAb,oBAG5B,CACE8B,GAAI,OACJ5B,KAAM6B,WAASuG,KACf/F,SAAU,CACR,CACEd,MAAO,cACPc,SAAU,CACR8F,qBAAW7B,GAAKxG,OAAO,GAAb,mBAGd,CACEyB,MAAO,YACPc,SAAU,CACRgG,0BAAgB/B,GAAKnG,OAAO,GAAb,sBAOzB,EAAKkC,SAASC,IAAI,aAAa4B,QAAQ,GAAGoE,MAAQ,GAhChC,E,UADCC,mBAAS,CAAEjC,SAAQ,CAAEkC,YAAY,KCFlDC,GAAa,CAAEC,UAAU,GAEvBpC,GAAS1G,GAAT0G,KAEFqC,G,kDAEJ,WAAYrI,GAAS,IAAD,8BAClB,cAAMA,IAcRsI,QAAU,SAACzD,GACT,EAAK0D,QAAU1D,OAAM2D,EAAYL,GACjC,EAAKM,QAdL,EAAKC,QAAQvG,KAAK,CAChBzC,KAAM6B,WAASoH,OACfrH,GAAI,UACJL,MAAO,WACPC,OAAO,EACP0H,YAAY,EACZC,SAAU,EAAKP,UAEjB,EAAKC,QAAUJ,GACf,EAAKpG,SAASC,IAAI,QAAQ4B,QAAQC,MAAK,SAAAiF,GAAG,MAAqB,aAAjBA,EAAI/E,YAAyBgF,OACvE,SAAAlE,GAAG,OAAKA,EAAM,SAAM,IAbN,E,UAFCmE,mBAAS,CAAEhD,SAAQ,CAAEkC,YAAY,EAAMe,aAAa,KAArEZ,GACG9H,OAAS,OAsBH8H,U,oBC3BMa,G,kDAGnB,WAAYxH,GAAO,IAAD,8BAChB,cAAMA,IA0CRyH,WA3CkB,sBA2CL,sCAAA/G,EAAA,+DACoB,EAAKiB,YAA5B+F,EADG,EACHA,UAAWC,EADR,EACQA,QADR,SAEgB,EAAK1H,IAAI2E,MAAMgD,OAAO,CAC/CF,UAAWG,KAAOH,GAAWI,QAAQ,OACrCH,QAASE,KAAOF,GAASI,MAAM,SAJtB,gBAEH7G,EAFG,EAEHA,SAIF8C,EAAQ,CACZ,yBAA0B,EAAK/D,IAAI+H,EAAE,SACrCnE,IAAK3C,EAAS+B,QAAO,SAACC,EAAKC,GAAN,OAAcD,EAAMC,EAAIU,MAAK,IAEpD3C,EAAST,KAAKuD,GACd,EAAKvC,QAAQwG,KAAKzI,MAAQ0B,EAXf,2CAzCX,EAAKb,SAAW,CACd,CACET,GAAI,YACJ5B,KAAM6B,WAAS+F,KACfrG,MAAO,eACP2I,YAAY,EACZ1I,MAAO,IAAI2I,MAEb,CACEvI,GAAI,UACJ5B,KAAM6B,WAAS+F,KACfrG,MAAO,aACP2I,YAAY,EACZ1I,MAAO,IAAI2I,MAEb,CACEvI,GAAI,aACJ5B,KAAM6B,WAASuI,OACf7I,MAAO,cACP8I,QAAS,EAAKZ,YAEhB,CACE7H,GAAI,OACJ5B,KAAM6B,WAASyI,MACfpG,QAAS,CACP,CACE3C,MAAO,UACP8C,SAAU,0BAEZ,CACE9C,MAAO,SACP8C,SAAU,UAEZ,CACE9C,MAAO,MACP8C,SAAU,UArCF,E,UAHqBtC,QAApByH,GACZjI,MAAQ,gBADIiI,GAEZ3I,OAAS,Q,ICFG2I,G,kDAGnB,WAAYxH,GAAO,IAAD,8BAChB,cAAMA,IAoDRyH,WArDkB,sBAqDL,0CAAA/G,EAAA,+DACoB,EAAKiB,YAA5B4G,EADG,EACHA,KAAMC,EADH,EACGA,aADH,SAEgB,EAAKvI,IAAI2E,MAAM9D,MAAM,CAC9CC,MAAO,CACLwH,KAAM,CACJE,KAAMZ,KAAOU,GAAMT,QAAQ,OAC3BY,KAAMb,KAAOU,GAAMR,MAAM,SAG7BY,MAAO,CAAC,CAAC,SAAU,UACnB1H,OAAQ,IAVC,uBAEHC,EAFG,EAEHA,SAWF0H,EAAU1H,EAAS+B,QAAO,SAACC,EAAKyF,GAIpC,OAHIA,EAAMhF,SAA8C,IAApCT,EAAIO,QAAQkF,EAAMhF,OAAO9C,OAC3CqC,EAAIzC,KAAKkI,EAAMhF,OAAO9C,MAEjBqC,IACN,IAlBQ,SAoBH,EAAKjD,IAAIgF,WAAW4D,QAAQ,CAAEN,KAAMV,KAAOU,GAAMR,MAAM,OAAQhH,MAAO,CAAE+H,WAAYF,KApBjF,gBAmBOG,EAnBP,EAmBH7H,SAERA,EAASI,SAAQ,SAAC0H,GAChB,IAAMC,EAAOF,EAAM5G,MAAK,SAAAW,GAAI,OAAIA,EAAKgG,cAAgBE,EAAIrF,QAAUqF,EAAIrF,OAAO9C,SAE9EmI,EAAIE,OAAUD,KAAUT,GAAgBS,EAAKpF,KAAO,EAAK,EAAIoF,EAAKpF,OAGpE,EAAKpC,QAAQwG,KAAKzI,MAAQ0B,EA3Bf,4CAnDX,EAAKb,SAAW,CACd,CACET,GAAI,OACJ5B,KAAM6B,WAAS+F,KACfrG,MAAO,OACP2I,YAAY,EACZ1I,MAAO,IAAI2I,MAEb,CACEvI,GAAI,eACJ5B,KAAM6B,WAASsJ,SACf5J,MAAO,qBAET,CACEK,GAAI,aACJ5B,KAAM6B,WAASuI,OACf7I,MAAO,cACP8I,QAAS,EAAKZ,YAEhB,CACE7H,GAAI,OACJ5B,KAAM6B,WAASyI,MACfpG,QAAS,CACP,CACE3C,MAAO,QACP8C,SAAU,SAEZ,CACE9C,MAAO,SACP8C,SAAU,gBAEZ,CACE9C,MAAO,QACP8C,SAAU,SAEZ,CACE9C,MAAO,UACP8C,SAAU,WAEZ,CACE9C,MAAO,MACP8C,SAAU,SAEZ,CACE9C,MAAO,SACP8C,SAAU,YA/CF,E,UAHqBtC,QAApByH,GACZjI,MAAQ,oBADIiI,GAEZ3I,OAAS,QCHH,I,GAAA,YAAAkB,GAAI,qEAGjB,WAAYzB,GAAS,IAAD,8BAClB,cAAMA,IAoBR8K,YArBoB,uCAqBN,WAAOtI,GAAP,iBAAAJ,EAAA,sEACe,EAAKT,IAAIwE,OAAO3D,MAAM,CAC/CC,MAAO,CAAEsI,IAAK,CACZ,CAAE9J,MAAO,CAAE+J,MAAM,IAAD,OAAMxI,EAAN,OAChB,CAAEyI,MAAO,CAAED,MAAM,IAAD,OAAMxI,EAAN,OAChB,CAAE0I,QAAS,CAAEF,MAAM,IAAD,OAAMxI,EAAN,WALV,uBACJI,EADI,EACJA,SADI,mBAQJA,GAAY,IAAI7B,KAAI,SAAAyD,GAAI,kCAAUA,GAAV,IAAgBvD,MAAM,GAAD,OAAKuD,EAAKvD,MAAV,aAAoBuD,EAAKyG,OAAS,GAAlC,YAAwCzG,EAAK0G,SAAW,GAAxD,WARzC,2CArBM,wDAgCpBC,aAAe,SAACtG,GACd,EAAK0D,QAAQiC,WAAc3F,GAAOA,EAAItC,WAASiG,EAC/C,EAAK7G,IAAIyJ,mBAAqBvG,EAC9B,EAAK4D,QAjCQ,EAAK1G,SAASC,IAAI,QAC1B4B,QAAQC,MAAK,SAAAC,GAAM,MAAwB,YAApBA,EAAOC,YAAwBsH,SAAW,IACtE,EAAKtJ,SAASuJ,QAAQ,CACpB5L,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACET,GAAI,SACJL,MAAO,gCACPvB,KAAM6B,WAASyC,OACfuH,WAAY,EAAKT,YACjBjC,SAAU,EAAKsC,aACfjK,MAAO,EAAKS,IAAIyJ,mBAChBxD,KAAM,MAKZ,EAAKW,QAAU,EAAKA,SAAW,CAAEiC,WAAa,EAAK7I,IAAIyJ,oBAAsB,EAAKzJ,IAAIyJ,mBAAmB7I,WAASiG,GAnBhG,EAHH,UAA6B/G,GAA7B,EACVlB,OAAS,QADC,EAEViL,KAAM,EAFI,G,UCAEC,G,WACnB,WAAYzL,GAAS,IAAD,gCA4EpB0L,UA5EoB,sBA4ER,sBAAAtJ,EAAA,sDACV,EAAKe,QAAQwI,gBAAgBC,MAAO,EACpC,EAAKC,OAFK,2CA5EQ,KAgFpBC,SAAW,SAACpB,GACN,EAAKpB,QACP,EAAK3H,IAAIiK,KAAT,UAAiBlB,EAAInK,OAArB,QAAmC,CAAEe,GAAIoJ,EAAIqB,WAjF/ClL,OAAOmL,OAAO1J,KAAMtC,GAEpB,IACMiM,EAAiB,CACrB,CACE3K,GAAI,kBACJ5B,KAAM6B,WAAS2K,MACfjL,MAAO,gBACPkL,IAAK,MAEP,CACE7K,GAAI,iBACJ5B,KAAM6B,WAASyI,MACfoC,MAXU,GAYVN,SAAUxJ,KAAKwJ,SACflI,QAAS,CACP,CACE3C,MAAO,WACP8C,SAAU,YAEZ,CACE9C,MAAO,OACP8C,SAAU,GACVgF,OAAQ,SAAAlE,GAAG,OAAIA,EAAIwH,OAASxH,EAAIU,IAAM,EAAIV,EAAIU,IAAM,MAEtD,CACEtE,MAAO,UACP8C,SAAU,GACVgF,OAAQ,SAAAlE,GAAG,OAAIA,EAAIyH,UAAYzH,EAAIU,IAAM,GAAKV,EAAIU,IAAM,OAG5DrE,MAAO,KAIPoB,KAAKgH,QACPhH,KAAKP,SAAWkK,EAChB3J,KAAKuJ,KAAKvJ,KAAKkI,aAEflI,KAAKP,SAAW,CACd,CACErC,KAAM6B,WAASuI,OACf7I,MAAO,cACP8I,QAASzH,KAAKoJ,UACda,WAAW,GAEb,CACEjL,GAAI,kBACJ5B,KAAM6B,WAASiL,MACfnB,SAAU,KACVO,MAAM,EACN7J,SAAUkK,I,+EAKlB,WAAWzB,GAAX,mBAAApI,EAAA,sEACmCE,KAAKX,IAAIgF,WAAW8F,SAAS,CAC5DhK,MAAO,CAAE+H,WAAYA,GAAclI,KAAKa,QAAQkC,OAAOnE,MAAMqB,MAC7D8H,MAAO,CAAC,UAHZ,gBACoBV,EADpB,EACU/G,SAIF8J,EAAS/C,EAAKhF,QAAO,SAACC,EAAKC,GAI/B,OAHAD,EAAI,IAAMC,EAAIU,IACdX,EAAI,IAAMC,EAAIU,IAAM,EAAIV,EAAIU,IAAM,EAClCX,EAAI,IAAMC,EAAIU,IAAM,GAAKV,EAAIU,IAAM,EAC5BX,IACN,CAAC,EAAG,EAAG,IACV+E,EAAKxH,KAAK,CACRwK,SAAUrK,KAAKX,IAAI+H,EAAE,SACrB2C,KAAMK,EAAO,GACbJ,QAASI,EAAO,KAElBpK,KAAKa,QAAQyJ,eAAe1L,MAAQyI,EACpCrH,KAAKa,QAAQ0J,gBAAgB5L,MAAQqB,KAAKX,IAAI+H,EAA9C,iDAA+DpH,KAAKgH,OAAS,GAAKhH,KAAKa,QAAQkC,OAAOnE,MAAMD,MAAUyL,EAAO,IAjB/H,gD,8DCzDII,GAAe,SAACrK,EAAOrB,EAAOF,GAC9BA,IAEFuB,EAAMrB,GAAS,CAAE4J,MAAM,IAAD,OAAM9J,GAAS,GAAf,QAIL6L,G,WACnB,cAAuE,IAAD,OAAxDtI,EAAwD,EAAxDA,KAAMuI,EAAkD,EAAlDA,cAAeC,EAAmC,EAAnCA,mBAAoBC,EAAe,EAAfA,YAAe,yBA4FtEC,aAAe,SAAC9H,GACVA,IACF,EAAKlC,QAAQ+H,QAAQhK,MAAQmE,EAAO6F,QACpC,EAAK/H,QAAQ8H,MAAM/J,MAAQmE,EAAO4F,QA/FgC,KAkGtEmC,gBAAkB,WAChB,EAAKjK,QAAQkK,qBAAqBzB,MAAO,GAnG2B,KAqGtE0B,aAAe,WACT,EAAKC,SAASC,aAAa,EAAKD,SACpC,EAAKA,QAAUE,WAAW,EAAKC,OAAQ,MAvG6B,KAyGtEA,OAzGsE,sBAyG7D,gCAAAtL,EAAA,6DAEP0K,GADMrK,EAAQ,GACM,QAAS,EAAKU,QAAQwK,UAAUzM,OACpD4L,GAAarK,EAAO,QAAS,EAAKU,QAAQyK,UAAU1M,OACpD4L,GAAarK,EAAO,UAAW,EAAKU,QAAQ0K,YAAY3M,OAJjD,SAK6B,EAAKS,IAAIwE,OAAO3D,MAAM,CAAEC,QAAOE,MAAO,IALnE,gBAKW2H,EALX,EAKC1H,SACR,EAAKO,QAAQ2K,aAAa5M,MAAQoJ,EAN3B,2CAzG6D,KAiHtEyD,aAAe,SAACrD,GACd,EAAKvH,QAAQkC,OAAOnE,MAAQwJ,EACxB,EAAKvH,QAAQkC,OAAOwD,UACtB,EAAK1F,QAAQkC,OAAOwD,SAAS6B,GAE/B,EAAKvH,QAAQkK,qBAAqBzB,MAAO,GAtH2B,KAgItEoC,OAhIsE,sBAgI7D,4BAAA5L,EAAA,yDACF,EAAK6L,WAAW,aADd,oDAEF,EAAKA,WAAW,aAFd,oDAGF,EAAKA,WAAW,eAHd,wDAIDC,EAAO,CACXjN,MAAO,EAAKkC,QAAQwK,UAAUzM,MAC9B+J,MAAO,EAAK9H,QAAQyK,UAAU1M,MAC9BgK,QAAS,EAAK/H,QAAQ0K,YAAY3M,OAP7B,SASD,EAAKS,IAAIwE,OAAOgI,IAAI,CAAED,SATrB,OAUP,EAAKR,SAVE,4CAhI6D,KA4ItE5C,YA5IsE,uCA4IxD,WAAOtI,GAAP,iBAAAJ,EAAA,sEACe,EAAKT,IAAIwE,OAAO3D,MAAM,CAC/CC,MAAO,CACLsI,IAAK,CACH,CAAE9J,MAAO,CAAE+J,MAAM,IAAD,OAAMxI,GAAS,GAAf,OAChB,CAAEyI,MAAO,CAAED,MAAM,IAAD,OAAMxI,GAAS,GAAf,OAChB,CAAE0I,QAAS,CAAEF,MAAM,IAAD,OAAMxI,GAAS,GAAf,WANZ,uBACJI,EADI,EACJA,SADI,mBAUJA,GAAY,IAAI7B,KAAI,SAAAyD,GAAI,kCAAUA,GAAV,IAAgBvD,MAAM,GAAD,OAAKuD,EAAKvD,MAAV,aAAoBuD,EAAKyG,OAAS,IAAlC,OAAwCzG,EAAKyG,OAASzG,EAAK0G,QAAW,IAAM,IAA5E,OAAiF1G,EAAK0G,SAAW,GAAjG,WAVzC,2CA5IwD,sDACpE5I,KAAKP,SAAW0C,EAAK1C,SACrBO,KAAKa,QAAUsB,EAAKtB,QACpBb,KAAKX,IAAM8C,EAAK9C,IAEhB,IAAMyM,EAAc9L,KAAKP,SAASC,IAAI,UACtCoM,EAAYlB,YAAcA,EACtBD,IACFmB,EAAYvF,SAAWvG,KAAK6K,cAG1BH,GACF1K,KAAKP,SAASoC,IAAI,SAAU,CAC1B7C,GAAI,cACJ5B,KAAM6B,WAASoG,KACf5F,SAAU,CAAC,2BAEJqM,GAFG,IAGNxG,KAAM,EACN2D,WAAYjJ,KAAKwI,cAEnB,CACEpL,KAAM6B,WAASuI,OACf7I,MAAO,eACP8I,QAASzH,KAAK8K,gBACdb,WAAW,EACX3E,KAAM,GAER,CACElI,KAAM6B,WAAS8M,MACftM,SAAU,IAAI0J,GAAW,CAAEtI,QAASb,KAAKa,QAASxB,IAAKW,KAAKX,MAAOI,SACnE6F,KAAM,MAKdtF,KAAKP,SAASI,KAAK,CACjBb,GAAI,uBACJ5B,KAAM6B,WAASiL,MACfZ,MAAM,EACN3K,MAAO,sBACPoK,SAAU,KACVtJ,SAAU,CACR,CACErC,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACErC,KAAM6B,WAASC,MACfF,GAAI,YACJL,MAAO,QACP4H,SAAUvG,KAAKgL,aACf1F,KAAM,GAER,CACElI,KAAM6B,WAASC,MACfF,GAAI,YACJL,MAAO,QACP4H,SAAUvG,KAAKgL,aACf1F,KAAM,GAER,CACElI,KAAM6B,WAASC,MACfF,GAAI,cACJL,MAAO,UACP4H,SAAUvG,KAAKgL,aACf1F,KAAM,GAER,CACElI,KAAM6B,WAASuI,OACf7I,MAAO,SACP8I,QAASzH,KAAK0L,OACdpG,KAAM,GAER,CACElI,KAAM6B,WAAS2K,MACftE,KAAM,KAIZ,CACEtG,GAAI,eACJ5B,KAAM6B,WAASyI,MACf8B,SAAUxJ,KAAKyL,aACfnK,QAAS,CACP,CAAE3C,MAAO,QAAS8C,SAAU,SAC5B,CAAE9C,MAAO,QAAS8C,SAAU,SAC5B,CAAE9C,MAAO,UAAW8C,SAAU,gB,8CAkCxC,SAAW3C,GACT,OAAKkB,KAAKa,QAAQ/B,GAAOF,OAIzBoB,KAAKa,QAAQ/B,GAAOkN,OAAQ,GACrB,IAJLhM,KAAKa,QAAQ/B,GAAOkN,OAAQ,GACrB,O,KChIAC,GAAb,WACE,WAAY7M,GAAO,IAAD,gCAUlB8M,UAAY,SAAC9D,GAEXA,EAAInF,IAAIrE,OAASwJ,EAAI9E,OAAO1E,MAAQwJ,EAAI+D,MAAMvN,OAAOwN,QAAQ,GAC7D,EAAKC,aAbW,KAelBC,cAfkB,uCAeF,WAAOlE,GAAP,6BAAAtI,EAAA,yDACNqM,EAA2B/D,EAA3B+D,MAAO7I,EAAoB8E,EAApB9E,QAAQiJ,EAAYnE,EAAZmE,SACV3N,MAFC,wDAGR4N,EAAmB,EAAK3L,QAAQ4L,UAChCA,EAAYD,GAAoBA,EAAiB5N,OACjDuB,EAAQ,CACZ,yBAA0BoM,EAAQ3N,MAAMqB,OAGpCyM,cAAiBD,GAAaA,EAAUxM,MAAS,KATzC,SAUqB,EAAKZ,IAAIqF,UAAUxE,MAAM,CAC1DC,QACA4H,MAAO,CAAC,CAAC,OAAQ,SACjB1H,MAAO,IAbK,iBAUIsM,EAVJ,EAUNrM,UAKGC,QAAUoM,EAAO,GAAGlJ,SAASlD,OACtC4L,EAAMvN,MAAQ+N,EAAO,GAAGlJ,SAAS,GAAG0I,MAEpCA,EAAMvN,MAAQ2N,EAAQ3N,MAAMuN,MAEzB/D,EAAI9E,OAAO1E,QACd0E,EAAO1E,MAAQ,GAEjB,EAAKsN,UAAU9D,GAvBD,4CAfE,sDAChBpI,KAAKP,SAAWL,EAAKK,SACrBO,KAAKa,QAAUzB,EAAKyB,QACpBb,KAAKX,IAAMD,EAAKC,IAEhBW,KAAKP,SAASC,IAAI,YAAY4B,QAAQ,GAAGiF,SAAWvG,KAAKsM,cACzDtM,KAAKP,SAASC,IAAI,YAAY4B,QAAQ,GAAGsJ,aAAc,EACvD5K,KAAKP,SAASC,IAAI,YAAY4B,QAAQ,GAAGiF,SAAWvG,KAAKkM,UACzDlM,KAAKP,SAASC,IAAI,YAAY4B,QAAQ,GAAGiF,SAAWvG,KAAKkM,UAT7D,6CAyCE,WACE,IAAM9I,EAAQpD,KAAKa,QAAQ4C,SAAS7E,MACjCyD,QAAO,SAACC,EAAKC,GAAN,OAAeA,EAAIU,IAAMX,IAAQC,EAAIU,IAAOX,IAAM,GACxDtC,KAAK4M,YACP5M,KAAK4M,YAAYxJ,EAAMgJ,QAAQ,IAE/BpM,KAAKa,QAAQuC,MAAMxE,MAAQwE,EAAMgJ,QAAQ,OA/C/C,KA2HeS,GAvEQ,SAAA1N,GAAI,qEAEzB,WAAYzB,GAAS,IAAD,8BAClB,cAAMA,IA0DRoP,MA3DoB,sBA2DZ,gCAAAhN,EAAA,sEAC0B,EAAKT,IAAI2E,MAAMtE,IAAI,CAAEO,KAAM,EAAKA,OAD1D,gBACYiJ,EADZ,EACE5I,SACF+G,EAFA,2BAGD6B,GAHC,IAIJ6D,YAAa,EAAK1N,IAAI2N,SAASD,cAEjC,EAAK1N,IAAIyN,MAAM,CAAEG,SAAU,QAAS5F,SAN9B,2CAzDN,EAAKyD,gBAAkB,IAAIL,GAAgB,CACzCtI,KAAK,gBACLuI,eAAe,EACfC,oBAAoB,EACpBC,aAAa,IAEf,EAAKsC,cAAgB,IAAIjB,GAAJ,iBACrB,EAAKxM,SAASoC,IAAI,QAAS,CACzBzE,KAAM6B,WAASoG,KACf5F,SAAU,CAAC,2BACJ,EAAKA,SAASC,IAAI,UADf,IACyB4F,KAAM,IAD/B,2BAEH,EAAK7F,SAASC,IAAI,YAFf,IAE2B4F,KAAM,OAG7C,EAAK7F,SAASsC,OAAO,EAAKtC,SAASkB,WAAU,SAAAuB,GAAI,MAAgB,YAAZA,EAAKlD,MAAmB,GAE7E,EAAKS,SAASoC,IAAI,UAAW,CAC3BzE,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACErC,KAAM6B,WAAS2K,MACfjL,MAAO,gBACPmL,MAAO,CAAEqD,UAAW,GAAIC,UAAW,SACnC9H,KAAM,GALA,2BAQH,EAAK7F,SAASC,IAAI,YARf,IASN4F,KAAM,IATA,2BAYH,EAAK7F,SAASC,IAAI,YAZf,IAaNkL,aAAa,EACbtF,KAAM,OAIZ,EAAK7F,SAASsC,OAAO,EAAKtC,SAASkB,WAAU,SAAAuB,GAAI,MAAgB,YAAZA,EAAKlD,MAAmB,GAE7E,EAAKoH,QAAQvG,KAAK,CAChBzC,KAAM6B,WAASuI,OACf7I,MAAO,QACP8I,QAAS,EAAKqF,QA3CE,EAFK,6CAgDzB,WAIE,GAHA,wDACE,mEAEG9M,KAAKC,MAAQD,KAAKX,IAAIgO,KAAKC,mBAAoB,CAClD,IAAMjG,EAAOrH,KAAKX,IAAIgO,KAAKC,mBAC3BtN,KAAKa,QAAQkC,OAAOnE,MAAQyI,EAAKtE,OACjC/C,KAAKa,QAAQ0M,QAAQ3O,MAAQyI,EAAKkG,QAClCvN,KAAKa,QAAQ4C,SAAS7E,MAAQyI,EAAK5D,SACnCzD,KAAKX,IAAIgO,KAAKC,wBAAqBpH,EACnClG,KAAKkN,cAAcb,iBA1DE,GAA4BlN,GAA5B,EAClB+J,KAAM,EADY,GCvDnB/E,GAAYnH,GAAZmH,QAGFqJ,G,kDAEJ,WAAY9P,GAAS,IAAD,uBAClB,cAAMA,IAcR+P,YAfoB,sBAeN,gCAAA3N,EAAA,sEAEsB,EAAKT,IAAIgF,WAAW4D,QAAQ,CAC5DN,KAAM,EAAK9G,QAAQ8G,KAAK/I,QAHd,gBAEMuJ,EAFN,EAEJ7H,SAGFoN,EAAWvF,EAAM1J,KAAI,SAAA4J,GAAI,MAAK,CAClCtF,OAAQsF,EAAKtF,OACbE,KAAOoF,GAAQA,EAAKpF,IAAM,EAAK,EAAIoF,EAAKpF,QACtC0K,QAAO,SAAAzL,GAAI,OAAIA,EAAKe,OACxB,EAAKpC,QAAQ+M,eAAehP,MAAQ8O,EACpC,EAAKrB,YAVO,2CAfM,EA2BpBA,UAAY,WACV,IAAMjJ,EAAQ,EAAKvC,QAAQ+M,eAAehP,MACvCyD,QAAO,SAACC,EAAKC,GAAN,OAAeA,EAAIU,IAAMX,IAAQC,EAAIU,IAAOX,IAAM,GAC5D,EAAKzB,QAAQuC,MAAMxE,MAAQwE,EAAMgJ,QAAQ,IA9BvB,EAgCpByB,iBAhCoB,uCAgCD,WAAO3N,GAAP,iBAAAJ,EAAA,sEACU,EAAKT,IAAIwE,OAAO3D,MAAM,CAC/CC,MAAO,CACLsI,IAAK,CACH,CAAE9J,MAAO,CAAE+J,MAAM,IAAD,OAAMxI,GAAS,GAAf,OAChB,CAAEyI,MAAO,CAAED,MAAM,IAAD,OAAMxI,GAAS,GAAf,OAChB,CAAE0I,QAAS,CAAEF,MAAM,IAAD,OAAMxI,GAAS,GAAf,WANP,uBACTI,EADS,EACTA,SADS,mBAUTA,GAAY,IAAI7B,KAAI,SAAAyD,GAAI,kCAAUA,GAAV,IAAgBvD,MAAM,GAAD,OAAKuD,EAAKvD,MAAV,aAAoBuD,EAAKyG,OAAS,GAAlC,YAAwCzG,EAAK0G,SAAW,GAAxD,WAVpC,2CAhCC,sDAElB,EAAKnJ,SAASC,IAAI,WAAWkL,aAAc,EAC3C,EAAKnL,SAASC,IAAI,6BAA6BD,SAASI,KACtD,CACEzC,KAAM6B,WAASuI,OACf7I,MAAO,gBACP8I,QAAS,EAAKgG,cAGlB,IAAMK,EAAQ,EAAKrO,SAASC,IAAI,kBAVd,OAWlBoO,EAAMxM,QAAQ,GAAGiF,SAAW,EAAK8F,UACjCyB,EAAMC,SAAW,EAAK1B,UACtByB,EAAMxM,QAAQ,GAAG2H,WAAa,EAAK4E,iBAbjB,E,UAFIlI,mBAAS,CAAExB,YAAW,CAAEyB,YAAY,EAAMe,aAAa,KAA3E6G,GACGtE,KAAM,EA+CAsE,UC7CFQ,GAAa,SAAC,GAAyD,IAAvD/F,EAAsD,EAAtDA,QAASkC,EAA6C,EAA7CA,SAAUjN,EAAmC,EAAnCA,OAAQoH,EAA2B,EAA3BA,UAAW2J,EAAgB,EAAhBA,UAC3D5G,EAAO,GACP+C,EAASnC,EAAQxJ,KAAI,SAAAyD,GAAI,kCAC1BA,GAD0B,IAE7BgM,QAAS,GACTC,SAAU,EACVC,SAAU,EACVC,MAAOnM,EAAKoC,EAAU,IACtBlB,MAAO,OAqCT,OAlCA+G,EAASzJ,SAAQ,SAAC4N,GAChB,IACY,EADRlL,EAAQgH,EAAO7I,MAAK,SAAAW,GAAI,OAlBZqM,EAkB2BrM,EAAKhF,EAAO,IAlBjCsR,EAkBsCF,EAAOpR,EAAO,IAjBxEqR,IAASC,MACTD,IAAQC,IAAaD,EAAKtO,OAASuO,EAAKvO,KAF3B,IAACsO,EAAMC,KAmBjBpL,IACE,mBACFlG,EAAO,GAAKoR,EAAOpR,EAAO,KADxB,wBAEM,IAFN,yBAGO,GAHP,yBAIO,GAJP,sBAKI,GALJ,sBAMI,GANTkG,EAAK,EAQLgH,EAAOvK,KAAKuD,IAET6K,GACH7K,EAAM8K,QAAQrO,KAAKyO,GAErB,IAAMG,EAAMnK,EAAU,GAClBgK,EAAOG,GAAO,IAEhBH,EAAOH,SAAWG,EAAOG,GACzBrL,EAAM+K,UAAYG,EAAOG,IAEvBH,EAAOG,GAAO,IAEhBH,EAAOF,UAAYE,EAAOG,GAC1BrL,EAAMgL,UAAYE,EAAOG,OAG7BrE,EAAO1J,SAAQ,SAAC0C,GAEdA,EAAMA,MAASA,EAAMiL,MAAQjL,EAAM+K,SAAY/K,EAAMgL,SACrD/G,EAAKxH,KAAL,MAAAwH,EAAI,CAAMjE,GAAN,mBAAgBA,EAAM8K,cAGrB7G,GAGIqH,GAAY,SAACrH,GACxB,OAAIA,EAAKgD,SAAiB,GACnB,CAAEsE,WAAY,SAGFC,G,kDAGnB,WAAYxP,GAAO,IAAD,8BAChB,cAAMA,IA+DRyH,WAhEkB,sBAgEL,oCAAA/G,EAAA,6DACLQ,EAAW,GACjB,EAAKO,QAAQwG,KAAKzI,MAAQ0B,EAFf,SAImDuO,QAAQC,IAAI,CACxE,EAAKzP,IAAIkF,YAAY0D,QAAQ,CAC3BN,KAAMV,KAAO,EAAKpG,QAAQkO,YAAYnQ,OAAOsI,QAAQ,SAEvD,EAAK7H,IAAIkF,YAAY4F,SAAS,CAC5BhK,MAAO,CACLwH,KAAM,CACJqH,IAAK/H,KAAO,EAAKpG,QAAQkO,YAAYnQ,OAAOsI,QAAQ,OACpDY,KAAMb,KAAO,EAAKpG,QAAQoO,UAAUrQ,OAAOuI,MAAM,aAZ9C,mCAIQc,EAJR,KAIF3H,SAAiC6J,EAJ/B,KAIqB7J,SAahC,EAAKO,QAAQwG,KAAKzI,MAAQoP,GAAW,CAAE/F,UAASkC,WAAUjN,OAAQ,CAAC,WAAYoH,UAAW,CAAC,OAAQ2J,WAAY,EAAKpN,QAAQqO,QAAQtQ,QAjBzH,2CA9DX,EAAKa,SAAW,CACd,CACErC,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACET,GAAI,cACJ5B,KAAM6B,WAAS+F,KACfrG,MAAO,eACP2I,YAAY,EACZ1I,MAAOqI,OAASC,QAAQ,SAE1B,CACElI,GAAI,YACJ5B,KAAM6B,WAAS+F,KACfrG,MAAO,aACP2I,YAAY,EACZ1I,MAAOqI,OAASE,MAAM,SAExB,CACEnI,GAAI,UACJ5B,KAAM6B,WAASsJ,SACf5J,MAAO,wBAIb,CACEK,GAAI,aACJ5B,KAAM6B,WAASuI,OACf7I,MAAO,cACP8I,QAAS,EAAKZ,YAEhB,CACE7H,GAAI,OACJ5B,KAAM6B,WAASyI,MACfgH,aACApN,QAAS,CACP,CACEtC,GAAI,UACJL,MAAO,mBACP8C,SAAU,GACVgF,OAAQ,SAAAlE,GAAG,OAAKA,EAAI8H,UAAa9H,EAAI4M,SAAW5M,EAAI4M,QAAQxQ,OAAW,SAEzE,CACEA,MAAO,QACP8C,SAAU,OAEZ,CACE9C,MAAO,WACP8C,SAAU,YAEZ,CACE9C,MAAO,WACP8C,SAAU,YAEZ,CACE9C,MAAO,QACP8C,SAAU,YA1DF,E,UAHkBtC,QAAjByP,GACZjQ,MAAQ,YADIiQ,GAEZ3Q,OAAS,U,IC7DGmR,G,kDAGnB,WAAYhQ,GAAO,IAAD,8BAChB,cAAMA,IA4CRyH,WA7CkB,sBA6CL,gCAAA/G,EAAA,6DACLK,EAAQ,CACZwH,KAAM,CACJqH,IAAK/H,KAAO,EAAKpG,QAAQkO,YAAYnQ,OAAOsI,QAAQ,OACpDY,KAAMb,KAAO,EAAKpG,QAAQoO,UAAUrQ,OAAOuI,MAAM,SAJ1C,SAOsB,EAAK9H,IAAI2E,MAAM9D,MAAM,CACpDmP,WAAW,EACXrM,WAAY,CACV,CAAC,CAAEsM,MAAO,CAAEC,GAAI,OAAQ/I,IAAK,SAAY,OACzC,CAAC,CAAE8I,MAAO,CAAEC,GAAI,QAAS/I,IAAK,SAAY,UAC1C,CAAC,CAAE8I,MAAO,CAAEC,GAAI,MAAO/I,IAAK,UAAa,QAE3CgJ,MAAO,CAAC,CAAEC,KAAM,QAChB1H,MAAO,CAAC,CAAE0H,KAAM,QAChBtP,UAhBS,gBAOOkH,EAPP,EAOH/G,SAWR,EAAKO,QAAQwG,KAAKzI,MAAQyI,EAlBf,2CA3CX,EAAK5H,SAAW,CACd,CACET,GAAI,cACJ5B,KAAM6B,WAAS+F,KACfrG,MAAO,eACP2I,YAAY,EACZ1I,MAAOqI,OAASC,QAAQ,SAE1B,CACElI,GAAI,YACJ5B,KAAM6B,WAAS+F,KACfrG,MAAO,aACP2I,YAAY,EACZ1I,MAAOqI,OAASE,MAAM,SAExB,CACEnI,GAAI,aACJ5B,KAAM6B,WAASuI,OACf7I,MAAO,cACP8I,QAAS,EAAKZ,YAEhB,CACE7H,GAAI,OACJ5B,KAAM6B,WAASyI,MACfpG,QAAS,CACP,CACEtC,GAAI,OACJL,MAAO,OACP8C,SAAU,MACVgF,OAAQ,SAAAlE,GAAG,OAAI0E,KAAO1E,GAAKkE,OAAO,gBAEpC,CACE9H,MAAO,SACP8C,SAAU,UAEZ,CACE9C,MAAO,MACP8C,SAAU,UAvCF,E,UAHuBtC,QAAtBiQ,GACZzQ,MAAQ,iBADIyQ,GAEZnR,OAAS,QCFH,ICDMyR,G,WACnB,WAAYhS,GAAS,IAAD,gCA+FpB0L,UA/FoB,sBA+FR,sBAAAtJ,EAAA,sDACV,EAAKe,QAAQ8O,iBAAiBrG,MAAO,EACrC,EAAKC,OAFK,2CA9FVhL,OAAOmL,OAAO1J,KAAMtC,GAEpB,IACMiM,EAAiB,CACrB,CACE3K,GAAI,mBACJ5B,KAAM6B,WAAS2K,MACfjL,MAAO,gBACPkL,IAAK,MAEP,CACE7K,GAAI,oBACJ5B,KAAM6B,WAAS2K,MACfjL,MAAO,eAET,CACEK,GAAI,uBACJ5B,KAAM6B,WAAS2K,MACfjL,MAAO,aAET,CACEK,GAAI,2BACJ5B,KAAM6B,WAAS2K,MACfjL,MAAO,qBAET,CACEK,GAAI,kBACJ5B,KAAM6B,WAASyI,MACfoC,MA1BU,GA2BVxI,QAAS,CACP,CACE3C,MAAO,UACP8C,SAAU,0BAEZ,CACE9C,MAAO,SACP8C,SAAU,UAEZ,CACE9C,MAAO,MACP8C,SAAU,QAGd7C,MAAO,KAIPoB,KAAKgH,QACPhH,KAAKP,SAAWkK,EAChB3J,KAAKuJ,KAAKvJ,KAAKkI,aAEflI,KAAKP,SAAW,CACd,CACErC,KAAM6B,WAASuI,OACf7I,MAAO,eACP8I,QAASzH,KAAKoJ,WAEhB,CACEpK,GAAI,mBACJ5B,KAAM6B,WAASiL,MACfnB,SAAU,KACVO,MAAM,EACN7J,SAAUkK,I,+EAKlB,WAAWzB,GAAX,uBAAApI,EAAA,sEACmCE,KAAKX,IAAI2E,MAAM9D,MAAM,CACpD8C,WAAY,CACV,CAAC,CAAEsM,MAAO,CAAEC,GAAI,MAAO/I,IAAK,oBAAuB,UACnD,CAAC,CAAE8I,MAAO,CAAEC,GAAI,MAAO/I,IAAK,iBAAoB,QAElDgJ,MAAO,CAAC,CAAEC,KAAM,2BAChB1H,MAAO,CAAC,CAAE0H,KAAM,4BAChBtP,MAAO,CAAE+H,cACT7H,OAAQ,EACRuP,KAAK,IAVT,uBACoBvI,EADpB,EACU/G,SAYRN,KAAKa,QAAQgP,gBAAgBjR,MAAQyI,EAbvC,SAeuCrH,KAAKX,IAAI2E,MAAM9D,MAAM,CACxDmP,WAAW,EACXrM,WAAY,CACV,CAAC,CAAEsM,MAAO,CAAEC,GAAI,QAAS/I,IAAK,SAAY,UAC1C,CAAC,CAAE8I,MAAO,CAAEC,GAAI,MAAO/I,IAAK,UAAa,QAE3CrG,MAAO,CAAE+H,gBArBb,gCAeU5H,SAfV,GAeqB8J,EAfrB,KAuBEpK,KAAKa,QAAQiP,kBAAkBnR,MAA/B,UAA0CqB,KAAKX,IAAI+H,EAAE,eAArD,aAAwEgD,EAAO9G,QAC/EtD,KAAKa,QAAQkP,qBAAqBpR,MAAlC,UAA6CqB,KAAKX,IAAI+H,EAAE,aAAxD,aAAyEgD,EAAOnH,KAChFjD,KAAKa,QAAQmP,yBAAyBrR,MAAtC,UAAiDqB,KAAKX,IAAI+H,EAAE,qBAA5D,aAAqFgD,EAAO9G,OAAS,GAAK8G,EAAOnH,IAAMmH,EAAO9G,QAAQ8I,QAAQ,GAAK,GAzBrJ,iD,8DCjEW6D,GAAc,CACzBC,UAHwB,IAIxBC,UAAW,UCLAC,GAAW,SAAAzI,GAAI,MAAK,CAC/BE,KAAMZ,KAAOU,GAAMT,QAAQ,OAAOT,SAClCqB,KAAMb,KAAOU,GAAMR,MAAM,OAAOV,WCDb4J,G,kDAEnB,WAAYjR,GAAO,IAAD,8BAChB,cAAMA,IAgGRkR,KAAO,WACL,EAAK3I,KAAOV,KAAO,EAAKU,MAAM4I,IAAI,EAAG,OACrC,EAAKpK,QAnGW,EAqGlBqK,KAAO,WACL,EAAK7I,KAAOV,KAAO,EAAKU,MAAM4I,KAAK,EAAG,OACtC,EAAKpK,QArGL,EAAKwB,KAAO,IAAIJ,KAChB,EAAK9H,SAAW,CACd,CACErC,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACErC,KAAM6B,WAASW,KACf0F,KAAM,EACN7F,SAAU,CACR,CACErC,KAAM6B,WAAS8M,MACf0E,KAAK,EACL3G,MAAO,CAAE4G,QAAS,QAClBjR,SAAU,CACR,CACErC,KAAM6B,WAAS2K,MACf5K,GAAI,QACJL,MAAOsI,KAAO,EAAKU,MAAMlB,OAAO,cAChCoD,IAAK,KACLC,MAAO,CAAE6G,YAAa,KAExB,CACEvT,KAAM6B,WAASuI,OACf7I,MAAO,OACP8I,QAAS,EAAK+I,MAEhB,CACEpT,KAAM6B,WAASuI,OACf7I,MAAO,OACP8I,QAAS,EAAK6I,QAIpB,CACEtR,GAAI,oBACJ5B,KAAM6B,WAAS2K,MACfjL,MAAO,GACPkL,IAAK,MAEP,CACE7K,GAAI,mBACJ5B,KAAM6B,WAASyI,MACfpG,QAAS,CACP,CACE3C,MAAO,UACP8C,SAAU,0BAEZ,CACE9C,MAAO,SACP8C,SAAU,UAEZ,CACE9C,MAAO,MACP8C,SAAU,QAGd7C,MAAO,SAOnB,EAAKuH,OAjEW,E,+EAmElB,sBAAArG,EAAA,sDACEE,KAAKa,QAAQlC,MAAMA,MAAQsI,KAAOjH,KAAK2H,MAAMlB,OAAO,cACpDzG,KAAK4Q,kBACL5Q,KAAK6Q,mBAHP,gD,0HAKA,gCAAA/Q,EAAA,sEACuCE,KAAKX,IAAI2E,MAAM9D,MAAM,CACxDmP,WAAW,EACXrM,WAAY,CACV,CAAC,CAAEsM,MAAO,CAAEC,GAAI,QAAS/I,IAAK,SAAY,UAC1C,CAAC,CAAE8I,MAAO,CAAEC,GAAI,MAAO/I,IAAK,UAAa,QAE3CrG,MAAO,CAAEwH,KAAMyI,GAASpQ,KAAK2H,SAPjC,gCACUrH,SADV,GACqB8J,EADrB,KASEpK,KAAKa,QAAQiQ,kBAAkBnS,MAA/B,UAA0CqB,KAAKX,IAAI+H,EAAE,gBAArD,aAAyEgD,EAAO9G,OAAhF,aAA2F8G,EAAOnH,KAAO,EAAzG,KATF,gD,2HAWA,8BAAAnD,EAAA,sEACmCE,KAAKX,IAAI2E,MAAM9D,MAAM,CACpD8C,WAAY,CACV,CAAC,CAAEsM,MAAO,CAAEC,GAAI,MAAO/I,IAAK,oBAAuB,UACnD,CAAC,CAAE8I,MAAO,CAAEC,GAAI,MAAO/I,IAAK,iBAAoB,QAElDgJ,MAAO,CAAC,CAAEC,KAAM,2BAChB1H,MAAO,CAAC,CAAE0H,KAAM,4BAChBtP,MAAO,CAAEwH,KAAMyI,GAASpQ,KAAK2H,OAC7BtH,OAAQ,EACRuP,KAAK,IAVT,gBACoBvI,EADpB,EACU/G,SAWRN,KAAKa,QAAQkQ,iBAAiBnS,MAAQyI,EAZxC,gD,2DArFqClI,QAAlBkR,GACZ1R,MAAQ,Y,ICFTyF,GAAYpH,GAAZoH,QAGF4M,G,kDAEJ,WAAYtT,GAAS,IAAD,8BAClB,cAAMA,IACD+B,SAASC,IAAI,WAAWkL,aAAc,EAFzB,E,UAFIjF,mBAAS,CAAEvB,YAAW,CAAEwB,YAAY,EAAMe,aAAa,KAA3EqK,GACG9H,KAAM,EAOA8H,UCZA,YAAAC,GAAQ,qEAErB,WAAY7R,GAAO,IAAD,8BAChB,cAAMA,IACD8R,aAAe,IAAIjF,GAAJ,iBAFJ,EAFG,UAA8BgF,GAA9B,EACd/H,KAAM,EADQ,GCGFiI,G,kDAGnB,WAAY/R,GAAO,IAAD,8BAChB,cAAMA,IA8DRyH,WA/DkB,sBA+DL,0CAAA/G,EAAA,+DACoB,EAAKiB,YAA5B+F,EADG,EACHA,UAAWC,EADR,EACQA,QACnB,EAAKlG,QAAQwG,KAAKzI,MAAQ,GAFf,SAImDiQ,QAAQC,IAAI,CACxE,EAAKzP,IAAImF,cAAcyD,QAAQ,CAC7BN,KAAMV,KAAOH,GAAWI,QAAQ,SAElC,EAAK7H,IAAImF,cAAc2F,SAAS,CAC9BhK,MAAO,CACLwH,KAAM,CACJqH,IAAK/H,KAAOH,GAAWI,QAAQ,OAC/BY,KAAMb,KAAOF,GAASI,MAAM,aAZzB,mCAIQc,EAJR,KAIF3H,SAAiC6J,EAJ/B,KAIqB7J,SAa1BA,EAAW0N,GAAW,CAAE/F,UAASkC,WAAUjN,OAAQ,CAAC,WAAYoH,UAAW,CAAC,UAAW2J,WAAY,EAAKpN,QAAQqO,QAAQtQ,QAC9H,EAAKiC,QAAQwG,KAAKzI,MAAQ0B,EAlBf,4CA7DX,EAAKb,SAAW,CACd,CACErC,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACET,GAAI,YACJ5B,KAAM6B,WAAS+F,KACfrG,MAAO,eACP2I,YAAY,EACZ1I,MAAOqI,OAASC,QAAQ,SAE1B,CACElI,GAAI,UACJ5B,KAAM6B,WAAS+F,KACfrG,MAAO,aACP2I,YAAY,EACZ1I,MAAOqI,OAASE,MAAM,SAExB,CACEnI,GAAI,UACJ5B,KAAM6B,WAASsJ,SACf5J,MAAO,wBAIb,CACEK,GAAI,aACJ5B,KAAM6B,WAASuI,OACf7I,MAAO,cACP8I,QAAS,EAAKZ,YAEhB,CACE7H,GAAI,OACJ5B,KAAM6B,WAASyI,MACfgH,aACApN,QAAS,CACP,CACE3C,MAAO,mBACP8C,SAAU,GACVgF,OAAQ,SAAAlE,GAAG,OAAKA,EAAI8H,UAAa9H,EAAIgK,SAAWhK,EAAIgK,QAAQ5N,OAAW,SAEzE,CACEA,MAAO,QACP8C,SAAU,SAEZ,CACE9C,MAAO,WACP8C,SAAU,YAEZ,CACE9C,MAAO,WACP8C,SAAU,YAEZ,CACE9C,MAAO,QACP8C,SAAU,YAzDF,E,UAH4BtC,QAA3BgS,GACZxS,MAAQ,eADIwS,GAEZlT,OAAS,Q,OCFGmT,G,kDAGnB,WAAYhS,GAAO,IAAD,8BAChB,cAAMA,IA8DRyH,WA/DkB,sBA+DL,0CAAA/G,EAAA,+DACoB,EAAKiB,YAA5B+F,EADG,EACHA,UAAWC,EADR,EACQA,QACnB,EAAKlG,QAAQwG,KAAKzI,MAAQ,GAFf,SAImDiQ,QAAQC,IAAI,CACxE,EAAKzP,IAAIgF,WAAW4D,QAAQ,CAC1BN,KAAMV,KAAOH,GAAWI,QAAQ,SAElC,EAAK7H,IAAIgF,WAAW8F,SAAS,CAC3BhK,MAAO,CACLwH,KAAM,CACJqH,IAAK/H,KAAOH,GAAWI,QAAQ,OAC/BY,KAAMb,KAAOF,GAASI,MAAM,aAZzB,mCAIQc,EAJR,KAIF3H,SAAiC6J,EAJ/B,KAIqB7J,SAa1BA,EAAW0N,GAAW,CAAE/F,UAASkC,WAAUjN,OAAQ,CAAC,UAAWoH,UAAW,CAAC,OAAQ2J,WAAY,EAAKpN,QAAQqO,QAAQtQ,QAC1H,EAAKiC,QAAQwG,KAAKzI,MAAQ0B,EAlBf,4CA7DX,EAAKb,SAAW,CACd,CACErC,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACET,GAAI,YACJ5B,KAAM6B,WAAS+F,KACfrG,MAAO,eACP2I,YAAY,EACZ1I,MAAOqI,OAASC,QAAQ,SAE1B,CACElI,GAAI,UACJ5B,KAAM6B,WAAS+F,KACfrG,MAAO,aACP2I,YAAY,EACZ1I,MAAOqI,OAASE,MAAM,SAExB,CACEnI,GAAI,UACJ5B,KAAM6B,WAASsJ,SACf5J,MAAO,wBAIb,CACEK,GAAI,aACJ5B,KAAM6B,WAASuI,OACf7I,MAAO,cACP8I,QAAS,EAAKZ,YAEhB,CACE7H,GAAI,OACJ5B,KAAM6B,WAASyI,MACfgH,aACApN,QAAS,CACP,CACE3C,MAAO,kBACP8C,SAAU,GACVgF,OAAQ,SAAAlE,GAAG,OAAKA,EAAI8H,UAAa9H,EAAIQ,QAAUR,EAAIQ,OAAOpE,OAAW,SAEvE,CACEA,MAAO,QACP8C,SAAU,SAEZ,CACE9C,MAAO,WACP8C,SAAU,YAEZ,CACE9C,MAAO,WACP8C,SAAU,YAEZ,CACE9C,MAAO,QACP8C,SAAU,YAzDF,E,UAHyBtC,QAAxBiS,GACZzS,MAAQ,eADIyS,GAEZnT,OAAS,Q,ICLGoT,G,WACnB,WAAYjS,GAAO,IAAD,gCA6ClBoK,SAAW,SAACpB,GACV,EAAK/I,IAAIiK,KAAT,UAAiBlB,EAAInK,OAArB,QAAmC,CAAEe,GAAIoJ,EAAIqB,WA7C7ClL,OAAOmL,OAAO1J,KAAMZ,GACpBY,KAAKP,SAAW,CACd,CACET,GAAI,UACJL,MAAO,eACPvB,KAAM6B,WAAS2K,MACfC,IAAK,MAEP,CACE7K,GAAI,SACJ5B,KAAM6B,WAAS2K,MACfjL,MAAO,SACPkL,IAAK,MAEP,CACE7K,GAAI,UACJ5B,KAAM6B,WAASyI,MACfpG,QAAS,CACP,CAAE3C,MAAO,WAAY8C,SAAU,YAC/B,CAAE9C,MAAO,WAAY8C,SAAU,YAC/B,CAAE9C,MAAO,WAAY8C,SAAU,aAEjC+H,SAAUxJ,KAAKwJ,WAGfxJ,KAAKsR,aACPtR,KAAKE,Q,gFAGT,gCAAAJ,EAAA,sEACmCE,KAAKX,IAAImF,cAAc2F,SAAS,CAC/DhK,MAAO,CAAEmR,YAAatR,KAAKsR,eAF/B,gBACoBjK,EADpB,EACU/G,SAGFiR,EAAOlK,EAAKhF,QAAO,SAACC,EAAKC,GAAN,OAAcD,EAAMC,EAAIe,SAAQ,GACzDtD,KAAKa,QAAQ2Q,OAAO7S,MAAQqB,KAAKX,IAAI+H,EAArC,qCAA+CmK,GAE/CvR,KAAKa,QAAQ4Q,QAAQ7S,MAAQyI,EAAK5I,KAAI,SAAAyD,GAAI,MAAK,CAC7CwP,SAAUxP,EAAKmI,SACf8D,SAAUjM,EAAKoB,OAAS,EAAIpB,EAAKoB,OAAS,GAC1C8K,SAAUlM,EAAKoB,OAAS,EAAI,EAAIpB,EAAKoB,OAAS,GAC9CmG,QAASvH,EAAKuH,QACdxL,OAAQiE,EAAKjE,WAZjB,gD,6DC5BI0T,GAAY,CAChBjB,QAAS,SACTC,YAJkB,EAKlBiB,SAAU,IAGNC,GAAY,CAChBnB,QAAS,SACTC,YAVkB,EAWlBiB,SAAU,GACVjD,WAAY,QAGRmD,GAAe,CACnBpB,QAAS,SACTC,YAjBkB,GAoBdoB,GAAY,CAChBrB,QAAS,SACTC,YAtBkB,EAuBlBqB,OAAQ,UACRC,eAAgB,aAGZC,GAAgB,CACpBxB,QAAS,SACTC,YA7BkB,EA8BlBqB,OAAQ,UACRC,eAAgB,gBAGZE,GAAU,SAACC,GAAD,mBAAC,eACZA,GADW,IAEdzK,KAAMyK,EAAIzK,KAAM,IAAIJ,KAAK6K,EAAIzK,MAAQ,KAGjC0K,GAAa,SAACC,GAAD,OAAY,SAACjL,GAC9B,IAAMkL,EAAU,CACdnV,KAAM6B,WAAS8M,MACf0E,KAAK,EACLhR,SAAU,CACR,CACErC,KAAM6B,WAAS2K,MACfE,MAAO6H,GACPhT,MAAO0I,EAAKM,KAAOV,KAAOI,EAAKM,MAAMlB,OAAO,oBAAsB,SAoCxE,OA/BIY,EAAKkG,UACPgF,EAAQ9S,SAASI,KAAK,CACpBzC,KAAM6B,WAAS2K,MACfE,MAAO+H,GACPlT,MAAQ0I,EAAK9D,MAAQ8D,EAAK9D,KAAK5E,OAAU,YAE3C4T,EAAQ9S,SAASI,KAAK,CACpBzC,KAAM6B,WAAS2K,MACfE,MAAOgI,GACPnT,MAAO0I,EAAKkG,gBAIErH,IAAdmB,EAAKmL,OACPD,EAAQ9S,SAASI,KAAK,CACpBzC,KAAM6B,WAAS2K,MACfjL,MAAO,MACPmL,MAAOgI,KAETS,EAAQ9S,SAASI,KAAK,CACpBzC,KAAM6B,WAAS2K,MACfE,MAAO+H,GACPlT,MAAM,GAAD,OAAM0I,EAAK9D,MAAQ8D,EAAK9D,KAAK5E,OAAU,UAAvC,OAEP4T,EAAQ9S,SAASI,KAAK,CACpBzC,KAAM6B,WAAS2K,MACfE,MAAOzC,EAAKmL,KAAON,GAAgBH,GACnCpT,MAAO0I,EAAK1I,MACZ8I,QAAS,kBAAM6K,EAAOG,SAASpL,EAAKpH,UAGjCsS,IAGM,YAAApT,GAAI,yDACjB,WAAYC,GAAO,IAAD,sBAChB,cAAMA,GAEDyS,GAAUa,QACbb,GAAUa,MAAQ,EAAKrT,IAAIE,YAAYoT,cAGzC,IAAMC,EAAoB,EAAKnT,SACzBd,EAAQiU,EAAkBC,IAAI,SAC9BC,EAAWF,EAAkBC,IAAI,QACjCE,EAASH,EAAkBC,IAAI,UAC/BG,EAAOJ,EAAkBC,IAAI,aAC7BI,EAAaL,EAAkBC,IAAI,cAZzB,OAahBD,EAAkBC,IAAI,WACtB,EAAKpT,SAAW,CACd,CACET,GAAI,WACJ5B,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACE6F,KAAM,EACNtG,GAAI,YACJ5B,KAAM6B,WAAS8M,MACftM,SAAS,CACP,CACErC,KAAM6B,WAASoG,KACf5F,SAAU,CAAC,2BACJd,GADG,IACI2G,KAAM,IAClB,CACElI,KAAM6B,WAAS2K,MACfjL,MAAO,KACP2G,KAAM,EACNwE,MAAO,CAAEqD,UAAW,KANd,2BAQH2F,GARG,IAQOxN,KAAM,OAXnB,mBAcHsN,GAdG,CAeN,CACExV,KAAM6B,WAASoG,KACf5F,SAAU,CAAC,2BAEJuT,GAFG,IAGN1N,KAAM,EACNlI,KAAM6B,WAASyC,OACfE,aAAa,IAEf,CACExE,KAAM6B,WAAS2K,MACfjL,MAAO,KACP2G,KAAM,EACNwE,MAAO,CAAEqD,UAAW,KAXd,2BAaH4F,GAbG,IAaKzN,KAAM,MAGvB2N,EACA,CACE7V,KAAM6B,WAASW,KACfZ,GAAI,cACJS,SAAU,OAIhB,CACE6F,KAAM,EACNtG,GAAI,aACJ5B,KAAM6B,WAAS8M,MACftM,SAAU,CACR,CACErC,KAAM6B,WAASuI,OACf7I,MAAO,WACP8I,QAAS,kBAAM,EAAKyL,YAEtB,CACElU,GAAI,cACJ5B,KAAM6B,WAASW,KACfH,SAAU,CACR,CACErC,KAAM6B,WAAS8M,MACf/M,GAAI,UACJS,SAAU,IAEZ,CACErC,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACET,GAAI,cACJL,MAAO,UACPvB,KAAM6B,WAASC,MACfoG,KAAM,EACN6N,WAAY,SAAC/T,GAAD,OAAU,EAAKgU,SAAShU,KAEtC,CACEhC,KAAM6B,WAASuI,OACf7I,MAAO,aACP8I,QAAS,kBAAM,EAAK4L,eACpB/N,KAAM,YAY1B,EAAK7F,SAASC,IAAI,UAAU6G,SAAW,SAAC3H,GAAD,OAAW,EAAKiK,aAAajK,IAEpE,EAAKwH,QAAQvG,KAAK,CAChBzC,KAAM6B,WAASuI,OACf7I,MAAO,YACP8I,QAAS,kBAAM,EAAK6L,cAlHN,EADD,sFAsHjB,4BAAAxT,EAAA,6DACQyN,EAAUvN,KAAKa,QAAQ0S,YAAY3U,MACzCoB,KAAKa,QAAQ0S,YAAY3U,MAAQ,GAFnC,SAGQoB,KAAKX,IAAI0F,YAAY8G,IAAI,CAAED,KAAM,CAAE2B,UAASiG,SAAUxT,KAAKC,QAHnE,OAIED,KAAKyT,cAJP,gDAtHiB,oHA4HjB,sBAAA3T,EAAA,sDACE,kEACKE,KAAKC,OACRD,KAAKa,QAAQ0C,KAAK3E,MAAQoB,KAAKX,IAAIkE,KACnCvD,KAAKa,QAAQkS,OAAOnU,MAAQoB,KAAKX,IAAIgO,KAAK0F,OAC1C/S,KAAK0T,YACL1T,KAAKgB,QAEPhB,KAAKyT,cARP,gDA5HiB,sHAsIjB,2CAAA3T,EAAA,yDACOE,KAAKC,KADZ,iEAOY4O,QAAQC,IAAI,CACpB9O,KAAKX,IAAI0F,YAAY7E,MAAM,CACzBC,MAAO,CACLqT,SAAUxT,KAAKC,QAGnBD,KAAKX,IAAI4F,KAAK/E,MAAM,CAClBC,MAAO,CACLqT,SAAUxT,KAAKC,UAfvB,mCAKgB0T,EALhB,KAKMrT,SACUsT,EANhB,KAMMtT,UAeEuT,EArBR,sBAsBOF,EAASlV,IAAI0T,KAtBpB,YAuBOyB,EAAMnV,IAAI0T,OAEP2B,MAAK,SAAChU,EAAGiU,GAAJ,OAAUA,EAAEpM,KAAO7H,EAAE6H,QAClC3H,KAAKa,QAAQgT,QAAQpU,SAAWoU,EAAQpV,IAAI4T,GAAW,CACrDI,SAAU,SAACxS,GAAD,OAAU,EAAKwS,SAASxS,OA3BtC,iDAtIiB,2EAoKjB,WACED,KAAKX,IAAIgO,KAAK2G,YAAc,CAC1B/T,KAAMD,KAAKC,KACXtB,MAAOqB,KAAKa,QAAQlC,MAAMC,OAE5BoB,KAAKX,IAAIgO,KAAK4G,cAAgBjU,KAAKa,QAAQkC,OAAOnE,MAClDoB,KAAKX,IAAIiK,KAAT,WAA0B,CAAEtK,GAAI,UA1KjB,sBA4KjB,SAASiB,GACPD,KAAKX,IAAIiK,KAAK,WAAY,CAAEtK,GAAIiB,MA7KjB,0BA+KjB,SAAarB,IACNoB,KAAKa,QAAQlC,MAAMC,OAASA,GAASA,EAAMqB,OAC9CD,KAAKa,QAAQlC,MAAMC,MAAQA,EAAMD,SAjLpB,yDAoLjB,sBAAAmB,EAAA,0IAEEE,KAAK0T,YAFP,gDApLiB,6EAwLjB,WACE,IAAMX,EAAS/S,KAAKa,QAAQkS,OAAOnU,MACnC,GAAKmU,GAAWA,EAAO9S,KAAvB,CACA,IAAMiU,EAAQlU,KAAKX,IAAI8U,QAAQpB,EAAO9S,MAAMiU,MAC5ClU,KAAKa,QAAQuT,UAAUzS,QAAUuS,EAAMzV,KAAI,SAACuU,EAAMjU,GAAP,MAAkB,CAAEJ,MAAOqU,EAAK7V,KAAMyB,MAAOG,MACxF,IAAMqV,EAAYpU,KAAKa,QAAQuT,UAAUxV,WACvBsH,IAAdkO,GAAyC,OAAdA,IAC7BpU,KAAKa,QAAQuT,UAAUxV,MAAQ,MA/LlB,sBAkMjB,SAASyV,GACW,UAAdA,EAAM3V,KACRsB,KAAKqT,gBApMQ,sBAuMjB,WACE,IAAMtQ,EAAS/C,KAAKa,QAAQkC,OAAOnE,MAC/BmE,GAAUA,EAAO9C,OACnBD,KAAKgB,OACLhB,KAAKX,IAAIiK,KAAK,aAAc,CAAEtK,GAAI+D,EAAO9C,YA3M5B,GAA2Bd,ICtF/B,YAAAA,GAAI,yDACjB,WAAYC,GAAO,IAAD,sBAChB,cAAMA,GAEN,IAAMkV,EAAS,CACblX,KAAM6B,WAASoG,KACf5F,SAAU,CAAC,2BAEJ,EAAKA,SAASoT,IAAI,UAFf,IAGNvN,KAAM,IAHA,2BAMH,EAAK7F,SAASoT,IAAI,SANf,IAONlU,MAAO,UACP2G,KAAM,IARA,2BAWH,EAAK7F,SAASoT,IAAI,SAXf,IAYNvN,KAAM,MAjBI,OAqBhB,EAAK7F,SAASuJ,QAAQsL,GACtB,EAAKlO,QAAQ7E,MAAK,SAAAW,GAAI,MAAgB,YAAZA,EAAKlD,MAAkByI,QAAU,kBAAM,EAAK8M,SACtE,EAAKnO,QAAQ7E,MAAK,SAAAW,GAAI,MAAgB,SAAZA,EAAKlD,MAAeyI,QAAU,kBAAM,EAAK+M,MAEnE,EAAK/U,SAASoT,IAAI,WAzBF,EADD,6CA4BjB,WACE,wDACE,kEAEG7S,KAAKC,OACRD,KAAKa,QAAQ4T,KAAK7V,MAAQoB,KAAKX,IAAIgO,KAAK2G,YACxChU,KAAKa,QAAQ0C,KAAK3E,MAAQoB,KAAKX,IAAIkE,KACnCvD,KAAKa,QAAQ8G,KAAK/I,MAAQqI,OAC1BjH,KAAKa,QAAQkC,OAAOnE,MAAQoB,KAAKX,IAAIgO,KAAK4G,iBApC7B,mBAuCjB,WACES,OAAOb,QAAQc,SAxCA,uDA0CjB,sBAAA7U,EAAA,sEACQE,KAAKgB,OADb,OAEEhB,KAAKuU,QAFP,gDA1CiB,2DAA2BpV,ICAjCyV,GAAe,CAC1BC,UAAW,CACTC,eAAgB,OAChBC,UAAW,UAEbC,gBAAiB,GACjBC,aAAc,CAAErD,SAAU,WAC1BpQ,OAAQ,GACR0T,eAAgB,CAAEC,WAAY,WAC9BjT,KAAM,CAAEiT,WAAY,WACpBC,aAAc,CAAED,WAAY,YAKf,YAAAhW,GAAI,yDACjB,WAAYC,GAAO,IAAD,uBAChB,cAAMA,IACDgH,aAAUF,EACf,IAAM6M,EAAS,EAAK1T,IAAIgO,KAAK0F,QAAU,EAAK1T,IAAI2N,SAASqI,cACzD,EAAKhW,IAAIgO,KAAK0F,OAASA,EACvB,IAAMuC,EAAY,2BACb/P,qBAAWvI,GAAW6H,KAAK3H,OAAOqE,MAAK,SAAAW,GAAI,MAAkB,WAAdA,EAAK/E,QAA1C,kBADG,IAEhByB,MAAOmU,EACPxM,SAAU,kBAAM,EAAKgP,kBAEjBC,OAAyCtP,IAA/B,EAAK7G,IAAIgO,KAAKoI,cAAoC,EAAKpW,IAAIgO,KAAKoI,aAC1EC,OAAmDxP,IAApC,EAAK7G,IAAIgO,KAAKsI,mBAAyC,EAAKtW,IAAIgO,KAAKsI,kBACpFC,EAAW,CACfxY,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACErC,KAAM6B,WAASuI,OACf7I,MAAO,WACP8I,QAAS,kBAAM,EAAKpI,IAAIiK,KAAK,WAAY,CAAEtK,GAAI,SAC/CsG,KAAM,GAERgQ,EAPQ,2BASH/P,qBAAWvI,GAAW6H,KAAK3H,OAAOqE,MAAK,SAAAW,GAAI,MAAkB,SAAdA,EAAK/E,QAA1C,kBATP,IAUNyB,MAAO,EAAKS,IAAIkE,KAChBgD,SAAU,kBAAM,EAAKsP,cACrBC,UAAW,EAAKzW,IAAI0W,MAAM,aAAc,SAE1C,CACE3Y,KAAM6B,WAAS2K,MACfjL,MAAO,OACPmL,MAAO,CACLsD,UAAW,QACXuB,WAAY,SACZxB,UAAW,IAEbtD,IAAK,IACLvE,KAAM,GAER,CACElI,KAAM6B,WAAS8M,MACf0E,KAAK,EACL3G,MAAO,CACLqD,UAAW,IAEb7H,KAAM,EACN7F,SAAU,CACR,CACErC,KAAM6B,WAASoH,OACfrH,GAAI,UACJJ,MAAO4W,EACP7W,MAAO,QACP4H,SAAU,kBAAM,EAAKyP,iBAI3B,CACE5Y,KAAM6B,WAASsJ,SACfvJ,GAAI,eACJJ,MAAO8W,EACPpQ,KAAM,EACN3G,MAAO,cACP4H,SAAU,kBAAM,EAAK0P,oBACrBnM,MAAO,CACLoM,WAAY,OAMdC,EAAO,EAAK1W,SAASoT,IAAI,QAC/BsD,EAAK7U,QAAQS,OAAOoU,EAAK7U,QAAQX,WAAU,SAAA6F,GAAG,MAAqB,YAAjBA,EAAI/E,YAAyB,GAC/E,IAAM2S,EAAY+B,EAAK7U,QAAQC,MAAK,SAAAiF,GAAG,MAAqB,cAAjBA,EAAI/E,YAC/C2S,EAAU3N,OAAS,SAAC1H,GAAD,OAAW,EAAKqX,WAAWrX,IAC9CqV,EAAUzV,MAAQ,OAClB,IAAMsU,EAAakD,EAAK7U,QAAQC,MAAK,SAAAiF,GAAG,MAAqB,eAAjBA,EAAI/E,YAChDwR,EAAWtU,MAAQ,SACnBsU,EAAWxM,OAAS,SAAClE,GAAD,OAASA,EAAM,SAAM,IACzC4T,EAAKE,OAASb,EACd,IAAMc,EAAQ,CACZD,QAASb,EACTxW,GAAI,QACJ5B,KAAM,SACNmZ,OAAQ3B,GACR4B,UAAW,SAACtU,GAAD,OAAU,EAAKuU,eAAevU,IACzCmF,KAAM,GACNqP,UAAW,SAAChZ,GAAD,OAAY,EAAKgZ,UAAUhZ,IACtCiZ,aAAc,cAEhB,EAAKlX,SAASI,KAAK+V,EAAUO,EAAMG,GACnC,IAAMM,EAAeT,EAAK7U,QAAQX,WAAU,SAAA6F,GAAG,MAAqB,SAAjBA,EAAI/E,YACvD,EAAKoV,WAAaV,EAAK7U,QAAQS,OAAO6U,EAAc,GAAG,GACvD,IAAME,EAAiBX,EAAK7U,QAAQX,WAAU,SAAA6F,GAAG,MAAqB,eAAjBA,EAAI/E,YA5FzC,OA6FhB,EAAKsV,aAAgBZ,EAAK7U,QAAQS,OAAO+U,EAAgB,GAAG,GAC5D,EAAKE,YAAW,GA9FA,EADD,gDAiGjB,WACEhX,KAAKX,IAAIgO,KAAK0F,OAAS/S,KAAKa,QAAQkS,OAAOnU,MAC3CoB,KAAKgX,aACLhX,KAAKmG,SApGU,wBAsGjB,WACEnG,KAAKgX,aACL,IAAM1V,EAAUtB,KAAKa,QAAQsV,KAAK7U,QAC5BsV,EAAetV,EAAQX,WAAU,SAAAuB,GAAI,MAAsB,SAAlBA,EAAKT,YAC/CzB,KAAKa,QAAQ0C,KAAK3E,OAKC,IAAlBgY,GACFtV,EAAQS,OAAO6U,EAAc,IALT,IAAlBA,GACFtV,EAAQzB,KAAKG,KAAK6W,YAOtB7W,KAAKa,QAAQsV,KAAK7U,QAAUA,EAC5BtB,KAAKmG,SApHU,wBAsHjB,SAAWxI,GACTqC,KAAKiG,QAAU,CACbgR,WAAYjX,KAAKX,IAAIgO,KAAK0F,QAAU/S,KAAKX,IAAIgO,KAAK0F,OAAO9S,MAE3D,IAAIsD,EAAOvD,KAAKX,IAAIkE,KAChB2T,OAAiDhR,IAApClG,KAAKX,IAAIgO,KAAKsI,mBAAkC3V,KAAKX,IAAIgO,KAAKsI,kBAC1EhY,IACH4F,EAAOvD,KAAKa,QAAQ0C,KAAK3E,MACzBsY,EAAalX,KAAKa,QAAQ6U,aAAa9W,OAErC2E,IACFvD,KAAKiG,QAAQkR,SAAW5T,EAAKtD,MAE3BiX,IACFlX,KAAKiG,QAAQgN,YAAa,KApIb,wBAuIjB,WACE,IAAMuC,EAAUxV,KAAKa,QAAQ2U,QAAQ5W,MACrCoB,KAAKa,QAAQsV,KAAKE,OAASb,EAC3BxV,KAAKa,QAAQyV,MAAMD,QAAUb,EAC7BxV,KAAKX,IAAIgO,KAAKoI,aAAeD,EACzBA,GACFxV,KAAKoX,aAAapX,KAAKa,QAAQsV,KAAKvX,SA7IvB,4BAgJjB,SAAesD,GACblC,KAAKX,IAAIiK,KAAK,WAAY,CAAEtK,GAAIkD,EAAKjC,SAjJtB,yDAmJjB,gCAAAH,EAAA,iJACQuH,EADR,gBAEqCrH,KAAKX,IAAIuF,WAAWlF,IAAI,CAAEO,KAAMD,KAAKX,IAAIgO,KAAK0F,OAAO9S,OAF1F,uBAEoB8S,EAFpB,EAEUzS,SACRN,KAAK+S,OAASA,EACd/S,KAAKa,QAAQsV,KAAKvX,MAAQyI,EACtBrH,KAAKa,QAAQ2U,QAAQ5W,OACvBoB,KAAKoX,aAAa/P,GANtB,kBAQSA,GART,iDAnJiB,uHA6JjB,WAAmBA,GAAnB,eAAAvH,EAAA,sDACEuH,EAAOA,EAAK5I,KAAI,SAAAyD,GAAI,kCAAUA,GAAV,IAAgBlD,GAAIkD,EAAKjC,UAGvCqB,EAAUtB,KAAK+S,OAAOmB,MAAMzV,KAAI,SAACuU,EAAMjU,GAAP,mBAAC,eAAsBiU,GAAvB,IAA6BrU,MAAOqU,EAAK7V,KAAM6B,GAAG,GAAD,OAnKlE,UAmKkE,OAAwBD,QAC/GsI,EAAK3G,SAAQ,SAAA+T,GACX,IAAIjT,EAASF,EAAQC,MAAK,SAACC,EAAQzC,GAAT,OAAmBA,IAAU0V,EAAKL,aACvD5S,IACHA,EAASF,EAAQ,IAEnB,IAAM+V,EAAQ7V,EAAO6V,OAAS,GAC9BA,EAAMxX,KAAK4U,GACXjT,EAAO6V,MAAQA,KAEjBrX,KAAKa,QAAQyV,MAAMjP,KAAO/F,EAd5B,gDA7JiB,qHA6KjB,WAAgB5D,GAAhB,eAAAoC,EAAA,yDACeE,KAAKa,QAAQyV,MAAMjP,KAC5B3J,EAAO4Z,YAAYC,cAAgB7Z,EAAO8Z,OAAOD,YAFvD,uBAIUE,GAAmB/Z,EAAO4Z,YAAYC,YAAYG,QAnLrC,SAmL+D,IAJtF,SAKU1X,KAAKX,IAAIwF,KAAKgH,IAAI,CAAE5L,KAAMvC,EAAOia,YAAa/L,KAAM,CAAEwI,UAAWqD,KAL3E,OAMIzX,KAAKmG,OANT,gDA7KiB,+EAsLjB,SAAWpH,GACT,OAAOiB,KAAK+S,QAAU/S,KAAK+S,OAAOmB,MAAMnV,GAAO5B,OAvLhC,8BAyLjB,WACE6C,KAAKgX,aACLhX,KAAKX,IAAIgO,KAAKsI,kBAAoB3V,KAAKa,QAAQ6U,aAAa9W,MAC5D,IAAM0C,EAAUtB,KAAKa,QAAQsV,KAAK7U,QAC5BwV,EAAiBxV,EAAQX,WAAU,SAAAuB,GAAI,MAAsB,eAAlBA,EAAKT,YACjDzB,KAAKa,QAAQ6U,aAAa9W,OAKL,IAApBkY,GACFxV,EAAQS,OAAO+U,EAAgB,IALT,IAApBA,GACFxV,EAAQzB,KAAKG,KAAK+W,cAOtB/W,KAAKa,QAAQsV,KAAK7U,QAAUA,EAC5BtB,KAAKmG,WAxMU,GAA4BhH,ICjBhC,YAAAA,GAAI,wMACjB,sBAAAW,EAAA,0IAEEE,KAAKX,IAAIuY,eAFX,gDADiB,2DAAiCzY,ICI9C0Y,GAAY,CAChB5F,eAAgB,gBAGH,YAAA9S,GAAI,yDACjB,WAAYC,GAAO,IAAD,uBAChB,cAAMA,IACDgH,aAAUF,EACf,IAAMsP,OAAyCtP,IAA/B,EAAK7G,IAAIgO,KAAKyK,cAAoC,EAAKzY,IAAIgO,KAAKyK,aAC1EC,OAA+C7R,IAAlC,EAAK7G,IAAIgO,KAAK2K,iBAAuC,EAAK3Y,IAAIgO,KAAK2K,gBAChFpC,EAAW,CACfxY,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACErC,KAAM6B,WAASuI,OACf7I,MAAO,WACP8I,QAAS,kBAAM,EAAKpI,IAAIiK,KAAK,WAAY,CAAEtK,GAAI,SAC/CsG,KAAM,GALA,2BAQHC,qBAAWvI,GAAWiI,KAAK/H,OAAOqE,MAAK,SAAAW,GAAI,MAAkB,SAAdA,EAAK/E,QAA1C,kBARP,IASNyB,MAAO,EAAKS,IAAIkE,KAChBgD,SAAU,kBAAM,EAAKsP,gBAEvB,CACEzY,KAAM6B,WAAS2K,MACfjL,MAAO,OACPmL,MAAO,CACLsD,UAAW,QACXuB,WAAY,SACZxB,UAAW,IAEbtD,IAAK,IACLvE,KAAM,GAER,CACElI,KAAM6B,WAASoH,OACfrH,GAAI,UACJJ,MAAO4W,EACP7W,MAAO,QACP2G,KAAM,EACNiB,SAAU,kBAAM,EAAKyP,eAEvB,CACE5Y,KAAM6B,WAASsJ,SACfvJ,GAAI,aACJJ,MAAOmZ,EACPzS,KAAM,EACN3G,MAAO,YACP4H,SAAU,kBAAM,EAAK0R,qBAKrB9B,EAAO,EAAK1W,SAASoT,IAAI,QAC/BsD,EAAKE,OAASb,EACdW,EAAK7U,QAAQS,OAAOoU,EAAK7U,QAAQX,WAAU,SAAA6F,GAAG,MAAqB,SAAjBA,EAAI/E,YAAsB,GAC5E0U,EAAK7U,QAAQS,OAAOoU,EAAK7U,QAAQX,WAAU,SAAA6F,GAAG,MAAqB,YAAjBA,EAAI/E,YAAyB,GAC5D0U,EAAK7U,QAAQC,MAAK,SAAAiF,GAAG,MAAqB,SAAjBA,EAAI/E,YACrCgF,OAAS,SAAClE,GAAD,OAAS0E,KAAO1E,GAAKkE,OAAO,gBAChD0P,EAAKzH,UAAY,SAACtG,EAAK5G,GACrB,GAAwB,UAApBA,EAAOC,UAAwB2G,EAAIoK,KACrC,MAAO,CACLP,eAAgB,iBAKtB,IAAMqE,EAAQ,CACZD,QAASb,EACTxW,GAAI,QACJ5B,KAAM,SACNmZ,OAAQ3B,GACR4B,UAAW,SAACtU,GAAD,OAAU,EAAKuU,eAAevU,IACzCmF,KAAM,GACNqP,UAAW,SAAChZ,GAAD,OAAY,EAAKgZ,UAAUhZ,IACtCiZ,aAAc,cAEhB,EAAKlX,SAASI,KAAK+V,EAAUO,EAAMG,GAEnC,EAAKU,YAAW,GAChB,IAAMJ,EAAeT,EAAK7U,QAAQX,WAAU,SAAA6F,GAAG,MAAqB,SAAjBA,EAAI/E,YA5EvC,OA6EhB,EAAKoV,WAAaV,EAAK7U,QAAQS,OAAO6U,EAAc,GAAG,GACvD,EAAKvX,IAAIgO,KAAK4G,mBAAgB/N,EAC9B,EAAK7G,IAAIgO,KAAK2G,iBAAc9N,EA/EZ,EADD,8CAkFjB,WACElG,KAAKgX,aACL,IAAM1V,EAAUtB,KAAKa,QAAQsV,KAAK7U,QAC5BsV,EAAetV,EAAQX,WAAU,SAAAuB,GAAI,MAAsB,SAAlBA,EAAKT,YAC/CzB,KAAKa,QAAQ0C,KAAK3E,OAKC,IAAlBgY,GACFtV,EAAQS,OAAO6U,EAAc,IALT,IAAlBA,GACFtV,EAAQzB,KAAKG,KAAK6W,YAOtB7W,KAAKa,QAAQsV,KAAK7U,QAAUA,EAC5BtB,KAAKmG,SAhGU,wBAkGjB,SAAWxI,GACTqC,KAAKiG,QAAU,GAEf,IAAI1C,EAAOvD,KAAKX,IAAIkE,KAChB2U,OAA6ChS,IAAlClG,KAAKX,IAAIgO,KAAK2K,iBAAuChY,KAAKX,IAAIgO,KAAK2K,gBAC7Era,IACH4F,EAAOvD,KAAKa,QAAQ0C,KAAK3E,MACzBsZ,EAAWlY,KAAKa,QAAQkX,WAAWnZ,OAEjC2E,IACFvD,KAAKiG,QAAQkR,SAAW5T,EAAKtD,MAE3BiY,IACFlY,KAAKiG,QAAQuM,MAAO,KA/GP,wBAmHjB,WACE,IAAMgD,EAAUxV,KAAKa,QAAQ2U,QAAQ5W,MACrCoB,KAAKa,QAAQsV,KAAKE,OAASb,EAC3BxV,KAAKa,QAAQyV,MAAMD,QAAUb,EAC7BxV,KAAKX,IAAIgO,KAAKyK,aAAetC,EACzBA,GACFxV,KAAKoX,aAAapX,KAAKa,QAAQsV,KAAKvX,SAzHvB,4BA4HjB,SAAesD,GACblC,KAAKX,IAAIiK,KAAK,WAAY,CAAEtK,GAAIkD,EAAKjC,SA7HtB,yDA+HjB,4BAAAH,EAAA,iJACQuH,EADR,OAEMrH,KAAKa,QAAQ2U,QAAQ5W,OACvBoB,KAAKoX,aAAa/P,GAHtB,kBAKSA,GALT,gDA/HiB,uHAsIjB,WAAmBA,GAAnB,eAAAvH,EAAA,sDACQwB,EAAU,CACd,CACE3C,MAAO,UACPK,GAAI,UACJqY,MAAO,GACPc,KAAMlR,OAASC,QAAQ,OAAOkR,SAASC,WAEzC,CACE1Z,MAAO,QACPK,GAAIiI,OAASR,OAAO,YACpB4Q,MAAO,GACPc,KAAMlR,OAASE,MAAM,OAAOiR,SAASC,WAEvC,CACE1Z,MAAO,WACPK,GAAIiI,OAASsJ,IAAI,EAAG,OAAO9J,OAAO,YAClC4Q,MAAO,GACPc,KAAMlR,OAASsJ,IAAI,EAAG,OAAOpJ,MAAM,OAAOiR,SAASC,WAErD,CACE1Z,MAAO,qBACPK,GAAIiI,OAASsJ,IAAI,EAAG,OAAO9J,OAAO,YAClC4Q,MAAO,GACPc,KAAMlR,OAASsJ,IAAI,EAAG,OAAOpJ,MAAM,OAAOiR,SAASC,WAErD,CACE1Z,MAAO,QACPK,GAAI,QACJqY,MAAO,KAGXhQ,EAAK3G,SAAQ,SAAC4X,GAGZ,IAFA,IAAMC,EAAYtR,KAAOqR,EAAK3Q,MAAMyQ,SAASC,UACzCG,EAAW,EACTA,EAAWlX,EAAQf,OAAS,KAC5BgY,EAAYjX,EAAQkX,GAAUL,MADCK,KAKjCA,IAAaA,EAASjY,QACxBiY,IAGFlX,EAAQkX,GAAUnB,MAAMxX,KAAxB,2BACKyY,GADL,IAEEtZ,GAAIsZ,EAAKrY,KACT6J,MAAOwO,EAAK9F,KAAOqF,QAAY3R,QAGnClG,KAAKa,QAAQyV,MAAMjP,KAAO/F,EAlD5B,gDAtIiB,qHA0LjB,WAAgB5D,GAAhB,mBAAAoC,EAAA,yDACeE,KAAKa,QAAQyV,MAAMjP,KAC1BiR,EAAOtY,KAAKa,QAAQsV,KAAKvX,MAAM2C,MAAK,SAAAW,GAAI,OAAIA,EAAKjC,OAASvC,EAAOia,eACnEja,EAAO4Z,YAAYC,cAAgB7Z,EAAO8Z,OAAOD,YAHvD,uBAIUkB,EAAa/a,EAAO4Z,YAAYC,YAGpC5P,EADiB,YAAf8Q,EACKxR,OAASyR,SAAS,EAAG,OAAON,SACX,UAAfK,EACFxR,OAASsJ,IAAI,EAAG,QAAQ6H,SAExBnR,KAAO,GAAD,OAAIwR,EAAJ,YAAkBxR,KAAOqR,EAAK3Q,MAAMlB,OAAO,UAAY,kBAX1E,SAaUzG,KAAKX,IAAI4F,KAAK4G,IAAI,CAAE5L,KAAMvC,EAAOia,YAAa/L,KAAM,CAAEjE,UAbhE,OAcI3H,KAAKmG,OAdT,gDA1LiB,mFA2MjB,WACEnG,KAAKX,IAAIgO,KAAK2K,gBAAkBhY,KAAKa,QAAQkX,WAAWnZ,MAExDoB,KAAKgX,aACLhX,KAAKmG,WA/MU,GAA2BhH,ICL/B,YAAAA,GAAI,qEAEjB,WAAYC,GAAO,IAAD,8BAChB,cAAMA,IACDuZ,aAAe,IAAI1M,GAAJ,iBACpB,EAAK7F,QAAQvG,KAAK,CAChBzC,KAAM6B,WAASuI,OACf7I,MAAO,QACP8I,QAAS,kBAAM,EAAKqF,WAElB,EAAKzN,IAAI0W,MAAM,QAAS,QAC1B,EAAK3P,QAAQvG,KAAK,CAChBzC,KAAM6B,WAASuI,OACf7I,MAAO,QACP8I,QAAS,kBAAM,EAAKM,WAZR,EAFD,6CAkBjB,WACE,wDACE,kEAEG/H,KAAKC,OACRD,KAAKa,QAAQkC,OAAOnE,MAAQoB,KAAKX,IAAIgO,KAAK4G,cAC1CjU,KAAKX,IAAIgO,KAAK4G,mBAAgB/N,KAxBjB,0DA2BjB,gCAAApG,EAAA,sEACQE,KAAKgB,OADb,uBAEkChB,KAAKX,IAAI4E,QAAQvE,IAAI,CAAEO,KAAMD,KAAKC,OAFpE,gBAEoBiJ,EAFpB,EAEU5I,SACF+G,EAHR,uCAIO6B,GAJP,IAKIvB,KAAMV,KAAOiC,EAAIvB,MAAMlB,OAAO,eAC3BzG,KAAKX,IAAI2N,UANhB,IAOIvJ,SAAUyF,EAAIzF,SAAShF,KAAI,SAAAyD,GAAI,kCAC1BA,GAD0B,IAE7BiK,MAAOjK,EAAKiK,MAAMC,QAAQ,GAC1BnJ,IAAKf,EAAKe,IAAImJ,QAAQ,QAExBhJ,MAAO8F,EAAI9F,MAAMgJ,QAAQ,KAE3BpM,KAAKX,IAAIyN,MAAM,CAAEG,SAAU,UAAW5F,SAdxC,gDA3BiB,yEA2CjB,WACEqN,OAAOb,QAAQc,SA5CA,0DA8CjB,sBAAA7U,EAAA,sEACQE,KAAKgB,OADb,OAEEhB,KAAKX,IAAIgO,KAAKC,mBAAqBtN,KAAKe,YACxCf,KAAKX,IAAIiK,KAAK,YAAa,IAH7B,gDA9CiB,2DAA8BnK,GAA9B,EACV+J,KAAM,EADI,G,6BCoDb0P,GAAY,SAACvR,EAAM3I,GACvB,IAAMqJ,EAAQV,EAAKhF,QAAO,SAACC,EAAKkE,GAC9B,IAAMqS,GAAYrS,EAAI6Q,OAAS,IAAIhV,QAAO,SAACyW,EAAU5W,EAAMnD,GAEzD,OADA+Z,EAAS5W,EAAKlD,IAAMD,EACb+Z,IACN,IAEH,OADAxW,EAAIkE,EAAIxH,IAAM6Z,EACPvW,IACN,IACHyW,aAAaC,QAAQta,EAAKua,KAAKC,UAAUnR,KC/D5B,IACboR,O,kDD2FA,WAAYC,GAAQ,IAAD,uBACjB,cAAMA,IAsBRC,WAAa,SAAC/X,GACZ,EAAKgY,SAAS,CAAEhY,aAtBhB,EAAKiY,MAAQ,CAAEjY,QAAS,EAAK8X,MAAM/R,MAAQ,IAC3C,IAAMmS,EAAU,aACd3E,UAAW,GACXG,gBAAiB,GACjBC,aAAc,GACdzT,OAAQ,GACR0T,eAAgB,GAChBhT,KAAM,GACNkT,aAAc,IACV,EAAKgE,MAAM7C,QAAU,IAXV,OAajB,EAAKA,OAAS,CACZ1B,UAAU,aAAGnE,QAAS,OAAQoE,eAAgB,SAAU2E,OAAQ,QAAWD,EAAW3E,WACtFG,gBAAgB,aAAGtE,QAAS,OAAQgJ,cAAe,SAAUC,WAAY,UAAaH,EAAWxE,iBACjGC,aAAa,eAAMuE,EAAWvE,cAC9BzT,OAAO,aAAG2T,WAAY,YAAayE,QAAS,EAAGlU,MAAO,IAAKmU,UAAW,KAAQL,EAAWhY,QACzF0T,eAAe,aAAGC,WAAY,YAAayE,QAAS,EAAGlU,MAAO,IAAKmU,UAAW,KAAQL,EAAWtE,gBACjGhT,KAAK,aAAG4X,WAAY,OAAQF,QAAS,GAAIG,OAAQ,YAAaF,UAAW,OAAQG,gBAAiB,UAAWtH,MAAO,SAAY8G,EAAWtX,MAC3IkT,aAAa,aAAG0E,WAAY,OAAQF,QAAS,GAAIG,OAAQ,YAAaF,UAAW,OAAQG,gBAAiB,UAAWtH,MAAO,SAAY8G,EAAWpE,eApBpI,E,6CA0BnB,SAAUlT,GACJlC,KAAKoZ,MAAM5C,WACbxW,KAAKoZ,MAAM5C,UAAUtU,K,uCAGzB,SAA0B+X,GACpBja,KAAKoZ,MAAM/R,OAAS4S,EAAU5S,QA1DjB,SAAC/F,EAAS5C,GAC7B,IAAIqJ,EACJ,IACEA,EAAQkR,KAAKiB,MAAMnB,aAAaoB,QAAQzb,IACxC,UAEGqJ,GAGLzG,EAAQZ,SAAQ,SAACc,GACf,IAAM4Y,EAAWrS,EAAMvG,EAAOxC,IAC1Bob,KACD5Y,EAAO6V,OAAS,IAAI3W,SAAQ,SAACwB,GAC5B,IAAMmY,EAAYD,EAASlY,EAAKlD,IAE9BkD,EAAK6F,WADW7B,IAAdmU,EACWA,EAEAC,OAAOC,qBAGvB/Y,EAAO6V,OAAS,IAAIvD,MAAK,SAAChU,EAAGiU,GAAJ,OAAWjU,EAAEiI,MAAQgM,EAAEhM,aAwCjDyS,CADgBP,EAAU5S,KAAKoT,QACTR,EAAUtD,cAChC3W,KAAKsZ,SAAS,CAAEhY,QAAS2Y,EAAU5S,U,oBAIvC,WAAU,IAAD,OACDgS,EAAarZ,KAAKqZ,WAClB/X,EAAUtB,KAAKuZ,MAAMjY,QACnB8F,EAAMpH,KAAKoZ,MAAXhS,EACR,OACE,0BAAK0C,MAAO9J,KAAKuW,OAAO1B,WAC5B,mBAAC,KAAD,CACE6B,UAAW,SAAA3W,GAAM,OArHH,SAACA,EAAQuB,EAAS+X,EAAYD,GAC9C,GAAKrZ,EAAOuX,YAAZ,CADwD,IAIpDoD,EAFIlD,EAAwBzX,EAAxByX,OAAQF,EAAgBvX,EAAhBuX,YAIhB,GAAIE,EAAOD,cAAgBD,EAAYC,YAAa,CAClD,IAAMoD,EAAerZ,EAAQC,MAAK,SAAAW,GAAI,OAAIA,EAAKlD,KAAOwY,EAAOD,eACvDqD,EAAatZ,EAAQC,MAAK,SAAAW,GAAI,OAAIA,EAAKlD,KAAOsY,EAAYC,eAC1DsD,EAAcF,EAAatD,OAAS,GACpCyD,EAAYF,EAAWvD,OAAS,GACtCsD,EAAatD,MAAQwD,EACrBD,EAAWvD,MAAQyD,EAN+B,MAOhCD,EAAY9Y,OAAOyV,EAAOzY,MAAO,GAA5Cgc,EAP2C,oBAQlDD,EAAU/Y,OAAOuV,EAAYvY,MAAO,EAAGgc,GAEvC1B,EADAqB,EAAapZ,EAAQmZ,SAEjBrB,EAAM1C,WACR0C,EAAM1C,UAAU3W,OAEb,CACL,IACMib,EADS1Z,EAAQC,MAAK,SAAAW,GAAI,OAAIA,EAAKlD,KAAOwY,EAAOD,eAC5BF,MAFtB,EAGa2D,EAAYjZ,OAAOyV,EAAOzY,MAAO,GAA5Cgc,EAHF,oBAILC,EAAYjZ,OAAOuV,EAAYvY,MAAO,EAAGgc,GAEzC1B,EADAqB,EAAapZ,EAAQmZ,SAGnBrB,EAAMzC,cACRiC,GAAU8B,EAAYtB,EAAMzC,eAwFPD,CAAU3W,EAAQuB,EAAS+X,EAAY,EAAKD,SAEhE9X,EAAQ7C,KAAI,SAAC+C,GACZ,OACE,0BACEsI,MAAO,EAAKyM,OAAOvB,gBACnBtW,IAAK8C,EAAOxC,IAEd,yBAAI8K,MAAO,EAAKyM,OAAOtB,cAAe7N,EAAE5F,EAAO7C,QAC/C,0BAAKmL,MAAO,CAAEiQ,OAAQ,IAC1B,mBAAC,KAAD,CAAWxC,YAAa/V,EAAOxC,GAAIN,IAAK8C,EAAOxC,KAC1C,SAACic,EAAUC,GACZ,OACE,0CACED,EAASE,eADX,CAEFC,IAAKH,EAASI,SACdvR,MAAOoR,EAASI,eAAiB,EAAK/E,OAAOrB,eAAiB,EAAKqB,OAAO/U,UAExEA,EAAO6V,OAAS,IAAI5Y,KAAI,SAACyD,EAAMnD,GAC/B,OACE,mBAAC,KAAD,CACFL,IAAKwD,EAAKlD,GACV2Y,YAAazV,EAAKlD,GAClBD,MAAOA,IAEJ,SAACkc,EAAUC,GACZ,OACE,wCACFE,IAAKH,EAASI,UACVJ,EAASM,eACTN,EAASO,gBAHX,CAIF1R,MAAK,uCACGoR,EAASO,WAAa,EAAKlF,OAAOnB,aAAc,EAAKmB,OAAOrU,MAC7D+Y,EAASM,eAAezR,OACvB5H,EAAK4H,OAAS,IAEpBrC,QAAS,kBAAM,EAAK+O,UAAUtU,MAE/BA,EAAKvD,aAOTsc,EAASS,2B,GA5FkBC,eE7FrB,IACb,CACEhU,KAAM,aACN1J,OAAQ,SACR2d,YAAa,qrBAEf,CACEjU,KAAM,aACN1J,OAAQ,UACR2d,YAAa,mmBAEf,CACEjU,KAAM,aACN1J,OAAQ,UACR2d,YAAa,6/BAEf,CACEjU,KAAM,aACN1J,OAAQ,QACR2d,YAAa,w2BAEf,CACEjU,KAAM,aACN1J,OAAQ,UACR2d,YAAa,oTAEf,CACEjU,KAAM,aACN1J,OAAQ,QACR2d,YAAa,+pBAEf,CACEjU,KAAM,aACN1J,OAAQ,UACR2d,YAAa,qXAEf,CACEjU,KAAM,aACN1J,OAAQ,QACR2d,YAAa,05BAEf,CACEjU,KAAM,aACN1J,OAAQ,UACR2d,YAAa,goBAEf,CACEjU,KAAM,aACN1J,OAAQ,SACR2d,YAAa,0VAEf,CACEjU,KAAM,aACN1J,OAAQ,YACR2d,YAAY,i5DAGd,CACEjU,KAAM,aACN1J,OAAQ,QACR2d,YAAa,4xBAEf,CACEjU,KAAM,aACN1J,OAAQ,UACR2d,YAAY,2qCAGd,CACEjU,KAAM,aACN1J,OAAQ,QACR2d,YAAa,sOAEf,CACEjU,KAAM,aACN1J,OAAQ,UACR2d,YAAa,knBAEf,CACEjU,KAAM,aACN1J,OAAQ,UACR2d,YAAa,w5BAEf,CACEjU,KAAM,aACN1J,OAAQ,QACR2d,YAAa,wcAEf,CACEjU,KAAM,aACN1J,OAAQ,SACR2d,YAAa,wMAEf,CACEjU,KAAM,aACN1J,OAAQ,UACR2d,YAAa,udAEf,CACEjU,KAAM,aACN1J,OAAQ,SACR2d,YAAa,mdAEf,CACEjU,KAAM,aACN1J,OAAQ,UACR2d,YAAa,2fAEf,CACEjU,KAAM,aACN1J,OAAQ,SACR2d,YAAa,gY,qBCvGXC,GAAY,kBAChB,0BAAKC,QAAQ,YAAYpW,MAAM,KAAK+T,OAAO,MACzC,2BAAMsC,KAAK,UAAUC,EAAE,4KAiJZ,IACbH,aACAI,SAAUJ,GACVK,iBA5JuB,kBACvB,0BAAKJ,QAAQ,YAAYpW,MAAM,KAAK+T,OAAO,MACzC,2BAAMsC,KAAK,UAAUC,EAAE,uNA2JzBG,SA3Ie,kBACf,0BAAKC,MAAM,6BAA6BC,QAAQ,MAAM3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACnF,2BAAMC,KAAK,UAAUC,EAAE,+VA0IzBM,YAtIkB,kBAClB,0BAAKF,MAAM,6BAA6BC,QAAQ,MAAM3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACnF,2BAAMC,KAAK,OAAOC,EAAE,uKAqItBO,WAhIiB,kBACjB,0BAAKH,MAAM,6BAA6BC,QAAQ,MAAM3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACnF,2BAAMC,KAAK,UAAUC,EAAE,iTA+HzBQ,sBApJ4B,kBAC5B,0BAAKJ,MAAM,6BAA6BC,QAAQ,MAAM3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACnF,2BAAMC,KAAK,UAAUC,EAAE,4YAmJzBS,mBA5HyB,kBACzB,0BAAKX,QAAQ,YAAYpW,MAAM,KAAK+T,OAAO,MACzC,2BAAMsC,KAAK,UAAUC,EAAE,kJA2HzBjW,SAvHe,kBACf,0BAAKsW,QAAQ,MAAMD,MAAM,6BAA6BM,EAAE,MAAMC,EAAE,MAAMjX,MAAM,OAAO+T,OAAO,OAAOqC,QAAQ,aACvG,wBAAG9c,GAAG,eACJ,2BAAM+c,KAAK,OAAOrW,MAAM,KAAK+T,OAAO,QAEtC,wBAAGza,GAAG,WACJ,2BAAM+c,KAAK,UAAUC,EAAE,waAkH3BY,YA1GkB,kBAClB,0BAAKP,QAAQ,MAAMD,MAAM,6BAA6BM,EAAE,MAAMC,EAAE,MAAMjX,MAAM,OAAO+T,OAAO,OAAOqC,QAAQ,aACvG,wBAAG9c,GAAG,eACJ,2BAAM+c,KAAK,OAAOrW,MAAM,KAAK+T,OAAO,QAEtC,wBAAGza,GAAG,SACJ,4BACE,2BAAM+c,KAAK,UAAUC,EAAE,wMACvB,2BAAMD,KAAK,UAAUC,EAAE,6PAmG7Ba,YA7EkB,kBAClB,0BAAKT,MAAM,6BAA6BC,QAAQ,MAAM3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACnF,2BAAMC,KAAK,UAAUC,EAAE,2LA4EzBc,YA9FkB,kBAClB,0BAAKT,QAAQ,MAAMD,MAAM,6BAA6BM,EAAE,MAAMC,EAAE,MAAMjX,MAAM,OAAO+T,OAAO,OAAOqC,QAAQ,aACvG,wBAAG9c,GAAG,eACJ,2BAAM+c,KAAK,OAAOrW,MAAM,KAAK+T,OAAO,QAEtC,wBAAGza,GAAG,SACJ,4BACE,2BAAM+c,KAAK,UAAUC,EAAE,uLACvB,2BAAMD,KAAK,UAAUC,EAAE,iIACvB,8BAASD,KAAK,UAAUgB,OAAO,0EAC/B,6BAAQhB,KAAK,UAAUiB,GAAG,OAAOC,GAAG,MAAMC,EAAE,YAqFlD9N,cAzEoB,kBACpB,0BAAKgN,MAAM,6BAA6BC,QAAQ,MAAM3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACnF,2BAAMC,KAAK,UAAUC,EAAE,+IAwEzB3L,UApEgB,kBAChB,0BAAK+L,MAAM,6BAA6BC,QAAQ,MAAM3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACnF,2BAAMC,KAAK,UAAUC,EAAE,iNAmEzBmB,YA/DkB,kBAClB,0BAAKf,MAAM,6BAA6BC,QAAQ,MAAM3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACnF,2BAAMC,KAAK,UAAUC,EAAE,qLA8DzBoB,cA1DoB,kBACpB,0BAAKhB,MAAM,6BAA6BC,QAAQ,MAAM3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACnF,2BAAMC,KAAK,UAAUC,EAAE,0JAyDzBqB,cArDoB,kBACpB,0BAAKjB,MAAM,6BAA6BC,QAAQ,MAAM3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACnF,2BAAMC,KAAK,UAAUC,EAAE,yJAoDzB7K,mBAhDyB,kBACzB,0BAAKiL,MAAM,6BAA6BC,QAAQ,MAAM3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACnF,2BAAMC,KAAK,UAAUC,EAAE,mLA+CzB5K,gBA3CsB,kBACtB,0BAAK1L,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aAClC,2BAAMC,KAAK,UAAUC,EAAE,+FA0CzBsB,SAtCe,kBACf,0BAAK5X,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aAClC,2BAAMC,KAAK,UAAUC,EAAE,iMAqCzBuB,SAjCe,kBACf,0BAAKlB,QAAQ,MAAO3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACjD,2BAAMC,KAAK,UAAUC,EAAE,qKAgCzBwB,YA5BkB,kBAClB,0BAAKnB,QAAQ,MAAO3W,MAAM,KAAK+T,OAAO,KAAKqC,QAAQ,aACjD,2BAAMC,KAAK,UAAUC,EAAE,+L,UC5GrBxe,GAAY,SAAAC,GAAM,qEAOtB,WAAYC,GAAS,IAAD,IC9CPyB,EnBOAwG,EFRAe,EoB+CO,4BAClB,cAAMhJ,IACD6B,YAAYke,WAAjB,2BAAmC,EAAKle,YAAYke,YAAeC,IAEnE,EAAKC,QAAUC,GAAIC,QAAU,OAE7B,EAAKxQ,KAAO,GAEZ,EAAKpL,KAAK+G,QACR,CACErK,MAAO,UACPmf,KAAMC,GAAM3O,cACZ4O,KAAM,CAAE/f,OAAQ,QAASggB,OAAQ,OACjCC,QAAS,CACP,CACE/b,KAAM,qBACNxD,MAAO,iBAET,CACEwD,KAAM,wBACNxD,MAAO,qBAET,CACEwD,KAAM,WACNxD,MAAO,aAET,CACEwD,KAAM,gBACNxD,MAAO,kBAET,CACEwD,KAAM,qBACNxD,MAAO,gBAET,CACEwD,KAAM,kBACNxD,MAAO,gBAMf,EAAKhB,KAAK,CAAEX,cAAYY,WAAW,IACnC,EAAKsD,MAAL,2BACK,EAAKA,OADV,IAEEkE,YACAW,YACA8V,UAAWA,GAAU,EAAK3a,MAAM2a,WAChCsC,UAAWA,GAAU,EAAKjd,MAAMid,WAChC3Q,eACA+O,YpBjGS7V,EoBiGmB,EAAKxF,MAAMqb,WpBjGtB,kDACrB,WAAYnd,GAAO,IAAD,8BAChB,cAAMA,IAcRyJ,aAAe,WACT,EAAKuV,eAAelT,aAAa,EAAKkT,eAC1C,EAAKA,cAAgBjT,WAAW,EAAKC,OAAQ,MAjB7B,EAmBlBA,OAAS,WACP,IAAMlL,EAAQ,EAAKW,QAAQkC,OAAOnE,MAClC,EAAKqH,QAAU,CACbwC,IAAK,CACH,CAAE9J,MAAO,CAAE+J,MAAM,IAAD,OAAMxI,EAAN,OAChB,CAAEyI,MAAO,CAAED,MAAM,IAAD,OAAMxI,EAAN,OAChB,CAAE0I,QAAS,CAAEF,MAAM,IAAD,OAAMxI,EAAN,SAGtB,EAAKiG,QA1BL,EAAK1G,SAASuJ,QAAQ,CACpB5L,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACET,GAAI,SACJL,MAAO,gCACPvB,KAAM6B,WAASC,MACfqH,SAAU,EAAKsC,aACfvD,KAAM,MAVI,EADG,UAA6BoB,IoBkG9C2X,YlB1FS1Y,EkB0FmB,EAAKzE,MAAMmd,WlB1FtB,kDACrB,WAAYjf,GAAO,IAAD,8BAChB,cAAMA,IAEDkf,WAAa,IAAInV,GAAW,CAC/B9J,IAAK,EAAKA,IACVwB,QAAS,EAAKA,QACdqH,WAAY9I,EAAK1B,OAAOsB,GACxBgI,QAAQ,IAGV,EAAKuX,YAAc,IAAI7O,GAAY,CACjCrQ,IAAK,EAAKA,IACVwB,QAAS,EAAKA,QACdqH,WAAY9I,EAAK1B,OAAOsB,GACxBgI,QAAQ,IAGV,EAAKvH,SAASI,KAAK,CACjBzC,KAAM6B,WAASoG,KACf5F,SAAU,CACR,CACErC,KAAM6B,WAAS8M,MACfzG,KAAM,EACN7F,SAAU,EAAK6e,WAAW7e,SAC1BgR,KAAK,EACL3G,MAAOmG,IAET,CACE7S,KAAM6B,WAAS8M,MACfzG,KAAM,EACN7F,SAAU,EAAK8e,YAAY9e,SAC3BgR,KAAK,EACL3G,MAAOmG,OAIb,EAAK7J,QAAQvG,KAAK,CAChBzC,KAAM6B,WAASuI,OACf7I,MAAO,UACP8I,QAAS,kBAAM,EAAK+W,aAvCN,EADG,yCA2CrB,WACE9J,OAAOb,QAAQc,SA5CI,4DA8CrB,sBAAA7U,EAAA,sEACQE,KAAKgB,OADb,OAEEhB,KAAKX,IAAIgO,KAAK4G,cAAgB,CAC5BhU,KAAMD,KAAKC,KACXtB,MAAOqB,KAAKa,QAAQlC,MAAMC,OAE5BoB,KAAKX,IAAIiK,KAAK,cAAe,IAN/B,gDA9CqB,2DAA6B3D,IkB2F9C8Y,aClGStf,EDkGqB,EAAK+B,MAAMud,YClG5B,kDACjB,WAAYrf,GAAO,IAAD,8BAChB,cAAMA,IAEDsf,YAAc,IAAIrN,GAAY,CACjChS,IAAK,EAAKA,IACViS,YAAalS,EAAK1B,OAAOsB,GACzB6B,QAAS,EAAKA,UAGhB,EAAKpB,SAAW,CACd,CACErC,KAAM6B,WAASoG,KACfrG,GAAI,SACJS,SAAU,CACR,CACErC,KAAM6B,WAAS8M,MACftM,SAAS,YACJ,EAAKA,UAEV6F,KAAM,IAER,CACEtG,GAAI,cACJ5B,KAAM6B,WAAS8M,MACfsK,QAAQ,EACR5W,SAAS,YACJ,EAAKif,YAAYjf,UAEtBgR,KAAK,EACL3G,MAAOmG,GACP3K,KAAM,MAKd,EAAK7F,SAASC,IAAI,mBAAmB6G,SAAW,kBAAM,EAAKoY,qBAnC3C,EADD,+EAsCjB,4BAAA7e,EAAA,iJACQC,EADR,OAEEC,KAAK2e,oBAFP,kBAGS5e,GAHT,gDAtCiB,qFA2CjB,WACE,IAAM6e,EAAW5e,KAAKa,QAAQge,gBAAgBjgB,MACxC0G,EAAOsZ,EAAW,EAAI,GAC5B5e,KAAKa,QAAQie,OAAOrf,SAAW,CAAC,2BACzBO,KAAKa,QAAQie,OAAOrf,SAAS,IADL,IACS6F,SACtCtF,KAAKa,QAAQie,OAAOrf,SAAS,IAE/BO,KAAKa,QAAQke,YAAY1I,QAAUuI,MAlDpB,GAA8Bzf,IDmG3C6f,SAAUA,GAAS,EAAK9d,MAAM8d,UAC9BC,SAAUA,GAAS,EAAK/d,MAAM+d,UAC9B1B,SAAUA,GAAS,EAAKrc,MAAMqc,UAC9B2B,eAAgBA,GAAe,EAAKhe,MAAMge,gBAC1C5B,SAAUA,GAAS,EAAKpc,MAAMoc,UAC9B6B,YAAaA,GAAY,EAAKje,MAAMie,aAEpC1C,sBACAD,yBACAL,YACA/M,iBACAiB,aACAW,eACAoO,YAAaC,GAAiB,EAAKne,MAAMke,aACzCjO,sBACAC,qBAGF,EAAKlQ,MAAM4b,YAAY5T,KAAM,EAC7B,EAAKhI,MAAM2b,YAAY3T,KAAM,EAC7B,EAAKhI,MAAM8P,YAAY9H,KAAM,EAC7B,EAAKhI,MAAMkc,cAAclU,KAAM,EAC/B,EAAKhI,MAAMoe,cAAcpW,KAAM,EAC/B,EAAKhI,MAAMic,YAAYjU,KAAM,EAC7B,EAAKhI,MAAMsc,YAAYtU,KAAM,EAE7B,EAAKqW,UAAW,GAChB,IAAKC,aAAY3f,KAAjB,oBAAyB4f,KAEzB,EAAKC,kBAAoB,CACvBC,cAAe,QAEjB,EAAKC,kBAAmB,EAExB,EAAKC,iBAAmB,SAACC,GACvB,MAAwB,WAApBA,EAAS7hB,SACW,cAApB6hB,EAAS7hB,OAA+B,EAAK8X,MAAM,QAAS,QAAU,EAAKA,MAAM,QAAS,QACvF,EAAKA,MAAM+J,EAAS7hB,OAAQ,SAarC,EAAKgE,KAAKvB,SAAQ,SAACwB,GACb6b,GAAM7b,EAAKC,QAEbD,EAAK4b,KAAOC,GAAM7b,EAAKC,OAErBD,EAAKgc,SACPhc,EAAKgc,QAAQxd,SAAQ,SAACqf,GAChBhC,GAAMgC,EAAM5d,QAEd4d,EAAMjC,KAAOC,GAAMgC,EAAM5d,aAMjC,EAAKF,KAAKvB,SAAQ,SAACsf,GACb,EAAK9e,MAAM8e,EAAS7d,OAAS,EAAKjB,MAAM8e,EAAS7d,MAAMlE,SAEzD+hB,EAAShC,KAAO,CACd/f,OAAQ,EAAKiD,MAAM8e,EAAS7d,MAAMlE,OAClCggB,OAAQ,QAGR+B,EAAS9B,SACX8B,EAAS9B,QAAQxd,SAAQ,SAACuf,GACpB,EAAK/e,MAAM+e,EAAY9d,OAAS,EAAKjB,MAAM+e,EAAY9d,MAAMlE,SAE/DgiB,EAAYjC,KAAO,CACjB/f,OAAQ,EAAKiD,MAAM+e,EAAY9d,MAAMlE,OACrCggB,OAAQ,cAMlB,EAAKiC,eAAiB/a,GAEtB,EAAKlD,KAAK+G,QACR,EAAKmX,eAAe,SACpB,EAAKA,eAAe,SACpB,EAAKA,eAAe,YAEtB,EAAKA,eAAe,4BACpB,EAAKA,eAAe,YACpB,EAAKA,eAAe,cACpB,EAAKA,eAAe,uBACpB,EAAKA,eAAe,SAEpB,EAAKre,wBAA0B,CAAC,OAAQ,OAAQ,UAGhD,EAAKse,YAAY,WAAY,SAC7B,EAAKC,WAAW,QAAS,YACzB,EAAKA,WAAW,QAAS,YACzB,EAAKD,YAAY,WAAY,YAC7B,EAAKC,WAAW,WAAY,eAC5B,EAAKA,WAAW,WAAY,eAC5B,EAAKA,WAAW,WAAY,YAC5B,EAAKD,YAAY,WAAY,WAAY,SACzC,EAAKC,WAAW,WAAY,gBAC5B,EAAKA,WAAW,WAAY,uBAC5B,EAAKA,WAAW,WAAY,YAC5B,EAAKA,WAAW,WAAY,UAC5B,EAAKA,WAAW,WAAY,mBAE5B,EAAKC,qBAAsB,EAC3B,EAAKnM,QAAU,GAEf,EAAKoM,eAAgB,EA3KH,EAPE,+CAoLtB,SAAYC,EAAaC,GAAgC,IAApBC,EAAmB,uDAAJ,GAC5Cxe,EAAOlC,KAAKiC,KAAKV,MAAK,SAAAof,GAAC,OAAIA,EAAEhiB,QAAU6hB,KAC7Cte,EAAKgc,QAAU,GACfhc,EAAKgc,QAAQre,KAAK,CAChBlB,MAAO+hB,GAAgBxe,EAAKvD,MAC5BwD,KAAMD,EAAKC,KACX2b,KAAM5b,EAAK4b,KACX8C,KAAM1e,EAAK0e,OAEb1e,EAAKvD,MAAQ8hB,SACNve,EAAKC,OA9LQ,wBAgMtB,SAAW0e,EAAaC,GACtB,IAAMC,EAAY/gB,KAAKiC,KAAKtB,WAAU,SAAAggB,GAAC,OAAIA,EAAEhiB,QAAUmiB,KACjD5C,EAAUle,KAAKiC,KAAKV,MAAK,SAAAof,GAAC,OAAIA,EAAEhiB,QAAUkiB,KAC3C7gB,KAAKiC,KAAK8e,GAAWjD,OACxB9d,KAAKiC,KAAK8e,GAAWjD,KAAOI,EAAQJ,MAEtCI,EAAQA,QAAQre,KAAKG,KAAKiC,KAAK8e,IAC/B/gB,KAAKiC,KAAKF,OAAOgf,EAAW,KAvMR,4BAyMtB,SAAeC,GACb,IAAMjiB,EAAQiB,KAAKiC,KAAKtB,WAAU,SAAAuB,GAAI,OAAIA,EAAKvD,QAAUqiB,KACzD,GAAIjiB,GAAS,EACX,OAAOiB,KAAKiC,KAAKF,OAAOhD,EAAO,GAAG,KA5MhB,kEA+MtB,sBAAAe,EAAA,kPAIQE,KAAK4X,eAJb,gDA/MsB,uHAqNtB,8BAAA9X,EAAA,sEACsCE,KAAK4E,WAAW1E,QADtD,mBACoBiU,EADpB,EACU7T,SADV,iDAGEN,KAAKmU,QAAUA,EAAQ9R,QAAO,SAACC,EAAKC,GAAN,mBAAC,eAAmBD,GAApB,kBAA0BC,EAAItC,KAAOsC,MAAO,IAH5E,gDArNsB,2DACtB1E,cAAIJ,EAAQwjB,UAASC,SAAQC,WAAUC,cAAaC,UAASC,YAAWC,EAAYC,IAD9D,EAEf7iB,MhCmaY,cgCraG,EAGf8iB,KAAO,OAHQ,EAIf9O,aAAe,UAJA,EAKf+O,KAAOA,KALQ,GA2NxBlkB,GAAUM,QhC2MiB,cgC1MZN,I,GAAAA,M,qBE7BAmkB,GAvOG,CAChBC,UAAW,CAAC,KAAM,MAClBC,GAAI,CACF,OAAU,QACV,MAAS,QAEXC,GAAG,2BACEC,KAAaD,IADhB,QAEA,UAAa,yDACb,KAAQ,4BACR,KAAQ,4BACR,MAAS,6CACT,KAAQ,wCACR,YAAa,yDACb,KAAQ,yDACR,YAAe,mDACf,UAAa,uCACb,WAAY,kFACZ,SAAY,yDACZ,OAAU,uCACV,MAAS,iCACT,QAAW,iCACX,SAAY,uCACZ,KAAQ,2BACR,OAAU,iCACV,QAAW,6CACX,OAAU,uCACV,MAAS,6CACT,MAAS,iCACT,OAAU,+DACV,MAAS,2BACT,IAAO,iCACP,gBAAiB,wFACjB,cAAe,2EACf,eAAgB,kFAChB,aAAc,4EACd,QAAW,iCACX,QAAW,qEACX,OAAU,uCACV,MAAS,yDACT,KAAQ,mDACR,SAAU,mDACV,eAAgB,6EAChB,sBAAuB,wHACvB,gCAAiC,wIACjC,gCAAiC,kIACjC,iBAAkB,gHAClB,OAAU,2EACV,uBAAwB,oIACxB,kBAAmB,8EACnB,UAAW,oDACX,YAAa,4EACb,aAAc,gDACd,YAAa,qGACb,SAAU,iBACV,aAAe,+DACf,SAAY,uCACZ,QAAW,uCACX,eAAkB,wFAClB,SAAY,gEACZ,QAAW,0DACX,gBAAiB,uHACjB,oBAAqB,+FACrB,oBAAqB,6KACrB,SAAY,6CACZ,QAAW,uCACX,gBAAiB,wFACjB,gBAAiB,uEACjB,cAAe,qGACf,SAAY,mDACZ,KAAQ,6CACR,YAAa,kFACb,mBAAoB,6GACpB,MAAS,2BACT,aAAgB,qEAChB,SAAY,+GACZ,wBAAyB,6EACzB,mBAAoB,0GACpB,YAAa,8CACb,sBAAuB,uHACvB,oBAAqB,4HACrB,mBAAoB,gHACpB,iCAAkC,sGAClC,eAAgB,sEAChB,MAAS,iCACT,OAAU,uCACV,IAAO,iCACP,SAAY,mDACZ,UAAa,mDACb,WAAY,uCACZ,mBAAoB,4EACpB,oBAAqB,8FACrB,YAAa,0DACb,aAAc,4EACd,QAAW,uCACX,mCAAoC,yKACpC,SAAY,mDACZ,gBAAiB,2GACjB,OAAU,6CACV,YAAa,oGACb,SAAY,yDACZ,MAAS,uCACT,MAAS,oDACT,SAAY,+DACZ,SAAY,+DACZ,QAAW,uCACX,eAAgB,4EAChB,SAAY,mDACZ,qBAAsB,wFACtB,iBAAkB,8FAClB,OAAU,6CACV,UAAa,iCACb,MAAS,6CACT,SAAY,uCACZ,YAAa,gEACb,YAAa,0DACb,YAAa,gEACb,gBAAiB,wFACjB,cAAe,oGACf,YAAa,sEACb,oBAAqB,gEACrB,QAAW,6CACX,wBAAyB,4DACzB,KAAQ,qBACR,kBAAmB,8FACnB,yBAA0B,2GAC1B,UAAa,sEACb,cAAe,2BACf,UAAa,0DACb,OAAU,uCACV,OAAU,+DACV,eAAgB,6EAChB,IAAO,mDACP,gBAAiB,sDACjB,cAAe,qFACf,yBAA0B,wGAC1B,IAAO,qBACP,OAAU,mDACV,SAAY,+DACZ,QAAW,mDACX,OAAU,qEACV,gBAAiB,4EACjB,0BAA2B,0IAC3B,MAAS,uCACT,QAAW,uCACX,cAAe,8CACf,aAAc,wCACd,SAAY,qEACZ,QAAW,qEACX,WAAc,+DACd,eAAgB,8FAChB,mBAAoB,oGACpB,eAAgB,oGAChB,qBAAsB,2JACtB,sCAAuC,wMACvC,iBAAkB,sEAClB,mBAAoB,mIACpB,qBAAsB,yDACtB,kBAAmB,4EACnB,QAAW,kFACX,SAAY,2EACZ,iBAAkB,gQAClB,YAAa,iFACb,kBAAmB,wFACnB,eAAgB,kFAChB,eAAgB,wFAChB,SAAU,+CACV,MAAS,uCACT,KAAQ,uCACR,MAAS,uCACT,KAAQ,kCACR,WAAY,iEACZ,SAAY,mDACZ,QAAW,6CACX,qBAAsB,gHACtB,sBAAuB,+CACvB,oBAAqB,2JACrB,cAAe,mDACf,cAAe,sEACf,mBAAoB,oGACpB,UAAa,6CACb,gBAAiB,8FACjB,qBAAsB,mIACtB,uBAAwB,uHACxB,MAAS,2BACT,OAAU,mDACV,SAAY,6HACZ,SAAY,mDACZ,QAAW,6CACX,QAAW,iCACX,OAAU,iCACV,MAAS,2BACT,KAAQ,qBACR,GAAM,eACN,GAAM,eACN,aAAc,uFACd,WAAY,wFACZ,UAAW,wCACX,IAAO,qBACP,WAAY,sEACZ,KAAQ,uCACR,MAAS,kCAnMT,uBAoMS,8CApMT,wBAqMU,8CArMV,eAsMA,eAAgB,uEAtMhB,eAuMA,cAAe,uEAvMf,eAwMA,iBAAkB,sGAxMlB,eAyMA,UAAW,gEAzMX,eA0MA,qBAAsB,sEA1MtB,eA2MA,QAAS,kCA3MT,eA4MA,kBAAmB,mFA5MnB,eA6MA,iBAAkB,6EA7MlB,eA8MA,YAAa,2GA9Mb,eA+MA,aAAc,sBA/Md,eAgNA,cAAe,mFAhNf,eAiNA,cAAe,yFAjNf,eAkNA,QAAS,kCAlNT,eAmNA,SAAU,8CAnNV,eAoNA,QAAS,8CApNT,eAqNA,cAAe,sBArNf,eAsNA,cAAe,sBAtNf,eAuNA,oBAAqB,mFAvNrB,eAwNA,oBAAqB,sBAxNrB,eAyNA,4BAA6B,sDAzN7B,eA0NA,uBAAwB,iEA1NxB,eA2NA,YAAa,qDA3Nb,eA4NA,WAAY,kCA5NZ,eA6NA,UAAW,4BA7NX,MCJJE,IAAa,CAAExkB,aAAWukB,oB","file":"static/js/main.d11dff7e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/oktopad.c808653c.svg\";","import Fields from 'katejs/lib/fields';\n\nconst Trigger = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'conditionEntity',\n      type: Fields.STRING,\n    },\n    {\n      name: 'condition',\n      type: Fields.STRING,\n    },\n    {\n      name: 'actionEntity',\n      type: Fields.STRING,\n    },\n    {\n      name: 'actionEntityUuid',\n      type: Fields.STRING,\n    }\n  ],\n  tables: [\n    {\n      name: 'actionEntityFields',\n      fields: [\n        {\n          name: 'field',\n          type: Fields.STRING,\n        },\n        {\n          name: 'value',\n          type: Fields.STRING,\n        }\n      ],\n    },\n  ],\n};\n\nexport const structures = {\n  Trigger,\n};\nexport const packageName = 'katejs-trigger';\n","import { use } from 'katejs/lib/client';\n\nimport { packageName, structures } from './structure';\n\nconst AppClient = parent => class Client extends use(parent) {\n  constructor(params) {\n    super(params);\n\n    this.init({ structures, addToMenu: true });\n  }\n};\nAppClient.package = packageName;\nexport default AppClient;\n","import Fields from 'katejs/lib/fields';\n\nconst ExtraFieldsList = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'entityName',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    {\n      name: 'fieldsList',\n      fields: [\n        {\n          name: 'name',\n          type: Fields.STRING,\n        },\n        {\n          name: 'type',\n          type: Fields.STRING,\n        },\n        {\n          name: 'values',\n          type: Fields.REFERENCE,\n          entity: 'ExtraFieldValuesList',\n        },\n        {\n          name: 'entityName',\n          type: Fields.STRING,\n        },\n      ],\n    },\n  ],\n};\n\nconst ExtraFieldValuesList = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    {\n      name: 'values',\n      fields: [\n        {\n          name: 'value',\n          type: Fields.STRING,\n        },\n      ],\n    }\n  ],\n};\n\nconst EntityFieldsValuesList = {\n  skipForForm: true,\n  fields: [\n    {\n      name: 'entityUuid',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    {\n      name: 'values',\n      fields: [\n        {\n          name: 'name',\n          type: Fields.STRING,\n        },\n        {\n          name: 'value',\n          type: Fields.STRING,\n        },\n        {\n          name: 'valueTitle',\n          type: Fields.STRING,\n        }\n      ],\n    }\n  ],\n};\n\nexport const FieldType = {\n  'Numeric': 'Numeric',\n  'String': 'String',\n  'Date': 'Date',\n  'Reference': 'Reference',\n  'Select': 'Select',\n};\n\nexport const FieldTypeOptions = Object.keys(FieldType).map(key => ({\n  title: key,\n  value: FieldType[key],\n}));\n\nexport const structures = {\n  ExtraFieldsList,\n  ExtraFieldValuesList,\n  EntityFieldsValuesList,\n};\nexport const packageName = 'katejs-fields';\n","import { Elements } from 'katejs/lib/client';\r\n\r\nconst EXTRA_FIELD = 'extraField';\r\n\r\nconst getExtraElement = (field, index) => {\r\n  const element = {\r\n    id: `${EXTRA_FIELD}${index}`,\r\n    title: field.name,\r\n    type: Elements.INPUT,\r\n  };\r\n  return element;\r\n};\r\n\r\nexport default Form => class FormWithExtraFields extends Form {\r\n  static extraFieldsApplied = true;\r\n  constructor(args) {\r\n    super(args);\r\n    if (this.app.fieldsLists && this.app.fieldsLists[this.constructor.entity]) {\r\n      const existingCard = this.elements.get('extraFields');\r\n      const extraElementsCard = existingCard || {\r\n        id: 'extraFields',\r\n        type: Elements.CARD,\r\n      };\r\n      extraElementsCard.elements = this.app.fieldsLists[this.constructor.entity].map(getExtraElement);\r\n      if (!existingCard) {\r\n        this.elements.push(extraElementsCard);\r\n      }\r\n    }\r\n  }\r\n  async load() {\r\n    const result = await super.load();\r\n    if (this.app.fieldsLists && this.app.fieldsLists[this.constructor.entity] && this.uuid) {\r\n      const { response } = await this.app.EntityFieldsValuesList.query({\r\n        where: { entityUuid: this.uuid },\r\n        limit: 1,\r\n      });\r\n      if (response && response.length) {\r\n        const [ { values: extraFieldsvalues } ] = response;\r\n        const fields = this.app.fieldsLists[this.constructor.entity];\r\n        extraFieldsvalues.forEach((field) => {\r\n          const index = fields.findIndex(f => f.name === field.name);\r\n          if (index > -1) {\r\n            this.content[`${EXTRA_FIELD}${index}`].value = field.value;\r\n          }\r\n        });\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n  async save() {\r\n    await super.save();\r\n    const formValues = this.getValues();\r\n    const fields = this.app.fieldsLists[this.constructor.entity];\r\n    if (fields) {\r\n      const values = fields.map((field, index) => ({\r\n        name: field.name,\r\n        value: formValues[`extraField${index}`],\r\n      }));\r\n      this.app.EntityFieldsValuesList.save({ uuid: this.uuid, values });\r\n    }\r\n  }\r\n}\r\n","import { use } from 'katejs/lib/client';\r\n\r\nimport { packageName, structures } from './structure';\r\n\r\nimport ExtraFieldsListItem from './forms/ExtraFieldsListItem';\r\nimport ExtraFieldsItemMixin from './forms/ExtraFieldsItemMixin';\r\n\r\nconst AppClient = parent => class Client extends use(parent) {\r\n  constructor(params) {\r\n    super(params);\r\n    this.init({ structures, addToMenu: true });\r\n    this.forms = {\r\n      ...this.forms,\r\n      ExtraFieldsListItem: ExtraFieldsListItem(this.forms.ExtraFieldsListItem),\r\n    };\r\n\r\n    this.entitiesWithExtraFields = [];\r\n    const extraFieldsList = this.menu.find(item => item.form === 'ExtraFieldsListList');\r\n    extraFieldsList.title = 'Extra fields  lists'; // двойной пробел для перевода только меню\r\n  }\r\n  async afterInit() {\r\n    if (super.afterInit) await super.afterInit();\r\n\r\n    if (!this.successAuth) {\r\n      await this.updateExtraFieldsLists();\r\n    }\r\n  }\r\n  async afterUserInit() {\r\n    if (super.afterUserInit()) await super.afterUserInit();\r\n    await this.updateExtraFieldsLists();\r\n  }\r\n  async updateExtraFieldsLists() {\r\n    const { response: fieldsLists } = await this.ExtraFieldsList.query();\r\n    if (!fieldsLists ) return;\r\n    this.fieldsLists = fieldsLists.reduce((acc, val) => {\r\n      acc[val.entityName] = acc[val.entityName] || [];\r\n      acc[val.entityName] = acc[val.entityName].concat(val.fieldsList);\r\n      return acc;\r\n    }, {});\r\n    Object.keys(this.forms).forEach((formName) => {\r\n      if (\r\n        formName.endsWith('Item')\r\n        && this.entitiesWithExtraFields.indexOf(this.forms[formName].entity) > -1\r\n        && !this.forms[formName].extraFieldsApplied\r\n      ) {\r\n        this.forms[formName] = ExtraFieldsItemMixin(this.forms[formName]);\r\n      }\r\n    });\r\n  }\r\n};\r\nAppClient.package = packageName;\r\nexport default AppClient;\r\n","import { Elements } from 'katejs/lib/client';\r\nimport { FieldTypeOptions } from '../structure';\r\n\r\nexport default Form => class ExtraFieldsItem extends Form {\r\n  constructor(args) {\r\n    super(args);\r\n    const fieldsTable = this.elements.get('fieldsList');\r\n    const fieldType = fieldsTable.columns.find(column => column.dataPath === 'type');\r\n    fieldType.type = Elements.SELECT;\r\n    fieldType.options = FieldTypeOptions;\r\n    fieldType.selectValue = true;\r\n    this.elements.set('entityName', {\r\n      ...this.elements.get('entityName'),\r\n      type: Elements.SELECT,\r\n      selectValue: true,\r\n      options: this.app.entitiesWithExtraFields.map(entity => ({\r\n        title: entity,\r\n        value: entity,\r\n      })),\r\n    });\r\n\r\n    // temporary disable extra\r\n    fieldsTable.columns.splice(2,3);\r\n  }\r\n  async save() {\r\n    await super.save();\r\n    this.app.updateExtraFieldsLists();\r\n  }\r\n}\r\n","import Fields from 'katejs/lib/fields';\n\nexport const fields = {\n  client: {\n    name: 'client',\n    type: Fields.REFERENCE,\n    entity: 'Client',\n    attributes: ['uuid', 'title', 'phone', 'address'],\n  },\n  sum: {\n    name: 'sum',\n    type: Fields.DECIMAL,\n    length: 10,\n    precision: 2,\n  },\n  total: {\n    name: 'total',\n    type: Fields.DECIMAL,\n    length: 10,\n    precision: 2,\n  },\n  contractor: {\n    name: 'contractor',\n    type: Fields.REFERENCE,\n    entity: 'Client',\n  },\n  amount: {\n    name: 'amount',\n    type: Fields.DECIMAL,\n    length: 10,\n    precision: 2,\n  },\n  user: {\n    name: 'user',\n    type: Fields.REFERENCE,\n    entity: 'User',\n  },\n  contact: {\n    name: 'contact',\n    type: Fields.REFERENCE,\n    entity: 'Contact',\n  },\n};\n\nexport const tables = {\n  products: {\n    name: 'products',\n    fields: [\n      {\n        name: 'product',\n        type: Fields.REFERENCE,\n        entity: 'Product',\n        attributes: ['uuid', 'title', 'accountBalances'],\n      },\n      fields.amount,\n      {\n        name: 'price',\n        type: Fields.DECIMAL,\n        length: 10,\n        precision: 2,\n      },\n      fields.sum,\n    ],\n  },\n};\n\nconst Note = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'noteDone',\n      type: Fields.BOOLEAN,\n    },\n    {\n      name: 'description',\n      type: Fields.TEXT,\n    },\n  ],\n  tables: [\n    {\n      name: 'checklist',\n      fields: [\n        {\n          name: 'done',\n          type: Fields.BOOLEAN,\n        },\n        {\n          name: 'description',\n          type: Fields.STRING,\n        },\n      ],\n    },\n  ],\n};\n\nconst Client = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'phone',\n      type: Fields.STRING,\n    },\n    {\n      name: 'address',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nconst Product = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'price',\n      type: Fields.DECIMAL,\n      length: 10,\n      precision: 2,\n    },\n    {\n      name: 'accountBalances',\n      type: Fields.BOOLEAN,\n      skipForList: true,\n    },\n  ],\n};\n\n\nconst Order = {\n  fields: [\n    fields.client,\n    {\n      name: 'phone',\n      type: Fields.STRING,\n    },\n    {\n      name: 'address',\n      type: Fields.STRING,\n    },\n    fields.total,\n    {\n      name: 'comment',\n      type: Fields.STRING,\n    },\n    {\n      name: 'cashbox',\n      type: Fields.REFERENCE,\n      entity: 'Cashbox',\n      skipForList: true,\n    },\n    {\n      ...fields.total,\n      name: 'payment',\n    },\n  ],\n  tables: [\n    tables.products,\n  ],\n};\n\n\nconst Invoice = {\n  fields: [\n    fields.client,\n    fields.total,\n    {\n      name: 'comment',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    tables.products,\n  ],\n};\n\nconst Cashbox = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nconst Payment = {\n  fields: [\n    {\n      name: 'cashbox',\n      type: Fields.REFERENCE,\n      entity: 'Cashbox',\n    },\n    fields.total,\n    {\n      name: 'comment',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    {\n      name: 'clientpayments',\n      fields: [\n        fields.client,\n        fields.sum,\n      ],\n    },\n  ],\n};\n\nconst Expense = {\n  fields: [\n    {\n      name: 'cashbox',\n      type: Fields.REFERENCE,\n      entity: 'Cashbox',\n    },\n    fields.contractor,\n    fields.total,\n    {\n      name: 'comment',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nconst DebtRecord = {\n  skipForForm: true,\n  fields: [\n    fields.client,\n  ],\n  resources: [\n    fields.sum,\n  ],\n};\n\nconst MoneyRecord = {\n  skipForForm: true,\n  fields: [\n    {\n      name: 'cashbox',\n      type: Fields.REFERENCE,\n      entity: 'Cashbox',\n    },\n  ],\n  resources: [\n    fields.sum,\n  ],\n};\n\nconst ProductRecord = {\n  skipForForm: true,\n  fields: [\n    {\n      name: 'product',\n      type: Fields.REFERENCE,\n      entity: 'Product',\n    },\n  ],\n  resources: [\n    fields.amount,\n  ],\n};\n\nconst PriceType = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nconst PriceList = {\n  fields: [\n    {\n      name: 'priceType',\n      type: Fields.REFERENCE,\n      entity: 'PriceType',\n    },\n  ],\n  tables: [\n    {\n      name: 'products',\n      fields: [\n        {\n          name: 'product',\n          type: Fields.REFERENCE,\n          entity: 'Product',\n        },\n        {\n          name: 'price',\n          type: Fields.DECIMAL,\n          length: 10,\n          precision: 2,\n        },\n      ],\n    },\n  ],\n};\n\nconst Receipt = {\n  fields: [\n    fields.contractor,\n    fields.total,\n    {\n      name: 'priceType',\n      type: Fields.REFERENCE,\n      entity: 'PriceType',\n    },\n  ],\n  tables: [\n    tables.products,\n  ],\n};\n\nconst SaleSchema = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    {\n      name: 'steps',\n      fields: [\n        {\n          name: 'name',\n          type: Fields.STRING,\n        },\n      ],\n    }\n  ]\n};\n\nconst Deal = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    fields.client,\n    fields.contact,\n    fields.user,\n    {\n      name: 'schema',\n      type: Fields.REFERENCE,\n      entity: 'SaleSchema',\n    },\n    {\n      name: 'stepIndex', // index from sale schema\n      type: Fields.INTEGER,\n    },\n    {\n      name: 'dealClosed',\n      type: Fields.BOOLEAN,\n    },\n  ],\n};\n\nconst DealComment = {\n  skipForForm: true,\n  fields: [\n    {\n      name: 'deal',\n      type: Fields.REFERENCE,\n      entity: 'Deal',\n    },\n    {\n      name: 'date',\n      type: Fields.DATE,\n    },\n    {\n      name: 'user',\n      type: Fields.REFERENCE,\n      entity: 'User',\n    },\n    {\n      name: 'comment',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nconst Task = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'date',\n      type: Fields.DATE,\n    },\n    {\n      name: 'done',\n      type: Fields.BOOLEAN,\n    },\n    fields.client,\n    fields.contact,\n    {\n      name: 'deal',\n      type: Fields.REFERENCE,\n      entity: 'Deal',\n    },\n    fields.user,\n  ],\n};\n\nconst Contact = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    fields.client,\n  ],\n};\n\nexport const Settings = {\n  fields: [\n    {\n      name: 'defaultSchema',\n      type: Fields.REFERENCE,\n      entity: 'SaleSchema',\n    },\n    {\n      name: 'companyName',\n      type: Fields.STRING,\n    },\n    {\n      name: 'companyInn',\n      type: Fields.STRING,\n    },\n    {\n      name: 'companyKpp',\n      type: Fields.STRING,\n    },\n    {\n      name: 'companyBankName',\n      type: Fields.STRING,\n    },\n    {\n        name: 'companyBankCode',\n      type: Fields.STRING,\n    },\n    {\n      name: 'companyBankCorrAccount',\n      type: Fields.STRING,\n    },\n    {\n      name: 'companyBankAccount',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nexport const title = 'Oktopad CRM';\nexport const packageName = 'oktopad-crm';\nexport const structures = {\n  DealComment,\n  Contact,\n  SaleSchema,\n  Deal,\n  Task,\n  ProductRecord,\n  MoneyRecord,\n  DebtRecord,\n  Note,\n  Cashbox,\n  PriceType,\n  PriceList,\n  Product,\n  Receipt,\n  Expense,\n  Payment,\n  Client,\n  Invoice,\n  Order,\n};\n","import { Elements, getElement, getTableElement, ItemForm } from 'katejs/lib/client';\nimport { structures } from '../structure';\n\nconst { Note } = structures;\n\nclass NoteItem extends ItemForm({ Note }, { addActions: true }) {\n  constructor(params) {\n    super(params);\n\n    this.elements.push(\n      {\n        id: 'grid',\n        type: Elements.GRID,\n        elements: [\n          { cols: 8, ...getElement(Note.fields[0], this) }, // title\n          { cols: 4, ...getElement(Note.fields[1], this) }, // noteDone\n        ],\n      },\n      {\n        id: 'tabs',\n        type: Elements.TABS,\n        elements: [\n          {\n            title: 'Description',\n            elements: [\n              getElement(Note.fields[2], this),\n            ],\n          },\n          {\n            title: 'Checklist',\n            elements: [\n              getTableElement(Note.tables[0], this),\n            ],\n          },\n        ],\n      },\n    );\n\n    this.elements.get('checklist').columns[0].width = 50;\n  }\n}\n\nexport default NoteItem;\n","import { Elements, ListForm } from 'katejs/lib/client';\nimport { structures } from '../structure';\n\nconst doneFilter = { noteDone: false };\n\nconst { Note } = structures;\n\nclass NoteList extends ListForm({ Note }, { addActions: true, addElements: true }) {\n  static entity = 'Note'; // for menu filter\n  constructor(params) {\n    super(params);\n\n    this.actions.push({\n      type: Elements.SWITCH,\n      id: 'showAll',\n      title: 'Show all',\n      value: false,\n      panelStyle: true,\n      onChange: this.showAll,\n    });\n    this.filters = doneFilter;\n    this.elements.get('list').columns.find(col => col.dataPath === 'noteDone').format\n      = val => (val ? '✔' : '');\n  }\n  showAll = (val) => {\n    this.filters = val ? undefined : doneFilter;\n    this.load();\n  }\n}\n\nexport default NoteList;\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nexport default class OrderReport extends Form {\n  static title = 'Product sales';\n  static entity = 'Order';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        id: 'startDate',\n        type: Elements.DATE,\n        title: 'Period start',\n        timeFormat: false,\n        value: new Date(),\n      },\n      {\n        id: 'endDate',\n        type: Elements.DATE,\n        title: 'Period end',\n        timeFormat: false,\n        value: new Date(),\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        columns: [\n          {\n            title: 'Product',\n            dataPath: 'products.product.title',\n          },\n          {\n            title: 'Amount',\n            dataPath: 'amount',\n          },\n          {\n            title: 'Sum',\n            dataPath: 'sum',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const { startDate, endDate } = this.getValues();\n    const { response } = await this.app.Order.report({\n      startDate: moment(startDate).startOf('day'),\n      endDate: moment(endDate).endOf('day'),\n    });\n    const total = {\n      'products.product.title': this.app.t('Total'),\n      sum: response.reduce((acc, val) => acc + val.sum, 0),\n    };\n    response.push(total);\n    this.content.data.value = response;\n  }\n}\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nexport default class OrderReport extends Form {\n  static title = 'Orders to deliver';\n  static entity = 'Order';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        id: 'date',\n        type: Elements.DATE,\n        title: 'Date',\n        timeFormat: false,\n        value: new Date(),\n      },\n      {\n        id: 'showNegative',\n        type: Elements.CHECKBOX,\n        title: 'Show negative sum',\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        columns: [\n          {\n            title: 'Order',\n            dataPath: 'title',\n          },\n          {\n            title: 'Client',\n            dataPath: 'client.title',\n          },\n          {\n            title: 'Phone',\n            dataPath: 'phone',\n          },\n          {\n            title: 'Address',\n            dataPath: 'address',\n          },\n          {\n            title: 'Sum',\n            dataPath: 'total',\n          },\n          {\n            title: 'To pay',\n            dataPath: 'toPay',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const { date, showNegative } = this.getValues();\n    const { response } = await this.app.Order.query({\n      where: {\n        date: {\n          $gte: moment(date).startOf('day'),\n          $lte: moment(date).endOf('day'),\n        },\n      },\n      order: [['client', 'title']],\n      limit: -1,\n    });\n\n    const clients = response.reduce((acc, order) => {\n      if (order.client && acc.indexOf(order.client.uuid) === -1) {\n        acc.push(order.client.uuid);\n      }\n      return acc;\n    }, []);\n    const { response: debts } =\n      await this.app.DebtRecord.balance({ date: moment(date).endOf('day'), where: { clientUuid: clients } });\n    response.forEach((row) => {\n      const debt = debts.find(item => item.clientUuid === (row.client && row.client.uuid));\n      // eslint-disable-next-line no-param-reassign\n      row.toPay = (!debt || (!showNegative && debt.sum) < 0) ? 0 : debt.sum;\n    });\n\n    this.content.data.value = response;\n  }\n}\n","import { Elements } from 'katejs/lib/client';\n\nexport default Form => class OrderList1 extends Form {\n  static entity = 'Order'; // for menu filter\n  static doc = true;\n  constructor(params) {\n    super(params);\n    const list = this.elements.get('list');\n    list.columns.find(column => column.dataPath === 'comment').maxWidth = 400;\n    this.elements.unshift({\n      type: Elements.GRID,\n      elements: [\n        {\n          id: 'client',\n          title: 'Client (name, phone, address)',\n          type: Elements.SELECT,\n          getOptions: this.clientQuery,\n          onChange: this.clientChange,\n          value: this.app.ordersClientFilter,\n          cols: 4,\n        },\n      ],\n    });\n\n    this.filters = this.filters || { clientUuid: (this.app.ordersClientFilter && this.app.ordersClientFilter.uuid) || undefined };\n  }\n  clientQuery = async (query) => {\n    const { response } = await this.app.Client.query({\n      where: { $or: [\n        { title: { $like: `%${query}%` } },\n        { phone: { $like: `%${query}%` } },\n        { address: { $like: `%${query}%` } },\n      ] },\n    });\n    return (response || []).map(item => ({ ...item, title: `${item.title} (${item.phone || ''} ${item.address || ''})` }));\n  };\n\n  clientChange = (val) => {\n    this.filters.clientUuid = (val && val.uuid) || undefined;\n    this.app.ordersClientFilter = val;\n    this.load();\n  }\n}\n","import { Elements } from 'katejs/lib/client';\n\nexport default class ClientDebt {\n  constructor(params) {\n    Object.assign(this, params);\n\n    const style = {};\n    const reportElements = [\n      {\n        id: 'clientDebtTitle',\n        type: Elements.LABEL,\n        title: 'Clients debt ',\n        tag: 'h4',\n      },\n      {\n        id: 'clientDebtData',\n        type: Elements.TABLE,\n        style,\n        rowClick: this.rowClick,\n        columns: [\n          {\n            title: 'Document',\n            dataPath: 'docTitle',\n          },\n          {\n            title: 'Sale',\n            dataPath: '',\n            format: val => val.sale || (val.sum > 0 ? val.sum : ''),\n          },\n          {\n            title: 'Payment',\n            dataPath: '',\n            format: val => val.payment || (val.sum < 0 ? -val.sum : ''),\n          },\n        ],\n        value: [],\n      },\n    ];\n\n    if (this.report) {\n      this.elements = reportElements;\n      this.exec(this.clientUuid);\n    } else {\n      this.elements = [\n        {\n          type: Elements.BUTTON,\n          title: 'Client debt',\n          onClick: this.showModal,\n          fullWidth: true,\n        },\n        {\n          id: 'clientDebtModal',\n          type: Elements.MODAL,\n          maxWidth: 'md',\n          open: false,\n          elements: reportElements,\n        },\n      ];\n    }\n  }\n  async exec(clientUuid) {\n    const { response: data } = await this.app.DebtRecord.turnover({\n      where: { clientUuid: clientUuid || this.content.client.value.uuid },\n      order: ['date'],\n    });\n    const totals = data.reduce((acc, val) => {\n      acc[2] += val.sum;\n      acc[0] += val.sum > 0 ? val.sum : 0;\n      acc[1] += val.sum < 0 ? -val.sum : 0;\n      return acc;\n    }, [0, 0, 0]);\n    data.push({\n      docTitle: this.app.t('Total'),\n      sale: totals[0],\n      payment: totals[1],\n    });\n    this.content.clientDebtData.value = data;\n    this.content.clientDebtTitle.title = this.app.t`Clients debt ${this.report ? '' : this.content.client.value.title}: ${totals[2]}`;\n  }\n  showModal = async () => {\n    this.content.clientDebtModal.open = true;\n    this.exec();\n  }\n  rowClick = (row) => {\n    if (this.report) {\n      this.app.open(`${row.entity}Item`, { id: row.docUuid });\n    }\n  }\n}\n","import { Elements } from 'katejs/lib/client';\nimport ClientDebt from './ClientDebt';\n\nconst addCondition = (where, field, value) => {\n  if (value) {\n    // eslint-disable-next-line no-param-reassign\n    where[field] = { $like: `%${value || ''}%` };\n  }\n};\n\nexport default class ClientSelection {\n  constructor({ form, replaceSelect, changePhoneAddress, openOnFocus }) {\n    this.elements = form.elements;\n    this.content = form.content;\n    this.app = form.app;\n\n    const clientInput = this.elements.get('client');\n    clientInput.openOnFocus = openOnFocus;\n    if (changePhoneAddress) {\n      clientInput.onChange = this.clientSelect;\n    }\n\n    if (replaceSelect) {\n      this.elements.set('client', {\n        id: 'clientGroup',\n        type: Elements.GRID,\n        elements: [\n          {\n            ...clientInput,\n            cols: 6,\n            getOptions: this.clientQuery,\n          },\n          {\n            type: Elements.BUTTON,\n            title: 'Find, create',\n            onClick: this.clientSelection,\n            fullWidth: true,\n            cols: 3,\n          },\n          {\n            type: Elements.GROUP,\n            elements: new ClientDebt({ content: this.content, app: this.app }).elements,\n            cols: 3,\n          },\n        ],\n      });\n    }\n    this.elements.push({\n      id: 'clientSelectionModal',\n      type: Elements.MODAL,\n      open: false,\n      title: 'Find, create client',\n      maxWidth: 'md',\n      elements: [\n        {\n          type: Elements.GRID,\n          elements: [\n            {\n              type: Elements.INPUT,\n              id: 'findTitle',\n              title: 'Title',\n              onChange: this.searchChange,\n              cols: 3,\n            },\n            {\n              type: Elements.INPUT,\n              id: 'findPhone',\n              title: 'Phone',\n              onChange: this.searchChange,\n              cols: 3,\n            },\n            {\n              type: Elements.INPUT,\n              id: 'findAddress',\n              title: 'Address',\n              onChange: this.searchChange,\n              cols: 3,\n            },\n            {\n              type: Elements.BUTTON,\n              title: 'Create',\n              onClick: this.create,\n              cols: 2,\n            },\n            {\n              type: Elements.LABEL,\n              cols: 2,\n            },\n          ],\n        },\n        {\n          id: 'clientSearch',\n          type: Elements.TABLE,\n          rowClick: this.selectClient,\n          columns: [\n            { title: 'Title', dataPath: 'title' },\n            { title: 'Phone', dataPath: 'phone' },\n            { title: 'Address', dataPath: 'address' },\n          ],\n        },\n      ],\n    });\n  }\n  clientSelect = (client) => {\n    if (client) {\n      this.content.address.value = client.address;\n      this.content.phone.value = client.phone;\n    }\n  }\n  clientSelection = () => {\n    this.content.clientSelectionModal.open = true;\n  }\n  searchChange = () => {\n    if (this.timeout) clearTimeout(this.timeout);\n    this.timeout = setTimeout(this.search, 300);\n  }\n  search = async () => {\n    const where = {};\n    addCondition(where, 'title', this.content.findTitle.value);\n    addCondition(where, 'phone', this.content.findPhone.value);\n    addCondition(where, 'address', this.content.findAddress.value);\n    const { response: clients } = await this.app.Client.query({ where, limit: 5 });\n    this.content.clientSearch.value = clients;\n  }\n  selectClient = (row) => {\n    this.content.client.value = row;\n    if (this.content.client.onChange) {\n      this.content.client.onChange(row);\n    }\n    this.content.clientSelectionModal.open = false;\n  }\n  fieldValid(field) {\n    if (!this.content[field].value) {\n      this.content[field].error = true;\n      return false;\n    }\n    this.content[field].error = false;\n    return true;\n  }\n  create = async () => {\n    if (!this.fieldValid('findTitle')) return;\n    if (!this.fieldValid('findPhone')) return;\n    if (!this.fieldValid('findAddress')) return;\n    const body = {\n      title: this.content.findTitle.value,\n      phone: this.content.findPhone.value,\n      address: this.content.findAddress.value,\n    };\n    await this.app.Client.put({ body });\n    this.search();\n  }\n  clientQuery = async (query) => {\n    const { response } = await this.app.Client.query({\n      where: {\n        $or: [\n          { title: { $like: `%${query || ''}%` } },\n          { phone: { $like: `%${query || ''}%` } },\n          { address: { $like: `%${query || ''}%` } },\n        ],\n      },\n    });\n    return (response || []).map(item => ({ ...item, title: `${item.title} (${item.phone || ''}${(item.phone && item.address) ? ',' : ''}${item.address || ''})` }));\n  }\n}\n","import { Elements } from 'katejs/lib/client';\n\nimport ClientSelection from './ClientSelection';\n\nimport { structures } from '../structure';\n\nexport class ProductsTable {\n  constructor(args) {\n    this.elements = args.elements;\n    this.content = args.content;\n    this.app = args.app;\n\n    this.elements.get('products').columns[1].onChange = this.productChange;\n    this.elements.get('products').columns[1].openOnFocus = true;\n    this.elements.get('products').columns[2].onChange = this.rowChange;\n    this.elements.get('products').columns[3].onChange = this.rowChange;\n  }\n  rowChange = (row) => {\n    // eslint-disable-next-line no-param-reassign\n    row.sum.value = (row.amount.value * row.price.value).toFixed(2);\n    this.sumChange();\n  }\n  productChange = async (row) => {\n    const { price, amount, product } = row;\n    if (!product.value) return;\n    const priceTypeContent = this.content.priceType;\n    const priceType = priceTypeContent && priceTypeContent.value;\n    const where = {\n      '$products.productUuid$': product.value.uuid,\n    };\n    // use selected price type, otherwise use pricelist without price type\n    where.priceTypeUuid = (priceType && priceType.uuid) || null;\n    const { response: prices } = await this.app.PriceList.query({\n      where,\n      order: [['date', 'DESC']],\n      limit: 1,\n    });\n    if (prices.length && prices[0].products.length) {\n      price.value = prices[0].products[0].price;\n    } else {\n      price.value = product.value.price;\n    }\n    if (!row.amount.value) {\n      amount.value = 1;\n    }\n    this.rowChange(row);\n  }\n  sumChange() {\n    const total = this.content.products.value\n      .reduce((acc, val) => (val.sum ? acc + (+val.sum) : acc), 0);\n    if (this.onSumChange) {\n      this.onSumChange(total.toFixed(2));\n    } else {\n      this.content.total.value = total.toFixed(2);\n    }\n  }\n}\n\nconst OrderItemMixin = Form => class OrderItem extends Form {\n  static doc = true;\n  constructor(params) {\n    super(params);\n    this.clientSelection = new ClientSelection({\n      form: this,\n      replaceSelect: true,\n      changePhoneAddress: true,\n      openOnFocus: true,\n    });\n    this.productsTable = new ProductsTable(this);\n    this.elements.set('phone', {\n      type: Elements.GRID,\n      elements: [\n        { ...this.elements.get('phone'), cols: 4 },\n        { ...this.elements.get('address'), cols: 8 },\n      ],\n    });\n    this.elements.splice(this.elements.findIndex(item => item.id === 'address'), 1);\n\n    this.elements.set('cashbox', {\n      type: Elements.GRID,\n      elements: [\n        {\n          type: Elements.LABEL,\n          title: 'Apply payment',\n          style: { marginTop: 28, textAlign: 'right' },\n          cols: 4,\n        },\n        {\n          ...this.elements.get('payment'),\n          cols: 4,\n        },\n        {\n          ...this.elements.get('cashbox'),\n          openOnFocus: true,\n          cols: 4,\n        },\n      ],\n    });\n    this.elements.splice(this.elements.findIndex(item => item.id === 'payment'), 1);\n\n    this.actions.push({\n      type: Elements.BUTTON,\n      title: 'Print',\n      onClick: this.print,\n    });\n  }\n  afterInit() {\n    if (super.afterInit) {\n      super.afterInit();\n    }\n    if (!this.uuid && this.app.vars.currentInvoiceData) {\n      const data = this.app.vars.currentInvoiceData;\n      this.content.client.value = data.client;\n      this.content.comment.value = data.comment;\n      this.content.products.value = data.products;\n      this.app.vars.currentInvoiceData = undefined;\n      this.productsTable.sumChange();\n    }\n  }\n  print = async () => {\n    const { response: doc } = await this.app.Order.get({ uuid: this.uuid });\n    const data = {\n      ...doc,\n      companyName: this.app.settings.companyName,\n    };\n    this.app.print({ template: 'Order', data });\n  }\n};\n\nexport default OrderItemMixin;\n\n// base print template\n// < !doctype html >\n//   <html lang=\"en\">\n//     <head>\n//       <!-- Required meta tags -->\n//     <meta charset=\"utf-8\">\n//         <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\n\n//           <!-- Bootstrap CSS -->\n//     <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\">\n\n//             <title>{{ Order }}</title>\n//             <style>\n//               html, body {\n//                 width: 210mm;\n//               height: 297mm;\n//             }\n// </style>\n//   </head>\n//           <body>\n//             <div class=\"container\">\n//               <h3>{{ title }}</h3>\n//               <p>Компания: {{ companyName }}</p>\n//               <p>Клиент: {{ client.title }}</p>\n//               <table class=\"table\">\n//                 <tr>\n//                   <td>Товар</td>\n//                   <td>Кол-во</td>\n//                   <td>Цена</td>\n//                   <td>Сумма</td>\n//                 </tr>\n//                 {{#each products}}\n//                 <tr>\n//                   <td>{{ product.title }}</td>\n//                   <td>{{ amount }}</td>\n//                   <td>{{ price }}</td>\n//                   <td>{{ sum }}</td>\n//                 </tr>\n//                 {{/ each}}\n//                 <tr>\n//                   <td colspan=\"3\">Итого</td>\n//                   <td>{{ total }}</td>\n//                 </tr>\n//               </table>\n\n//             </div>\n//           </body>\n// </html>\n","import { Elements, ItemForm } from 'katejs/lib/client';\nimport { structures } from '../structure';\n\nconst { Payment } = structures;\n\n\nclass PaymentItem extends ItemForm({ Payment }, { addActions: true, addElements: true }) {\n  static doc = true;\n  constructor(params) {\n    super(params);\n    this.elements.get('cashbox').openOnFocus = true;\n    this.elements.get('clientpaymentsCardActions').elements.push(\n      {\n        type: Elements.BUTTON,\n        title: 'Fill by debts',\n        onClick: this.fillByDebts,\n      },\n    );\n    const table = this.elements.get('clientpayments');\n    table.columns[2].onChange = this.sumChange;\n    table.onDelete = this.sumChange;\n    table.columns[1].getOptions = this.getOptionsClient;\n  }\n  fillByDebts = async () => {\n    // заполняем по остаткам расчетом на дату документа.\n    const { response: debts } = await this.app.DebtRecord.balance({\n      date: this.content.date.value,\n    });\n    const payments = debts.map(debt => ({\n      client: debt.client,\n      sum: (!debt || debt.sum < 0) ? 0 : debt.sum,\n    })).filter(item => item.sum);\n    this.content.clientpayments.value = payments;\n    this.sumChange();\n  }\n  sumChange = () => {\n    const total = this.content.clientpayments.value\n      .reduce((acc, val) => (val.sum ? acc + (+val.sum) : acc), 0);\n    this.content.total.value = total.toFixed(2);\n  }\n  getOptionsClient = async (query) => {\n    const { response } = await this.app.Client.query({\n      where: {\n        $or: [\n          { title: { $like: `%${query || ''}%` } },\n          { phone: { $like: `%${query || ''}%` } },\n          { address: { $like: `%${query || ''}%` } },\n        ],\n      },\n    });\n    return (response || []).map(item => ({ ...item, title: `${item.title} (${item.phone || ''} ${item.address || ''})` }));\n  }\n}\n\nexport default PaymentItem;\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nconst checkEqual = (val1, val2) => {\n  if (val1 === val2) return true;\n  if (val1 && val2) return val1.uuid === val2.uuid;\n  return false;\n};\n\nexport const joinRecord = ({ balance, turnover, fields, resources, noDetails }) => {\n  const data = [];\n  const totals = balance.map(item => ({\n    ...item,\n    records: [],\n    increase: 0,\n    decrease: 0,\n    start: item[resources[0]],\n    total: 0,\n  }));\n\n  turnover.forEach((record) => {\n    let total = totals.find(item => checkEqual(item[fields[0]], record[fields[0]]));\n    if (!total) {\n      total = {\n        [fields[0]]: record[fields[0]],\n        records: [],\n        increase: 0,\n        decrease: 0,\n        start: 0,\n        total: 0,\n      };\n      totals.push(total);\n    }\n    if (!noDetails) {\n      total.records.push(record);\n    }\n    const res = resources[0];\n    if (record[res] > 0) {\n      // eslint-disable-next-line no-param-reassign\n      record.increase = record[res];\n      total.increase += record[res];\n    }\n    if (record[res] < 0) {\n      // eslint-disable-next-line no-param-reassign\n      record.decrease = -record[res];\n      total.decrease -= record[res];\n    }\n  });\n  totals.forEach((total) => {\n    // eslint-disable-next-line no-param-reassign\n    total.total = (total.start + total.increase) - total.decrease;\n    data.push(total, ...total.records);\n  });\n\n  return data;\n};\n\nexport const cellStyle = (data) => {\n  if (data.docTitle) return {};\n  return { fontWeight: 'bold' };\n};\n\nexport default class Cashflow extends Form {\n  static title = 'Cash flow';\n  static entity = 'Cashbox';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        type: Elements.GRID,\n        elements: [\n          {\n            id: 'periodStart',\n            type: Elements.DATE,\n            title: 'Period start',\n            timeFormat: false,\n            value: moment().startOf('week'),\n          },\n          {\n            id: 'periodEnd',\n            type: Elements.DATE,\n            title: 'Period end',\n            timeFormat: false,\n            value: moment().endOf('week'),\n          },\n          {\n            id: 'details',\n            type: Elements.CHECKBOX,\n            title: 'Detail to document',\n          },\n        ]\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        cellStyle,\n        columns: [\n          {\n            id: 'cashbox',\n            title: 'Cashbox/Document',\n            dataPath: '',\n            format: val => (val.docTitle || (val.cashbox && val.cashbox.title)) || 'None',\n          },\n          {\n            title: 'Start',\n            dataPath: 'sum',\n          },\n          {\n            title: 'Increase',\n            dataPath: 'increase',\n          },\n          {\n            title: 'Decrease',\n            dataPath: 'decrease',\n          },\n          {\n            title: 'Total',\n            dataPath: 'total',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const response = [];\n    this.content.data.value = response;\n\n    const [{ response: balance }, { response: turnover }] = await Promise.all([\n      this.app.MoneyRecord.balance({\n        date: moment(this.content.periodStart.value).startOf('day'),\n      }),\n      this.app.MoneyRecord.turnover({\n        where: {\n          date: {\n            $gt: moment(this.content.periodStart.value).startOf('day'),\n            $lte: moment(this.content.periodEnd.value).endOf('day'),\n          },\n        },\n      }),\n    ]);\n    this.content.data.value = joinRecord({ balance, turnover, fields: ['cashbox'], resources: ['sum'], noDetails: !this.content.details.value });\n  }\n}\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nexport default class OrderDynamics extends Form {\n  static title = 'Order dynamics';\n  static entity = 'Order';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        id: 'periodStart',\n        type: Elements.DATE,\n        title: 'Period start',\n        timeFormat: false,\n        value: moment().startOf('week'),\n      },\n      {\n        id: 'periodEnd',\n        type: Elements.DATE,\n        title: 'Period end',\n        timeFormat: false,\n        value: moment().endOf('week'),\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        columns: [\n          {\n            id: 'date',\n            title: 'Date',\n            dataPath: 'day',\n            format: val => moment(val).format('DD.MM.YYYY'),\n          },\n          {\n            title: 'Amount',\n            dataPath: 'amount',\n          },\n          {\n            title: 'Sum',\n            dataPath: 'sum',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const where = {\n      date: {\n        $gt: moment(this.content.periodStart.value).startOf('day'),\n        $lte: moment(this.content.periodEnd.value).endOf('day'),\n      },\n    };\n    const { response: data } = await this.app.Order.query({\n      noOptions: true,\n      attributes: [\n        [{ $func: { fn: 'DATE', col: 'date' } }, 'day'],\n        [{ $func: { fn: 'COUNT', col: 'uuid' } }, 'amount'],\n        [{ $func: { fn: 'SUM', col: 'total' } }, 'sum'],\n      ],\n      group: [{ $col: 'day' }],\n      order: [{ $col: 'day' }],\n      where,\n    });\n    this.content.data.value = data;\n  }\n}\n","import { Elements } from 'katejs/lib/client';\n\n\nexport default ListForm => class ClientList extends ListForm {\n  constructor(args) {\n    super(args);\n    this.elements.unshift({\n      type: Elements.GRID,\n      elements: [\n        {\n          id: 'client',\n          title: 'Search (name, phone, address)',\n          type: Elements.INPUT,\n          onChange: this.clientChange,\n          cols: 4,\n        },\n      ],\n    });\n  }\n  clientChange = () => {\n    if (this.changeTimeout) clearTimeout(this.changeTimeout);\n    this.changeTimeout = setTimeout(this.search, 400);\n  }\n  search = () => {\n    const query = this.content.client.value;\n    this.filters = {\n      $or: [\n        { title: { $like: `%${query}%` } },\n        { phone: { $like: `%${query}%` } },\n        { address: { $like: `%${query}%` } },\n      ],\n    };\n    this.load();\n  }\n};","import { Elements } from 'katejs/lib/client';\n\nexport default class ClientSales {\n  constructor(params) {\n    Object.assign(this, params);\n\n    const style = {};\n    const reportElements = [\n      {\n        id: 'clientSalesTitle',\n        type: Elements.LABEL,\n        title: 'Clients sales',\n        tag: 'h4',\n      },\n      {\n        id: 'clientSalesOrders',\n        type: Elements.LABEL,\n        title: 'Sales count',\n      },\n      {\n        id: 'clientSalesOrdersSum',\n        type: Elements.LABEL,\n        title: 'Sales sum',\n      },\n      {\n        id: 'clientSalesOrdersAverage',\n        type: Elements.LABEL,\n        title: 'Sales average sum',\n      },\n      {\n        id: 'clientSalesData',\n        type: Elements.TABLE,\n        style,\n        columns: [\n          {\n            title: 'Product',\n            dataPath: 'products.product.title',\n          },\n          {\n            title: 'Amount',\n            dataPath: 'amount',\n          },\n          {\n            title: 'Sum',\n            dataPath: 'sum',\n          },\n        ],\n        value: [],\n      },\n    ];\n\n    if (this.report) {\n      this.elements = reportElements;\n      this.exec(this.clientUuid);\n    } else {\n      this.elements = [\n        {\n          type: Elements.BUTTON,\n          title: 'Client sales',\n          onClick: this.showModal,\n        },\n        {\n          id: 'clientSalesModal',\n          type: Elements.MODAL,\n          maxWidth: 'md',\n          open: false,\n          elements: reportElements,\n        },\n      ];\n    }\n  }\n  async exec(clientUuid) {\n    const { response: data } = await this.app.Order.query({\n      attributes: [\n        [{ $func: { fn: 'SUM', col: 'products.amount' } }, 'amount'],\n        [{ $func: { fn: 'SUM', col: 'products.sum' } }, 'sum'],\n      ],\n      group: [{ $col: 'products->product.uuid' }],\n      order: [{ $col: 'products->product.title' }],\n      where: { clientUuid },\n      limit: -1,\n      raw: true,\n    });\n\n    this.content.clientSalesData.value = data;\n\n    const { response: [totals] } = await this.app.Order.query({\n      noOptions: true,\n      attributes: [\n        [{ $func: { fn: 'COUNT', col: 'uuid' } }, 'amount'],\n        [{ $func: { fn: 'SUM', col: 'total' } }, 'sum'],\n      ],\n      where: { clientUuid },\n    });\n    this.content.clientSalesOrders.title = `${this.app.t('Sales count')}: ${totals.amount}`;\n    this.content.clientSalesOrdersSum.title = `${this.app.t('Sales sum')}: ${totals.sum}`;\n    this.content.clientSalesOrdersAverage.title = `${this.app.t('Sales average sum')}: ${totals.amount > 0 ? (totals.sum / totals.amount).toFixed(2) : 0}`;\n  }\n  showModal = async () => {\n    this.content.clientSalesModal.open = true;\n    this.exec();\n  }\n}\n","import { Elements } from 'katejs/lib/client';\nimport ClientDebt from './ClientDebt';\nimport ClientSales from './ClientSales';\n\nconst MAX_REPORT_HEIGHT = 500;\n\nexport const reportStyle = {\n  maxHeight: MAX_REPORT_HEIGHT,\n  overflowY: 'scroll',\n};\n\nexport default ItemForm => class ClientItem extends ItemForm {\n  constructor(args) {\n    super(args);\n\n    this.clientDebt = new ClientDebt({\n      app: this.app,\n      content: this.content,\n      clientUuid: args.params.id,\n      report: true,\n    });\n\n    this.clientSales = new ClientSales({\n      app: this.app,\n      content: this.content,\n      clientUuid: args.params.id,\n      report: true,\n    });\n\n    this.elements.push({\n      type: Elements.GRID,\n      elements: [\n        {\n          type: Elements.GROUP,\n          cols: 6,\n          elements: this.clientDebt.elements,\n          div: true,\n          style: reportStyle,\n        },\n        {\n          type: Elements.GROUP,\n          cols: 6,\n          elements: this.clientSales.elements,\n          div: true,\n          style: reportStyle,\n        },\n      ],\n    });\n    this.actions.push({\n      type: Elements.BUTTON,\n      title: 'Invoice',\n      onClick: () => this.invoice(),\n    });\n  }\n  close() {\n    window.history.back();\n  }\n  async invoice() {\n    await this.save();\n    this.app.vars.currentClient = {\n      uuid: this.uuid,\n      title: this.content.title.value,\n    };\n    this.app.open('InvoiceItem', {});\n  }\n};\n","import moment from 'moment';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const wholeDay = date => ({\n  $gte: moment(date).startOf('day').format(),\n  $lte: moment(date).endOf('day').format(),\n});\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\nimport { wholeDay } from '../utils';\n\nexport default class Dashboard extends Form {\n  static title = 'Dashboard';\n  constructor(args) {\n    super(args);\n    this.date = new Date();\n    this.elements = [\n      {\n        type: Elements.GRID,\n        elements: [\n          {\n            type: Elements.CARD,\n            cols: 6,\n            elements: [\n              {\n                type: Elements.GROUP,\n                div: true,\n                style: { display: 'flex' },\n                elements: [\n                  {\n                    type: Elements.LABEL,\n                    id: 'title',\n                    title: moment(this.date).format('DD.MM.YYYY'),\n                    tag: 'h3',\n                    style: { marginRight: 50 },\n                  },\n                  {\n                    type: Elements.BUTTON,\n                    title: 'Prev',\n                    onClick: this.prev,\n                  },\n                  {\n                    type: Elements.BUTTON,\n                    title: 'Next',\n                    onClick: this.next,\n                  },\n                ],\n              },\n              {\n                id: 'ordersTotalsLabel',\n                type: Elements.LABEL,\n                title: '',\n                tag: 'h5',\n              },\n              {\n                id: 'productSalesData',\n                type: Elements.TABLE,\n                columns: [\n                  {\n                    title: 'Product',\n                    dataPath: 'products.product.title',\n                  },\n                  {\n                    title: 'Amount',\n                    dataPath: 'amount',\n                  },\n                  {\n                    title: 'Sum',\n                    dataPath: 'sum',\n                  },\n                ],\n                value: [],\n              },\n            ],\n          },\n        ],\n      },\n    ];\n    this.load();\n  }\n  async load() {\n    this.content.title.title = moment(this.date).format('DD.MM.YYYY');\n    this.loadOrdersCount();\n    this.loadProductSales();\n  }\n  async loadOrdersCount() {\n    const { response: [totals] } = await this.app.Order.query({\n      noOptions: true,\n      attributes: [\n        [{ $func: { fn: 'COUNT', col: 'uuid' } }, 'amount'],\n        [{ $func: { fn: 'SUM', col: 'total' } }, 'sum'],\n      ],\n      where: { date: wholeDay(this.date) },\n    });\n    this.content.ordersTotalsLabel.title = `${this.app.t('Orders count')}: ${totals.amount} (${totals.sum || 0})`;\n  }\n  async loadProductSales() {\n    const { response: data } = await this.app.Order.query({\n      attributes: [\n        [{ $func: { fn: 'SUM', col: 'products.amount' } }, 'amount'],\n        [{ $func: { fn: 'SUM', col: 'products.sum' } }, 'sum'],\n      ],\n      group: [{ $col: 'products->product.uuid' }],\n      order: [{ $col: 'products->product.title' }],\n      where: { date: wholeDay(this.date) },\n      limit: -1,\n      raw: true,\n    });\n    this.content.productSalesData.value = data;\n  }\n  next = () => {\n    this.date = moment(this.date).add(1, 'day');\n    this.load();\n  }\n  prev = () => {\n    this.date = moment(this.date).add(-1, 'day');\n    this.load();\n  }\n}\n","import { ItemForm } from 'katejs/lib/client';\nimport { structures } from '../structure';\n\nconst { Expense } = structures;\n\n\nclass ExpenseItem extends ItemForm({ Expense }, { addActions: true, addElements: true }) {\n  static doc = true;\n  constructor(params) {\n    super(params);\n    this.elements.get('cashbox').openOnFocus = true;\n  }\n}\n\nexport default ExpenseItem;\n","import { ProductsTable } from './OrderItem';\n\nexport default Itemform => class ReceiptItem extends Itemform {\n  static doc = true;\n  constructor(args) {\n    super(args);\n    this.ProductTable = new ProductsTable(this);\n  }\n};\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nimport { joinRecord, cellStyle } from './CashFlow';\n\nexport default class ProductsFlowReport extends Form {\n  static title = 'Product flow';\n  static entity = 'Order';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        type: Elements.GRID,\n        elements: [\n          {\n            id: 'startDate',\n            type: Elements.DATE,\n            title: 'Period start',\n            timeFormat: false,\n            value: moment().startOf('week'),\n          },\n          {\n            id: 'endDate',\n            type: Elements.DATE,\n            title: 'Period end',\n            timeFormat: false,\n            value: moment().endOf('week'),\n          },\n          {\n            id: 'details',\n            type: Elements.CHECKBOX,\n            title: 'Detail to document',\n          },\n        ]\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        cellStyle,\n        columns: [\n          {\n            title: 'Product/Document',\n            dataPath: '',\n            format: val => (val.docTitle || (val.product && val.product.title)) || 'None',\n          },\n          {\n            title: 'Start',\n            dataPath: 'start',\n          },\n          {\n            title: 'Increase',\n            dataPath: 'increase',\n          },\n          {\n            title: 'Decrease',\n            dataPath: 'decrease',\n          },\n          {\n            title: 'Total',\n            dataPath: 'total',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const { startDate, endDate } = this.getValues();\n    this.content.data.value = [];\n\n    const [{ response: balance }, { response: turnover }] = await Promise.all([\n      this.app.ProductRecord.balance({\n        date: moment(startDate).startOf('day'),\n      }),\n      this.app.ProductRecord.turnover({\n        where: {\n          date: {\n            $gt: moment(startDate).startOf('day'),\n            $lte: moment(endDate).endOf('day'),\n          },\n        },\n      }),\n    ]);\n    const response = joinRecord({ balance, turnover, fields: ['product'], resources: ['amount'], noDetails: !this.content.details.value });\n    this.content.data.value = response;\n  }\n}\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nimport { joinRecord, cellStyle } from './CashFlow';\n\nexport default class DebtsFlowReport extends Form {\n  static title = 'Client debts';\n  static entity = 'Order';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        type: Elements.GRID,\n        elements: [\n          {\n            id: 'startDate',\n            type: Elements.DATE,\n            title: 'Period start',\n            timeFormat: false,\n            value: moment().startOf('week'),\n          },\n          {\n            id: 'endDate',\n            type: Elements.DATE,\n            title: 'Period end',\n            timeFormat: false,\n            value: moment().endOf('week'),\n          },\n          {\n            id: 'details',\n            type: Elements.CHECKBOX,\n            title: 'Detail to document',\n          },\n        ]\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        cellStyle,\n        columns: [\n          {\n            title: 'Client/Document',\n            dataPath: '',\n            format: val => (val.docTitle || (val.client && val.client.title)) || 'None',\n          },\n          {\n            title: 'Start',\n            dataPath: 'start',\n          },\n          {\n            title: 'Increase',\n            dataPath: 'increase',\n          },\n          {\n            title: 'Decrease',\n            dataPath: 'decrease',\n          },\n          {\n            title: 'Total',\n            dataPath: 'total',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const { startDate, endDate } = this.getValues();\n    this.content.data.value = [];\n\n    const [{ response: balance }, { response: turnover }] = await Promise.all([\n      this.app.DebtRecord.balance({\n        date: moment(startDate).startOf('day'),\n      }),\n      this.app.DebtRecord.turnover({\n        where: {\n          date: {\n            $gt: moment(startDate).startOf('day'),\n            $lte: moment(endDate).endOf('day'),\n          },\n        },\n      }),\n    ]);\n    const response = joinRecord({ balance, turnover, fields: ['client'], resources: ['sum'], noDetails: !this.content.details.value });\n    this.content.data.value = response;\n  }\n}\n","import { Elements } from 'katejs/lib/client';\n\nexport default class ProductCard {\n  constructor(args) {\n    Object.assign(this, args);\n    this.elements = [\n      {\n        id: 'pcTitle',\n        title: 'Product card',\n        type: Elements.LABEL,\n        tag: 'h3',\n      },\n      {\n        id: 'pcRest',\n        type: Elements.LABEL,\n        title: 'Rest: ',\n        tag: 'h5',\n      },\n      {\n        id: 'pcTable',\n        type: Elements.TABLE,\n        columns: [\n          { title: 'Document', dataPath: 'document' },\n          { title: 'Increase', dataPath: 'increase' },\n          { title: 'Decrease', dataPath: 'decrease' },\n        ],\n        rowClick: this.rowClick,\n      },\n    ];\n    if (this.productUuid) {\n      this.query();\n    }\n  }\n  async query() {\n    const { response: data } = await this.app.ProductRecord.turnover({\n      where: { productUuid: this.productUuid },\n    });\n    const rest = data.reduce((acc, val) => acc + val.amount, 0);\n    this.content.pcRest.title = this.app.t`Rest: ${rest}`;\n\n    this.content.pcTable.value = data.map(item => ({\n      document: item.docTitle,\n      increase: item.amount > 0 ? item.amount : '',\n      decrease: item.amount < 0 ? 0 - item.amount : '',\n      docUuid: item.docUuid,\n      entity: item.entity,\n    }));\n  }\n  rowClick = (row) => {\n    this.app.open(`${row.entity}Item`, { id: row.docUuid });\n  }\n}\n","import moment from 'moment';\r\nimport { Elements } from 'katejs/lib/client';\r\n\r\nconst TEXT_MARGIN = 6;\r\n\r\nconst dateStyle = {\r\n  display: 'inline',\r\n  marginRight: TEXT_MARGIN,\r\n  fontSize: 10,\r\n};\r\n\r\nconst userStyle = {\r\n  display: 'inline',\r\n  marginRight: TEXT_MARGIN,\r\n  fontSize: 10,\r\n  fontWeight: 'bold',\r\n};\r\n\r\nconst commentStyle = {\r\n  display: 'inline',\r\n  marginRight: TEXT_MARGIN,\r\n};\r\n\r\nconst taskStyle = {\r\n  display: 'inline',\r\n  marginRight: TEXT_MARGIN,\r\n  cursor: 'pointer',\r\n  textDecoration: 'underline',\r\n};\r\n\r\nconst taskDoneStyle = {\r\n  display: 'inline',\r\n  marginRight: TEXT_MARGIN,\r\n  cursor: 'pointer',\r\n  textDecoration: 'line-through',\r\n};\r\n\r\nconst mapDate = (obj) => ({\r\n  ...obj,\r\n  date: obj.date? new Date(obj.date) : 0,\r\n});\r\n\r\nconst mapHistory = (events) => (data) => {\r\n  const element = {\r\n    type: Elements.GROUP,\r\n    div: true,\r\n    elements: [\r\n      {\r\n        type: Elements.LABEL,\r\n        style: dateStyle,\r\n        title: data.date ? moment(data.date).format('DD.MM.YYYY HH:mm') : '---',\r\n      },\r\n    ],\r\n  };\r\n  // comment\r\n  if (data.comment) {\r\n    element.elements.push({\r\n      type: Elements.LABEL,\r\n      style: userStyle,\r\n      title: (data.user && data.user.title) || 'unknown',\r\n    });\r\n    element.elements.push({\r\n      type: Elements.LABEL,\r\n      style: commentStyle,\r\n      title: data.comment,\r\n    });\r\n  }\r\n  // task\r\n  if (data.done !== undefined) {\r\n    element.elements.push({\r\n      type: Elements.LABEL,\r\n      title: 'for',\r\n      style: commentStyle,\r\n    });\r\n    element.elements.push({\r\n      type: Elements.LABEL,\r\n      style: userStyle,\r\n      title: `${(data.user && data.user.title) || 'unknown'}:`,\r\n    });\r\n    element.elements.push({\r\n      type: Elements.LABEL,\r\n      style: data.done ? taskDoneStyle : taskStyle,\r\n      title: data.title,\r\n      onClick: () => events.openTask(data.uuid),\r\n    });\r\n  }\r\n  return element;\r\n};\r\n\r\nexport default Form => class DealItem extends Form {\r\n  constructor(args) {\r\n    super(args);\r\n\r\n    if (!userStyle.color) {\r\n      userStyle.color = this.app.constructor.primaryColor;\r\n    }\r\n\r\n    const generatedElements = this.elements;\r\n    const title = generatedElements.cut('title');\r\n    const salesman = generatedElements.cut('user');\r\n    const schema = generatedElements.cut('schema');\r\n    const step = generatedElements.cut('stepIndex');\r\n    const dealClosed = generatedElements.cut('dealClosed');\r\n    generatedElements.cut('contact'); // temp remove contact\r\n    this.elements = [\r\n      {\r\n        id: 'mainGrid',\r\n        type: Elements.GRID,\r\n        elements: [\r\n          {\r\n            cols: 6,\r\n            id: 'leftGroup',\r\n            type: Elements.GROUP,\r\n            elements: [\r\n              {\r\n                type: Elements.GRID,\r\n                elements: [\r\n                  { ...title, cols: 6 },\r\n                  {\r\n                    type: Elements.LABEL,\r\n                    title: 'by',\r\n                    cols: 1   ,\r\n                    style: { marginTop: 30 },\r\n                  },\r\n                  { ...salesman, cols: 5 },\r\n                ],\r\n              },\r\n              ...generatedElements,\r\n              {\r\n                type: Elements.GRID,\r\n                elements: [\r\n                  {\r\n                    ...step,\r\n                    cols: 6,\r\n                    type: Elements.SELECT,\r\n                    selectValue: true,\r\n                  },\r\n                  {\r\n                    type: Elements.LABEL,\r\n                    title: 'at',\r\n                    cols: 1   ,\r\n                    style: { marginTop: 30 },\r\n                  },\r\n                  { ...schema, cols: 5 },\r\n                ],\r\n              },\r\n              dealClosed,\r\n              {\r\n                type: Elements.CARD,\r\n                id: 'extraFields',\r\n                elements: [],\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            cols: 6,\r\n            id: 'rightGroup',\r\n            type: Elements.GROUP,\r\n            elements: [\r\n              {\r\n                type: Elements.BUTTON,\r\n                title: 'Add Task',\r\n                onClick: () => this.addTask(),\r\n              },\r\n              {\r\n                id: 'historyCard',\r\n                type: Elements.CARD,\r\n                elements: [\r\n                  {\r\n                    type: Elements.GROUP,\r\n                    id: 'history',\r\n                    elements: [],\r\n                  },\r\n                  {\r\n                    type: Elements.GRID,\r\n                    elements: [\r\n                      {\r\n                        id: 'commentText',\r\n                        title: 'Comment',\r\n                        type: Elements.INPUT,\r\n                        cols: 8,\r\n                        onKeyPress: (args) => this.keyPress(args),\r\n                      },\r\n                      {\r\n                        type: Elements.BUTTON,\r\n                        title: 'Do Comment',\r\n                        onClick: () => this.postComment(),\r\n                        cols: 4,\r\n                      },\r\n                    ],\r\n                  },\r\n                ],\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      }\r\n    ];\r\n\r\n    this.elements.get('client').onChange = (value) => this.clientChange(value);\r\n\r\n    this.actions.push({\r\n      type: Elements.BUTTON,\r\n      title: 'To Client',\r\n      onClick: () => this.toClient(),\r\n    });\r\n  }\r\n  async postComment() {\r\n    const comment = this.content.commentText.value;\r\n    this.content.commentText.value = '';\r\n    await this.app.DealComment.put({ body: { comment, dealUuid: this.uuid } });\r\n    this.fillHistory();\r\n  }\r\n  async afterInit() {\r\n    super.afterInit();\r\n    if (!this.uuid) {\r\n      this.content.user.value = this.app.user;\r\n      this.content.schema.value = this.app.vars.schema;\r\n      this.fillSteps();\r\n      this.save();\r\n    }\r\n    this.fillHistory();\r\n  }\r\n  async fillHistory() {\r\n    if (!this.uuid) {\r\n      return;\r\n    }\r\n    const [\r\n      { response: comments },\r\n      { response: tasks },\r\n    ] = await Promise.all([\r\n      this.app.DealComment.query({\r\n        where: {\r\n          dealUuid: this.uuid,\r\n        },\r\n      }),\r\n      this.app.Task.query({\r\n        where: {\r\n          dealUuid: this.uuid,\r\n        },\r\n      }),\r\n    ]);\r\n\r\n\r\n    const history = [\r\n      ...comments.map(mapDate),\r\n      ...tasks.map(mapDate),\r\n    ];\r\n    history.sort((a, b) => b.date - a.date);\r\n    this.content.history.elements = history.map(mapHistory({\r\n      openTask: (uuid) => this.openTask(uuid),\r\n    }));\r\n  }\r\n  addTask() {\r\n    this.app.vars.currentDeal = {\r\n      uuid: this.uuid,\r\n      title: this.content.title.value,\r\n    };\r\n    this.app.vars.currentClient = this.content.client.value;\r\n    this.app.open(`TaskItem`, { id: 'new' });\r\n  }\r\n  openTask(uuid) {\r\n    this.app.open('TaskItem', { id: uuid });\r\n  }\r\n  clientChange(value) {\r\n    if (!this.content.title.value && value && value.uuid) {\r\n      this.content.title.value = value.title;\r\n    }\r\n  }\r\n  async load() {\r\n    await super.load();\r\n    this.fillSteps();\r\n  }\r\n  fillSteps() {\r\n    const schema = this.content.schema.value;\r\n    if (!schema || !schema.uuid) return;\r\n    const steps = this.app.schemas[schema.uuid].steps;\r\n    this.content.stepIndex.options = steps.map((step, index) => ({ title: step.name, value: index }));\r\n    const stepIndex = this.content.stepIndex.value;\r\n    if (stepIndex === undefined || stepIndex === null) {\r\n      this.content.stepIndex.value = 0;\r\n    }\r\n  }\r\n  keyPress(event) {\r\n    if (event.key === \"Enter\") {\r\n      this.postComment();\r\n    }\r\n  }\r\n  toClient() {\r\n    const client = this.content.client.value;\r\n    if (client && client.uuid) {\r\n      this.save();\r\n      this.app.open('ClientItem', { id: client.uuid });\r\n    }\r\n  }\r\n}\r\n","import { Elements } from 'katejs/lib/client';\r\nimport moment from 'moment';\r\n\r\nexport default Form => class TaskItem extends Form {\r\n  constructor(args) {\r\n    super(args);\r\n\r\n    const topRow = {\r\n      type: Elements.GRID,\r\n      elements: [\r\n        {\r\n          ...this.elements.cut('title'),\r\n          cols: 7,\r\n        },\r\n        {\r\n          ...this.elements.cut('date'),\r\n          title: 'On date',\r\n          cols: 3,\r\n        },\r\n        {\r\n          ...this.elements.cut('done'),\r\n          cols: 2,\r\n        },\r\n      ],\r\n    };\r\n    this.elements.unshift(topRow);\r\n    this.actions.find(item => item.id === '__Close').onClick = () => this.close();\r\n    this.actions.find(item => item.id === '__OK').onClick = () => this.ok();\r\n\r\n    this.elements.cut('contact'); // temp remove contact\r\n  }\r\n  afterInit() {\r\n    if (super.afterInit) {\r\n      super.afterInit();\r\n    }\r\n    if (!this.uuid) {\r\n      this.content.deal.value = this.app.vars.currentDeal;\r\n      this.content.user.value = this.app.user;\r\n      this.content.date.value = moment();\r\n      this.content.client.value = this.app.vars.currentClient;\r\n    }\r\n  }\r\n  close() {\r\n    window.history.back();\r\n  }\r\n  async ok() {\r\n    await this.save();\r\n    this.close();\r\n  }\r\n}\r\n","import { Elements, getElement } from 'katejs/lib/client';\r\nimport { structures } from '../structure';\r\n\r\nexport const kanbanStyles = {\r\n  container: {\r\n    justifyContent: 'none',\r\n    overflowX: 'scroll',\r\n  },\r\n  columnContainer: {},\r\n  columnHeader: { fontSize: '1.25rem' },\r\n  column: {},\r\n  columnDragOver: { background: '#b1dede' },\r\n  item: { background: '#088596' },\r\n  itemDragging: { background: '#064C59'},\r\n};\r\n\r\nconst BOARD_COL_PREFIX = '$$col_';\r\n\r\nexport default Form => class DealList extends  Form {\r\n  constructor(args) {\r\n    super(args);\r\n    this.actions = undefined;\r\n    const schema = this.app.vars.schema || this.app.settings.defaultSchema;\r\n    this.app.vars.schema = schema;\r\n    const schemaFilter = {\r\n      ...getElement(structures.Deal.fields.find(item => item.name === 'schema'), this),\r\n      value: schema,\r\n      onChange: () => this.schemaChange(),\r\n    };\r\n    const isBoard = this.app.vars.isBoardDeals === undefined ? true : this.app.vars.isBoardDeals;\r\n    const isHideClosed = this.app.vars.isHideClosedDeals === undefined ? true : this.app.vars.isHideClosedDeals;\r\n    const topPanel = {\r\n      type: Elements.GRID,\r\n      elements: [\r\n        {\r\n          type: Elements.BUTTON,\r\n          title: 'New Deal',\r\n          onClick: () => this.app.open('DealItem', { id: 'new' }),\r\n          cols: 2,\r\n        },\r\n        schemaFilter,\r\n        {\r\n          ...getElement(structures.Deal.fields.find(item => item.name === 'user'), this),\r\n          value: this.app.user,\r\n          onChange: () => this.userChange(),\r\n          disabled: !this.app.allow('SaleSchema', 'put'),\r\n        },\r\n        {\r\n          type: Elements.LABEL,\r\n          title: 'List',\r\n          style: {\r\n            textAlign: 'right',\r\n            fontWeight: 'bolder',\r\n            marginTop: 22,\r\n          },\r\n          tag: 'p',\r\n          cols: 1,\r\n        },\r\n        {\r\n          type: Elements.GROUP,\r\n          div: true,\r\n          style: {\r\n            marginTop: 10,\r\n          },\r\n          cols: 1,\r\n          elements: [\r\n            {\r\n              type: Elements.SWITCH,\r\n              id: 'isBoard',\r\n              value: isBoard,\r\n              title: 'Board',\r\n              onChange: () => this.changeView(),\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          type: Elements.CHECKBOX,\r\n          id: 'isHideClosed',\r\n          value: isHideClosed,\r\n          cols: 2,\r\n          title: 'Hide Closed',\r\n          onChange: () => this.hideClosedChange(),\r\n          style: {\r\n            marginLeft: 25,\r\n          },\r\n        },\r\n      ],\r\n    };\r\n\r\n    const list = this.elements.cut('list');\r\n    list.columns.splice(list.columns.findIndex(col => col.dataPath === \"contact\"), 1);\r\n    const stepIndex = list.columns.find(col => col.dataPath === \"stepIndex\");\r\n    stepIndex.format = (index) => this.stepFormat(index);\r\n    stepIndex.title = 'Step';\r\n    const dealClosed = list.columns.find(col => col.dataPath === \"dealClosed\");\r\n    dealClosed.title = 'Closed';\r\n    dealClosed.format = (val) => val ? '✔' : '';\r\n    list.hidden = isBoard;\r\n    const board = {\r\n      hidden: !isBoard,\r\n      id: 'board',\r\n      type: 'Kanban',\r\n      styles: kanbanStyles,\r\n      itemClick: (item) => this.boardItemClick(item),\r\n      data: [],\r\n      onDragEnd: (params) => this.onDragEnd(params),\r\n      orderSaveKey: 'dealsOrder',\r\n    };\r\n    this.elements.push(topPanel, list, board);\r\n    const userColIndex = list.columns.findIndex(col => col.dataPath === 'user');\r\n    this.userColumn = list.columns.splice(userColIndex, 1)[0];\r\n    const closedColIndex = list.columns.findIndex(col => col.dataPath === 'dealClosed');\r\n    this.closedColumn =  list.columns.splice(closedColIndex, 1)[0];\r\n    this.setFilters(true);\r\n  }\r\n  schemaChange() {\r\n    this.app.vars.schema = this.content.schema.value;\r\n    this.setFilters();\r\n    this.load();\r\n  }\r\n  userChange() {\r\n    this.setFilters();\r\n    const columns = this.content.list.columns;\r\n    const userColIndex = columns.findIndex(item => item.dataPath === 'user');\r\n    if (!this.content.user.value) {\r\n      if (userColIndex === -1) {\r\n        columns.push(this.userColumn);\r\n      }\r\n    } else {\r\n      if (userColIndex !== -1) {\r\n        columns.splice(userColIndex, 1);\r\n      }\r\n    }\r\n    this.content.list.columns = columns;\r\n    this.load();\r\n  }\r\n  setFilters(init) {\r\n    this.filters = {\r\n      schemaUuid: this.app.vars.schema && this.app.vars.schema.uuid,\r\n    };\r\n    let user = this.app.user;\r\n    let hideClosed = this.app.vars.isHideClosedDeals !== undefined ? this.app.vars.isHideClosedDeals : true;\r\n    if (!init) {\r\n      user = this.content.user.value;\r\n      hideClosed = this.content.isHideClosed.value;\r\n    }\r\n    if (user) {\r\n      this.filters.userUuid = user.uuid;\r\n    }\r\n    if (hideClosed) {\r\n      this.filters.dealClosed = false;\r\n    }\r\n  }\r\n  changeView() {\r\n    const isBoard = this.content.isBoard.value;\r\n    this.content.list.hidden = isBoard;\r\n    this.content.board.hidden = !isBoard;\r\n    this.app.vars.isBoardDeals = isBoard;\r\n    if (isBoard) {\r\n      this.setBoardData(this.content.list.value);\r\n    }\r\n  }\r\n  boardItemClick(item) {\r\n    this.app.open('DealItem', { id: item.uuid });\r\n  }\r\n  async load() {\r\n    const data = await super.load();\r\n    const { response: schema } = await this.app.SaleSchema.get({ uuid: this.app.vars.schema.uuid });\r\n    this.schema = schema;\r\n    this.content.list.value = data;\r\n    if (this.content.isBoard.value) {\r\n      this.setBoardData(data);\r\n    }\r\n    return data;\r\n  }\r\n  async setBoardData(data) {\r\n    data = data.map(item => ({ ...item, id: item.uuid }));\r\n    // идентификаторы сделаны индексами чтобы при изменении схемы\r\n    // сохранялся порядок\r\n    const columns = this.schema.steps.map((step, index) => ({ ...step, title: step.name, id: `${BOARD_COL_PREFIX}${index}` }));\r\n    data.forEach(deal => {\r\n      let column = columns.find((column, index) => index === deal.stepIndex);\r\n      if (!column) {\r\n        column = columns[0];\r\n      }\r\n      const items = column.items || [];\r\n      items.push(deal);\r\n      column.items = items;\r\n    });\r\n    this.content.board.data = columns;\r\n  }\r\n  async onDragEnd(params) {\r\n    const data = this.content.board.data;\r\n    if (params.destination.droppableId !== params.source.droppableId) {\r\n      // change step\r\n      const targetStepIndex = +params.destination.droppableId.replace(BOARD_COL_PREFIX, '');\r\n      await this.app.Deal.put({ uuid: params.draggableId, body: { stepIndex: targetStepIndex }});\r\n      this.load();\r\n    }\r\n  }\r\n  stepFormat(index) {\r\n    return this.schema && this.schema.steps[index].name;\r\n  }\r\n  hideClosedChange() {\r\n    this.setFilters();\r\n    this.app.vars.isHideClosedDeals = this.content.isHideClosed.value;\r\n    const columns = this.content.list.columns;\r\n    const closedColIndex = columns.findIndex(item => item.dataPath === 'dealClosed');\r\n    if (!this.content.isHideClosed.value) {\r\n      if (closedColIndex === -1) {\r\n        columns.push(this.closedColumn);\r\n      }\r\n    } else {\r\n      if (closedColIndex !== -1) {\r\n        columns.splice(closedColIndex, 1);\r\n      }\r\n    }\r\n    this.content.list.columns = columns;\r\n    this.load();\r\n  }\r\n}\r\n","\r\nexport default Form => class SaleSchemaItem extends Form {\r\n  async save() {\r\n    await super.save();\r\n    this.app.fetchSchemas();\r\n  }\r\n}\r\n","import { Elements, getElement } from 'katejs/lib/client';\r\nimport moment from 'moment';\r\nimport { structures } from '../structure';\r\nimport { kanbanStyles } from './DealList';\r\n\r\nconst doneStyle = {\r\n  textDecoration: 'line-through',\r\n};\r\n\r\nexport default Form => class TaskList extends Form {\r\n  constructor(args) {\r\n    super(args);\r\n    this.actions = undefined;\r\n    const isBoard = this.app.vars.isBoardTasks === undefined ? true : this.app.vars.isBoardTasks;\r\n    const isHideDone = this.app.vars.isHideDoneTasks === undefined ? true : this.app.vars.isHideDoneTasks;\r\n    const topPanel = {\r\n      type: Elements.GRID,\r\n      elements: [\r\n        {\r\n          type: Elements.BUTTON,\r\n          title: 'New Task',\r\n          onClick: () => this.app.open('TaskItem', { id: 'new' }),\r\n          cols: 2,\r\n        },\r\n        {\r\n          ...getElement(structures.Task.fields.find(item => item.name === 'user'), this),\r\n          value: this.app.user,\r\n          onChange: () => this.userChange(),\r\n        },\r\n        {\r\n          type: Elements.LABEL,\r\n          title: 'List',\r\n          style: {\r\n            textAlign: 'right',\r\n            fontWeight: 'bolder',\r\n            marginTop: 12,\r\n          },\r\n          tag: 'p',\r\n          cols: 2,\r\n        },\r\n        {\r\n          type: Elements.SWITCH,\r\n          id: 'isBoard',\r\n          value: isBoard,\r\n          title: 'Board',\r\n          cols: 2,\r\n          onChange: () => this.changeView(),\r\n        },\r\n        {\r\n          type: Elements.CHECKBOX,\r\n          id: 'isHideDone',\r\n          value: isHideDone,\r\n          cols: 2,\r\n          title: 'Hide Done',\r\n          onChange: () => this.hideDoneChange(),\r\n        },\r\n      ],\r\n    };\r\n\r\n    const list = this.elements.cut('list');\r\n    list.hidden = isBoard;\r\n    list.columns.splice(list.columns.findIndex(col => col.dataPath === 'done'), 1);\r\n    list.columns.splice(list.columns.findIndex(col => col.dataPath === 'contact'), 1);\r\n    const dataColumn = list.columns.find(col => col.dataPath === 'date');\r\n    dataColumn.format = (val) => moment(val).format('DD.MM HH:mm');\r\n    list.cellStyle = (row, column) => {\r\n      if (column.dataPath === 'title' && row.done) {\r\n        return {\r\n          textDecoration: 'line-through',\r\n        };\r\n      }\r\n    };\r\n\r\n    const board = {\r\n      hidden: !isBoard,\r\n      id: 'board',\r\n      type: 'Kanban',\r\n      styles: kanbanStyles,\r\n      itemClick: (item) => this.boardItemClick(item),\r\n      data: [],\r\n      onDragEnd: (params) => this.onDragEnd(params),\r\n      orderSaveKey: 'tasksOrder',\r\n    };\r\n    this.elements.push(topPanel, list, board);\r\n\r\n    this.setFilters(true);\r\n    const userColIndex = list.columns.findIndex(col => col.dataPath === 'user');\r\n    this.userColumn = list.columns.splice(userColIndex, 1)[0];\r\n    this.app.vars.currentClient = undefined;\r\n    this.app.vars.currentDeal = undefined;\r\n  }\r\n  userChange() {\r\n    this.setFilters();\r\n    const columns = this.content.list.columns;\r\n    const userColIndex = columns.findIndex(item => item.dataPath === 'user');\r\n    if (!this.content.user.value) {\r\n      if (userColIndex === -1) {\r\n        columns.push(this.userColumn);\r\n      }\r\n    } else {\r\n      if (userColIndex !== -1) {\r\n        columns.splice(userColIndex, 1);\r\n      }\r\n    }\r\n    this.content.list.columns = columns;\r\n    this.load();\r\n  }\r\n  setFilters(init) {\r\n    this.filters = {\r\n    };\r\n    let user = this.app.user;\r\n    let hideDone = this.app.vars.isHideDoneTasks === undefined ? true : this.app.vars.isHideDoneTasks;\r\n    if (!init) {\r\n      user = this.content.user.value;\r\n      hideDone = this.content.isHideDone.value;\r\n    }\r\n    if (user) {\r\n      this.filters.userUuid = user.uuid;\r\n    }\r\n    if (hideDone) {\r\n      this.filters.done = false;\r\n    }\r\n  }\r\n\r\n  changeView() {\r\n    const isBoard = this.content.isBoard.value;\r\n    this.content.list.hidden = isBoard;\r\n    this.content.board.hidden = !isBoard;\r\n    this.app.vars.isBoardTasks = isBoard;\r\n    if (isBoard) {\r\n      this.setBoardData(this.content.list.value);\r\n    }\r\n  }\r\n  boardItemClick(item) {\r\n    this.app.open('TaskItem', { id: item.uuid });\r\n  }\r\n  async load() {\r\n    const data = await super.load();\r\n    if (this.content.isBoard.value) {\r\n      this.setBoardData(data);\r\n    }\r\n    return data;\r\n  }\r\n  async setBoardData(data) {\r\n    const columns = [\r\n      {\r\n        title: 'Expired',\r\n        id: 'expired',\r\n        items: [],\r\n        edge: moment().startOf('day').toDate().getTime(),\r\n      },\r\n      {\r\n        title: 'Today',\r\n        id: moment().format('YYYYMMDD'),\r\n        items: [],\r\n        edge: moment().endOf('day').toDate().getTime(),\r\n      },\r\n      {\r\n        title: 'Tomorrow',\r\n        id: moment().add(1, 'day').format('YYYYMMDD'),\r\n        items: [],\r\n        edge: moment().add(1, 'day').endOf('day').toDate().getTime(),\r\n      },\r\n      {\r\n        title: 'Day After Tomorrow',\r\n        id: moment().add(2, 'day').format('YYYYMMDD'),\r\n        items: [],\r\n        edge: moment().add(2, 'day').endOf('day').toDate().getTime(),\r\n      },\r\n      {\r\n        title: 'Later',\r\n        id: 'later',\r\n        items: [],\r\n      },\r\n    ];\r\n    data.forEach((task) => {\r\n      const timestamp = moment(task.date).toDate().getTime();\r\n      let colIndex = 0;\r\n      for(; colIndex < columns.length - 1; colIndex++) { // except last\r\n        if (timestamp < columns[colIndex].edge) {\r\n          break;\r\n        }\r\n      }\r\n      if (colIndex === colIndex.length) {\r\n        colIndex--;\r\n      }\r\n\r\n      columns[colIndex].items.push({\r\n        ...task,\r\n        id: task.uuid,\r\n        style: task.done ? doneStyle : undefined,\r\n      });\r\n    });\r\n    this.content.board.data = columns;\r\n  }\r\n  async onDragEnd(params) {\r\n    const data = this.content.board.data;\r\n    const task = this.content.list.value.find(item => item.uuid === params.draggableId);\r\n    if (params.destination.droppableId !== params.source.droppableId) {\r\n      const targetDate = params.destination.droppableId;\r\n      let date;\r\n      if (targetDate === 'expired') {\r\n        date = moment().subtract(1, 'day').toDate();\r\n      } else if (targetDate === 'later') {\r\n        date = moment().add(3, 'days').toDate();\r\n      } else {\r\n        date = moment(`${targetDate} ${moment(task.date).format('HH:mm')}`, 'YYYYMMDD HH:mm');\r\n      }\r\n      await this.app.Task.put({ uuid: params.draggableId, body: { date }});\r\n      this.load();\r\n    }\r\n  }\r\n  hideDoneChange() {\r\n    this.app.vars.isHideDoneTasks = this.content.isHideDone.value;\r\n\r\n    this.setFilters();\r\n    this.load();\r\n  }\r\n}\r\n","import { ProductsTable } from './OrderItem';\r\nimport { Elements } from 'katejs/lib/client';\r\nimport moment from 'moment';\r\n\r\nexport default Form => class InvoiceItem extends Form {\r\n  static doc = true;\r\n  constructor(args) {\r\n    super(args);\r\n    this.productTable = new ProductsTable(this);\r\n    this.actions.push({\r\n      type: Elements.BUTTON,\r\n      title: 'Print',\r\n      onClick: () => this.print(),\r\n    });\r\n    if (this.app.allow('Order', 'put')) {\r\n      this.actions.push({\r\n        type: Elements.BUTTON,\r\n        title: 'Order',\r\n        onClick: () => this.order(),\r\n      });\r\n    }\r\n  }\r\n  afterInit() {\r\n    if (super.afterInit) {\r\n      super.afterInit();\r\n    }\r\n    if (!this.uuid) {\r\n      this.content.client.value = this.app.vars.currentClient;\r\n      this.app.vars.currentClient = undefined;\r\n    }\r\n  }\r\n  async print() {\r\n    await this.save();\r\n    const { response: doc } = await this.app.Invoice.get({ uuid: this.uuid });\r\n    const data = {\r\n      ...doc,\r\n      date: moment(doc.date).format('DD.MM.YYYY'),\r\n      ...this.app.settings,\r\n      products: doc.products.map(item => ({\r\n        ...item,\r\n        price: item.price.toFixed(2),\r\n        sum: item.sum.toFixed(2),\r\n      })),\r\n      total: doc.total.toFixed(2),\r\n    };\r\n    this.app.print({ template: 'Invoice', data });\r\n  }\r\n  close() {\r\n    window.history.back();\r\n  }\r\n  async order() {\r\n    await this.save();\r\n    this.app.vars.currentInvoiceData = this.getValues();\r\n    this.app.open('OrderItem', {});\r\n  }\r\n}\r\n\r\n//   <!doctype html>\r\n// <html lang=\"en\">\r\n//   <head>\r\n//   <!-- Required meta tags -->\r\n// <meta charset=\"utf-8\">\r\n//   <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\r\n//\r\n//   <!-- Bootstrap CSS -->\r\n// <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\">\r\n//\r\n//   <title>Счет</title>\r\n//   <style>\r\n//   html, body {\r\n//   width: 210mm;\r\n//   height: 297mm;\r\n// }\r\n// </style>\r\n// </head>\r\n// <body>\r\n//\r\n// <table width=\"100%\" style=\"font-family: Arial;\">\r\n//   <tr style=\"display: none;\">\r\n//   <td style=\"width: 68%; padding: 20px 0;\">\r\n//   <div style=\"text-align: justify; font-size: 11pt;\">Внимание! Оплата данного счета означает согласие с условиями поставки товара. Счет действителен в течение 5(пяти) банковских дней, не считая дня выписки счета. Уведомление об оплате  обязательно, в противном случае НЕ ГАРАНТИРУЕТСЯ наличие товара на складе. Товар отпускается по факту прихода денег на р/с Поставщика, самовывозом, при наличии доверенности и паспорта.</div>\r\n// </td>\r\n// <td style=\"width: 32%; text-align: center; padding: 30px 0;\"><img src=\"<!--Лого url-->\" style=\"width: 70%;\"></td>\r\n//   </tr>\r\n//\r\n//   </table>\r\n//\r\n//\r\n//   <table width=\"100%\" border=\"2\" style=\"border-collapse: collapse; width: 100%; font-family: Arial;\" cellpadding=\"2\" cellspacing=\"2\">\r\n//   <tr style=\"\">\r\n//   <td colspan=\"2\" rowspan=\"2\" style=\"min-height:13mm; width: 105mm;\">\r\n//   <table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"height: 13mm;\">\r\n//   <tr>\r\n//   <td valign=\"top\">\r\n//   <div>{{ companyBankName }}</div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td valign=\"bottom\" style=\"height: 3mm;\">\r\n//   <div style=\"font-size:10pt;\">Банк получателя</div>\r\n// </td>\r\n// </tr>\r\n// </table>\r\n// </td>\r\n// <td style=\"min-height:7mm;height:auto; width: 25mm;\">\r\n//   <div>БИK</div>\r\n//   </td>\r\n//   <td rowspan=\"2\" style=\"vertical-align: top; width: 60mm;\">\r\n//   <div style=\" height: 7mm; line-height: 7mm; vertical-align: middle;\">{{companyBankCode}}</div>\r\n// <div>{{companyBankCorrAccount}}</div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td style=\"width: 25mm;\">\r\n//   <div>Сч. №</div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td style=\"min-height:6mm; height:auto; width: 50mm;\">\r\n//   <div>ИНН {{companyInn}}</div>\r\n// </td>\r\n// <td style=\"min-height:6mm; height:auto; width: 55mm;\">\r\n//   <div>КПП {{companyKpp}}</div>\r\n// </td>\r\n// <td rowspan=\"2\" style=\"min-height:19mm; height:auto; vertical-align: top; width: 25mm;\">\r\n//   <div>Сч. №</div>\r\n// </td>\r\n// <td rowspan=\"2\" style=\"min-height:19mm; height:auto; vertical-align: top; width: 60mm;\">\r\n//   <div>{{companyBankAccount}}</div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td colspan=\"2\" style=\"min-height:13mm; height:auto;\">\r\n//\r\n//   <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"height: 13mm; width: 105mm;\">\r\n//   <tr>\r\n//   <td valign=\"top\">\r\n//   <div>{{companyName}}</div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td valign=\"bottom\" style=\"height: 3mm;\">\r\n//   <div style=\"font-size: 10pt;\">Получатель</div>\r\n//   </td>\r\n//   </tr>\r\n//   </table>\r\n//\r\n//   </td>\r\n//   </tr>\r\n//   </table>\r\n//   <br/>\r\n//\r\n//   <div style=\"font-weight: bold; font-size: 25pt; padding-left:5px; font-family: Arial;\">\r\n//   Счет № {{number}} от {{date}}</div>\r\n// <br/>\r\n//\r\n// <div style=\"background-color:#000000; width:100%; font-size:1px; height:2px;\">&nbsp;</div>\r\n//\r\n// <table width=\"100%\" style=\"font-family: Arial;\">\r\n//   <tr>\r\n//   <td style=\"width: 30mm; vertical-align: top;\">\r\n//   <div style=\" padding-left:2px; \">Поставщик:    </div>\r\n// </td>\r\n// <td>\r\n// <div style=\"font-weight:bold;  padding-left:2px;\">\r\n//   {{companyName}} ИНН  {{companyInn}}, КПП {{companyKpp}}<br>\r\n// <span style=\"font-weight: normal;\"><!--  address --></span>          </div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td style=\"width: 30mm; vertical-align: top;\">\r\n//   <div style=\" padding-left:2px;\">Покупатель:    </div>\r\n// </td>\r\n// <td>\r\n// <div style=\"font-weight:bold;  padding-left:2px;\">\r\n//   {{client.title}}<br><span style=\"font-weight: normal;\"><!-- address--></span>            </div>\r\n// </td>\r\n// </tr>\r\n// </table>\r\n//\r\n//\r\n// <table border=\"2\" width=\"100%\" cellpadding=\"2\" cellspacing=\"2\" style=\"border-collapse: collapse; width: 100%; font-family: Arial;\">\r\n//   <thead>\r\n//   <tr>\r\n//   <th style=\"width:13mm; \">№</th>\r\n//\r\n// <th>Товары (работы, услуги)</th>\r\n// <th style=\"width:20mm; \">Кол-во</th>\r\n//   <!--        <th style=\"width:17mm; \">Ед.</th> -->\r\n//   <th style=\"width:27mm;  \">Цена</th>\r\n//   <th style=\"width:27mm;  \">Сумма</th>\r\n//   </tr>\r\n//   </thead>\r\n//   <tbody >\r\n//   {{#each products}}\r\n// <tr>\r\n// <td style=\"width:13mm; \">{{ rowNumber }}</td>\r\n//\r\n// <td> {{ product.title }}</td>\r\n// <td style=\"width:20mm; text-align: right;\">{{ amount }}</td>\r\n// <!--        <td style=\"width:17mm; \">Шт.</td> -->\r\n//   <td style=\"width:27mm; text-align: right; \">{{ price }}</td>\r\n// <td style=\"width:27mm; text-align: right; \">{{ sum }}</td>\r\n// </tr>\r\n// {{/ each}}\r\n// </tbody>\r\n// </table>\r\n//\r\n// <table style=\"font-family: Arial;\" border=\"0\" width=\"100%\" cellpadding=\"1\" cellspacing=\"1\">\r\n//   <tr>\r\n//   <td></td>\r\n//   <td style=\"width:27mm; font-weight:bold;  text-align:right;\">Итого:</td>\r\n// <td style=\"width:27mm; font-weight:bold;  text-align: center; \">{{ total }}</td>\r\n// </tr>\r\n// <!--\r\n// <tr>\r\n// <td></td>\r\n// <td style=\"width:27mm; font-weight:bold;  text-align:right;\">Итого НДС:</td>\r\n// <td style=\"width:27mm; font-weight:bold;  text-align: center; \">0.00</td>\r\n//   </tr>\r\n//   -->\r\n//   <tr>\r\n//   <td></td>\r\n//   <td style=\"width:37mm; font-weight:bold;  text-align:right;\">Всего к оплате:</td>\r\n//   <td style=\"width:27mm; font-weight:bold;  text-align: center; \">{{ total }}</td>\r\n//   </tr>\r\n//   </table>\r\n//\r\n//   <br />\r\n//   <div style=\"font-family: Arial;\">\r\n//     Всего наименований {{products.length}} на сумму {{total}} рублей.<br />\r\n//   <!-- Ноль рублей 00 копеек --></div>\r\n//   <br /><br />\r\n//   <div style=\"background-color:#000000; width:100%; font-size:1px; height:2px;\">&nbsp;</div>\r\n//   <br/>\r\n//   <!--\r\n//   <div style=\"font-family: Arial; font-size: 10pt;\">\r\n//     1. Счет действителен в течении 5 (пяти) банковских дней, не считая дня выписки счета. В случае нарушения срока оплаты сохранение цены на товар и наличие товара на складе НЕ ГАРАНТИРУЕТСЯ.<br />\r\n//   2. Оплата данного счета означает согласие с условиями изложенными в п.1</div>\r\n//   <br />\r\n//   -->\r\n//   <br />\r\n//   <div style=\"background: url('<!--url печати в png сюда-->');  background-repeat: no-repeat; padding: 30px 10px; width: 400px; height: 250px;\">\r\n//     <div>Руководитель ______________________ </div>\r\n//   <br/>  <br /><br />\r\n//\r\n//   <div>Главный бухгалтер ______________________</div>\r\n//   <br/>\r\n//\r\n//   <div style=\"width: 85mm;text-align:center;\">М.П.</div>\r\n//     <br/>\r\n//     </div>\r\n//     <br/>  <br /><br /><br/>  <br /><br /><br/>  <br /><br />\r\n//\r\n//     </body>\r\n//     </html>\r\n","import React, { Component } from 'react';\r\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\r\n\r\nconst testItems = [\r\n  { id: '11', title: \"First task\" },\r\n  { id: '12', title: \"Second task\" },\r\n  { id: '13', title: \"Third task\" },\r\n  { id: '14', title: \"Fourth task\" },\r\n  { id: '15', title: \"Fifth task\" }\r\n];\r\n\r\nconst testData = [\r\n  {\r\n    id: 'id1',\r\n    title: 'col 1',\r\n    items: testItems,\r\n  },\r\n  {\r\n    id: 'id2',\r\n    title: 'col 2',\r\n  },\r\n];\r\n\r\nconst onDragEnd = (result, columns, setColumns, props) => {\r\n  if (!result.destination) return;\r\n  const { source, destination } = result;\r\n\r\n  let newColumns;\r\n\r\n  if (source.droppableId !== destination.droppableId) {\r\n    const sourceColumn = columns.find(item => item.id === source.droppableId);\r\n    const destColumn = columns.find(item => item.id === destination.droppableId);\r\n    const sourceItems = sourceColumn.items || [];\r\n    const destItems = destColumn.items || [];\r\n    sourceColumn.items = sourceItems;\r\n    destColumn.items = destItems;\r\n    const [removed] = sourceItems.splice(source.index, 1);\r\n    destItems.splice(destination.index, 0, removed);\r\n    newColumns = columns.slice();\r\n    setColumns(newColumns);\r\n    if (props.onDragEnd) {\r\n      props.onDragEnd(result);\r\n    }\r\n  } else {\r\n    const column = columns.find(item => item.id === source.droppableId);\r\n    const copiedItems = column.items;\r\n    const [removed] = copiedItems.splice(source.index, 1);\r\n    copiedItems.splice(destination.index, 0, removed);\r\n    newColumns = columns.slice();\r\n    setColumns(newColumns);\r\n  }\r\n  if (props.orderSaveKey) {\r\n    saveOrder(newColumns, props.orderSaveKey);\r\n  }\r\n};\r\n\r\nconst saveOrder = (data, key) => {\r\n  const order = data.reduce((acc, col) => {\r\n    const colOrder = (col.items || []).reduce((accItems, item, index) => {\r\n      accItems[item.id] = index;\r\n      return accItems;\r\n    }, {});\r\n    acc[col.id] = colOrder;\r\n    return acc;\r\n  }, {});\r\n  localStorage.setItem(key, JSON.stringify(order));\r\n};\r\n\r\nconst restoreOrder = (columns, key) => {\r\n  let order;\r\n  try {\r\n    order = JSON.parse(localStorage.getItem(key));\r\n  } catch {\r\n  }\r\n  if (!order) {\r\n    return;\r\n  }\r\n  columns.forEach((column) => {\r\n    const colsData = order[column.id];\r\n    if (colsData) {\r\n      (column.items || []).forEach((item) => {\r\n        const itemOrder = colsData[item.id];\r\n        if (itemOrder !== undefined) {\r\n          item.order = itemOrder;\r\n        } else {\r\n          item.order = Number.MAX_SAFE_INTEGER;\r\n        }\r\n      });\r\n      (column.items || []).sort((a, b) => (a.order - b.order));\r\n    }\r\n  });\r\n};\r\n\r\nexport default class Kanban extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { columns: this.props.data || [] };\r\n    const userStyles = {\r\n      container: {},\r\n      columnContainer: {},\r\n      columnHeader: {},\r\n      column: {},\r\n      columnDragOver: {},\r\n      item: {},\r\n      itemDragging: {},\r\n      ...(this.props.styles || {}),\r\n    };\r\n    this.styles = {\r\n      container: { display: \"flex\", justifyContent: \"center\", height: \"100%\", ...userStyles.container },\r\n      columnContainer: { display: \"flex\", flexDirection: \"column\", alignItems: \"center\", ...userStyles.columnContainer },\r\n      columnHeader: { ...userStyles.columnHeader },\r\n      column: { background: 'lightgrey', padding: 4, width: 250, minHeight: 500, ...userStyles.column },\r\n      columnDragOver: { background: 'lightblue', padding: 4, width: 250, minHeight: 500, ...userStyles.columnDragOver },\r\n      item: { userSelect: \"none\", padding: 16, margin: \"0 0 8px 0\", minHeight: \"50px\", backgroundColor: \"#456C86\", color: \"white\", ...userStyles.item },\r\n      itemDragging: { userSelect: \"none\", padding: 16, margin: \"0 0 8px 0\", minHeight: \"50px\", backgroundColor: \"#263B4A\", color: \"white\", ...userStyles.itemDragging },\r\n    };\r\n  }\r\n  setColumns = (columns) => {\r\n    this.setState({ columns });\r\n  };\r\n  itemClick(item) {\r\n    if (this.props.itemClick) {\r\n      this.props.itemClick(item);\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (this.props.data !== nextProps.data) {\r\n      const columns = nextProps.data.slice();\r\n      restoreOrder(columns, nextProps.orderSaveKey);\r\n      this.setState({ columns: nextProps.data });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const setColumns = this.setColumns;\r\n    const columns = this.state.columns;\r\n    const { t } = this.props;\r\n    return (\r\n      <div style={this.styles.container}>\r\n  <DragDropContext\r\n    onDragEnd={result => onDragEnd(result, columns, setColumns, this.props)}\r\n  >\r\n    {columns.map((column) => {\r\n      return (\r\n        <div\r\n          style={this.styles.columnContainer}\r\n          key={column.id}\r\n        >\r\n        <h2 style={this.styles.columnHeader}>{t(column.title)}</h2>\r\n        <div style={{ margin: 8 }}>\r\n    <Droppable droppableId={column.id} key={column.id}>\r\n        {(provided, snapshot) => {\r\n        return (\r\n          <div\r\n        {...provided.droppableProps}\r\n        ref={provided.innerRef}\r\n        style={snapshot.isDraggingOver ? this.styles.columnDragOver : this.styles.column }\r\n      >\r\n        {(column.items || []).map((item, index) => {\r\n          return (\r\n            <Draggable\r\n          key={item.id}\r\n          draggableId={item.id}\r\n          index={index}\r\n            >\r\n            {(provided, snapshot) => {\r\n            return (\r\n              <div\r\n            ref={provided.innerRef}\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n            style={{\r\n                ...(snapshot.isDragging ? this.styles.itemDragging: this.styles.item),\r\n                ...provided.draggableProps.style,\r\n                ...(item.style || {})\r\n              }}\r\n              onClick={() => this.itemClick(item)}\r\n          >\r\n            {item.title}\r\n          </div>\r\n          );\r\n          }}\r\n        </Draggable>\r\n        );\r\n        })}\r\n        {provided.placeholder}\r\n      </div>\r\n      );\r\n      }}\r\n    </Droppable>\r\n      </div>\r\n      </div>\r\n    );\r\n    })}\r\n  </DragDropContext>\r\n    </div>\r\n  );\r\n  }\r\n}\r\n","import Kanban from './Kanban';\r\n\r\nexport default {\r\n  Kanban,\r\n}\r\n","export default [\n  {\n    date: '2019-03-20',\n    entity: 'System',\n    description: 'Автонумерация документов: при создании нового документа оставьте номер пустым - при сохранении номер будет присвоен автоматически',\n  },\n  {\n    date: '2019-03-24',\n    entity: 'Cashbox',\n    description: '\"Касса/счет\" - справочник мест хранений денежных средств. Используется в документах связанных с денежными средствами.',\n  },\n  {\n    date: '2019-03-24',\n    entity: 'Payment',\n    description: '\"Оплата\" - документ для отражения оплат от клиентов. В одном документе можно отразить несколько оплат от разных клиентов. Также в документе можно указать счет/кассу куда поступают денежные средства',\n  },\n  {\n    date: '2019-03-24',\n    entity: 'Order',\n    description: 'Отчет - \"Заказы к доставке\": формируется за определенный день. Выводит список заказов на день и колонку \"Оплатить\" в которой выводится сумма к оплате с учетом самого заказа.',\n  },\n  {\n    date: '2019-03-26',\n    entity: 'Payment',\n    description: 'Сумма \"Итого\" рассчитывается по сумме платежей от клиентов.',\n  },\n  {\n    date: '2019-03-26',\n    entity: 'Order',\n    description: 'Сумма в таблице расчитывается как кол-во * цена, при изменении количества или цены. Суммы \"Итого\" рассчитывается по сумме всех строк',\n  },\n  {\n    date: '2019-03-26',\n    entity: 'Expense',\n    description: 'Документ \"Расход\" предназначен для отражения расхода денежных средств',\n  },\n  {\n    date: '2019-03-29',\n    entity: 'Order',\n    description: 'В документе можно отразить оплату от клиента. Оплата может быть любой суммой - она будет учитываться при расчетах. В документе после выбора клиента можно открыть сверку расчетов.',\n  },\n  {\n    date: '2019-03-29',\n    entity: 'Cashbox',\n    description: 'Отчет \"Движение денег\" - формируется за период и отражает остатки на начало, движения и остатки на конец в разрезе счетов/касс',\n  },\n  {\n    date: '2019-03-29',\n    entity: 'System',\n    description: 'В полях выбора даты можно указать дату вручную в формате ДД.ММ.ГГГГ',\n  },\n  {\n    date: '2019-04-05',\n    entity: 'Agent app',\n    description: `Свободные заказы - отображаются заказы на выбранную дату не присвоенные ни одному агенту со статуслм \"Новый\". Их можно взять себе нажав на заказ и кнопку \"Принять заказ\".\n    Принятые к исполнению заказы отобажаются на странице \"Мои заказы\". При выполнении заказа следует указать сумму полученных денег. Если по данному заказу уже был платеж, поле с указанием суммы будет недоступно`,\n  },\n  {\n    date: '2019-04-05',\n    entity: 'Order',\n    description: 'Флаг \"Оплата агенту\" означает что деньги не приходуются в кассу, а числятся за агентом. Оприходовать их в кассу можно в документе \"Оплата\" заполнив по агенту',\n  },\n  {\n    date: '2019-04-05',\n    entity: 'Payment',\n    description: `Таблицу платежей можно заполнить плажами, полученными курьером в течении дня.\nПо кнопке \"Заполнить по агенту\" можно выбрать агента и нажать \"Применить\": таблица будет заполнена платежами полученными агентом за день даты документа.`,\n  },\n  {\n    date: '2019-04-14',\n    entity: 'Order',\n    description: 'Добавлен функционал печати товарного чека',\n  },\n  {\n    date: '2019-04-21',\n    entity: 'Cashbox',\n    description: 'Добавлен флаг \"Доступен агенту\" - счета, отмеченные этим флагом, могут быть выбраны агентом при указании оплаты от клиента',\n  },\n  {\n    date: '2019-04-21',\n    entity: 'Payment',\n    description: 'При заполнении документа по агенту можно выбрать \"Счет\", который указал агент при указании способа оплаты. При заполнении поступления наличных это поле следует оставить пустым.',\n  },\n  {\n    date: '2019-04-22',\n    entity: 'Order',\n    description: 'Отчет \"Динамика заказов\" позволяет увидеть количество и сумму заказов за период по дням',\n  },\n  {\n    date: '2019-06-10',\n    entity: 'System',\n    description: 'Элементы меню сгруппированы по типам',\n  },\n  {\n    date: '2019-08-30',\n    entity: 'Receipt',\n    description: 'Реализован учет остаток товаров. Добавлен документ Поступление и отчет Движение товаров',\n  },\n  {\n    date: '2020-03-30',\n    entity: 'System',\n    description: 'Реализована возможность печати документов и отчетов через стандартный диалог печати (Ctrl+P).',\n  },\n  {\n    date: '2020-04-19',\n    entity: 'Product',\n    description: 'На странице товара, при учете его остатков, отображается Карточка - отчет по всем движениям товара',\n  },\n  {\n    date: '2020-04-19',\n    entity: 'System',\n    description: 'Отчет Взаиморасчеты показывает состяние расчетов по всем контрагентам',\n  },\n];\n","import React from 'react';\n\nconst OrdersUnassigned = () => (\n  <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" >\n    <path fill=\"#ffffff\" d=\"M4,2H14V4H4V14H2V4C2,2.89 2.89,2 4,2M8,6H18V8H8V18H6V8C6,6.89 6.89,6 8,6M12,10H20C21.11,10 22,10.89 22,12V20C22,21.11 21.11,22 20,22H12C10.89,22 10,21.11 10,20V12C10,10.89 10.89,10 12,10M14,12V20L20,16L14,12Z\" />\n  </svg>\n);\n\nconst OrderList = () => (\n  <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n    <path fill=\"#ffffff\" d=\"M4,2A2,2 0 0,0 2,4V14H4V4H14V2H4M8,6A2,2 0 0,0 6,8V18H8V8H18V6H8M20,12V20H12V12H20M20,10H12A2,2 0 0,0 10,12V20A2,2 0 0,0 12,22H20A2,2 0 0,0 22,20V12A2,2 0 0,0 20,10Z\" />\n  </svg>\n);\n\nconst OrdersToDeliverReport = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M16,6L19,10H21C22.11,10 23,10.89 23,12V15H21A3,3 0 0,1 18,18A3,3 0 0,1 15,15H9A3,3 0 0,1 6,18A3,3 0 0,1 3,15H1V12C1,10.89 1.89,10 3,10L6,6H16M10.5,7.5H6.75L4.86,10H10.5V7.5M12,7.5V10H17.14L15.25,7.5H12M6,13.5A1.5,1.5 0 0,0 4.5,15A1.5,1.5 0 0,0 6,16.5A1.5,1.5 0 0,0 7.5,15A1.5,1.5 0 0,0 6,13.5M18,13.5A1.5,1.5 0 0,0 16.5,15A1.5,1.5 0 0,0 18,16.5A1.5,1.5 0 0,0 19.5,15A1.5,1.5 0 0,0 18,13.5Z\" />\n  </svg>\n);\n\nconst CashFlow = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3M5,15H8.11L9.62,12.15L10.38,17.92L14.07,13.21L15.89,15H19V19H5V15M19,13.46H16.53L13.93,10.86L11.44,14.05L10.5,7.08L7.17,13.46H5V5H7V6H17V5H19V6L19,13.46Z\" />\n  </svg>\n);\n\nconst ProductList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#fff\" d=\"M14,8H10V6H14V8M20,4V20C20,21.11 19.11,22 18,22H6C4.89,22 4,21.11 4,20V4A2,2 0 0,1 6,2H18C19.11,2 20,2.9 20,4M18,13H6V20H18V13M18,4H6V11H18V4M14,15H10V17H14V15Z\" />\n  </svg>\n);\n\n\nconst ClientList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M7.5,2A2,2 0 0,1 9.5,4A2,2 0 0,1 7.5,6A2,2 0 0,1 5.5,4A2,2 0 0,1 7.5,2M6,7H9A2,2 0 0,1 11,9V14.5H9.5V22H5.5V14.5H4V9A2,2 0 0,1 6,7M16.5,2A2,2 0 0,1 18.5,4A2,2 0 0,1 16.5,6A2,2 0 0,1 14.5,4A2,2 0 0,1 16.5,2M15,22V16H12L14.59,8.41C14.84,7.59 15.6,7 16.5,7C17.4,7 18.16,7.59 18.41,8.41L21,16H18V22H15Z\" />\n  </svg>\n);\n\nconst ProductSalesReport = () => (\n  <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n    <path fill=\"#ffffff\" d=\"M5,4H19A2,2 0 0,1 21,6V18A2,2 0 0,1 19,20H5A2,2 0 0,1 3,18V6A2,2 0 0,1 5,4M5,8V12H11V8H5M13,8V12H19V8H13M5,14V18H11V14H5M13,14V18H19V14H13Z\" />\n  </svg>\n);\n\nconst NoteList = () => (\n  <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\">\n    <g id=\"Frames-24px\">\n      <rect fill=\"none\" width=\"24\" height=\"24\"/>\n    </g>\n    <g id=\"Outline\">\n      <path fill=\"#ffffff\" d=\"M21,4h-7c-0.265,0-0.52,0.106-0.707,0.293L12,5.586l-1.293-1.293C10.52,4.106,10.265,4,10,4H3\n        C2.448,4,2,4.448,2,5v13c0,0.552,0.448,1,1,1h6.586l1.707,1.707C11.488,20.902,11.744,21,12,21s0.512-0.098,0.707-0.293L14.414,19\n        H21c0.552,0,1-0.448,1-1V5C22,4.448,21.552,4,21,4z M10,17H4V6h5.586L11,7.414v10.172l-0.293-0.293C10.52,17.106,10.265,17,10,17z\n        M20,17h-6c-0.265,0-0.52,0.106-0.707,0.293L13,17.586V7.414L14.414,6H20V17z\"/>\n    </g>\n  </svg>\n);\n\nconst CashboxList = () => (\n  <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\">\n    <g id=\"Frames-24px\">\n      <rect fill=\"none\" width=\"24\" height=\"24\"/>\n    </g>\n    <g id=\"Solid\">\n      <g>\n        <path fill=\"#ffffff\" d=\"M20,6V5h-2v1h-2V4c0-0.552-0.448-1-1-1H9C8.448,3,8,3.448,8,4v2H6V5H4v1C2.897,6,2,6.897,2,8v12c0,1.103,0.897,2,2,2h16c1.103,0,2-0.897,2-2V8C22,6.897,21.103,6,20,6z M10,5h4v1h-4V5z M20,20H4V8h16V20z\"/>\n        <path fill=\"#ffffff\" d=\"M13,9h-2v1.051c-1.14,0.232-2,1.242-2,2.449c0,1.378,1.122,2.5,2.5,2.5h1c0.276,0,0.5,0.224,0.5,0.5S12.776,16,12.5,16H9v2h2v1h2v-1.051c1.14-0.232,2-1.242,2-2.449c0-1.378-1.122-2.5-2.5-2.5h-1c-0.276,0-0.5-0.224-0.5-0.5s0.224-0.5,0.5-0.5H15v-2h-2V9z\"/>\n      </g>\n    </g>\n  </svg>\n);\n\nconst PaymentList = () => (\n  <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\">\n    <g id=\"Frames-24px\">\n      <rect fill=\"none\" width=\"24\" height=\"24\" />\n    </g>\n    <g id=\"Solid\">\n      <g>\n        <path fill=\"#ffffff\" d=\"M6.586,11h2.828l-2-2L14,2.415L17.586,6l-5,5h2.828l4.293-4.292c0.391-0.391,0.391-1.024,0-1.414l-5-5c-0.391-0.391-1.023-0.391-1.414,0l-8,8c-0.391,0.39-0.391,1.023,0,1.414L6.586,11z\"/>\n        <path fill=\"#ffffff\" d=\"M20,12H4c-0.552,0-1,0.448-1,1v10c0,0.552,0.448,1,1,1h16c0.552,0,1-0.448,1-1V13C21,12.448,20.552,12,20,12z M19,22H5v-8h14V22z\"/>\n        <polygon fill=\"#ffffff\" points=\"11,21 13,21 13,19 15,19 15,17 13,17 13,15 11,15 11,17 9,17 9,19 11,19\" />\n        <circle fill=\"#ffffff\" cx=\"12.5\" cy=\"7.5\" r=\"1.5\" />\n      </g>\n    </g>\n  </svg>\n);\n\nconst ExpenseList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M5,6H23V18H5V6M14,9A3,3 0 0,1 17,12A3,3 0 0,1 14,15A3,3 0 0,1 11,12A3,3 0 0,1 14,9M9,8A2,2 0 0,1 7,10V14A2,2 0 0,1 9,16H19A2,2 0 0,1 21,14V10A2,2 0 0,1 19,8H9M1,10H3V20H19V22H1V10Z\" />\n  </svg>\n);\n\nconst OrderDynamics = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M3,13H7V23H3V13M10,14H14V23H10V14M17,9H21V23H17V9M17,1H21V5H20V3.06L11.97,11.09L8,7.12L3.4,11.72L2.34,10.66L8,5L11.97,8.97L18.94,2H17V1Z\" />\n  </svg>\n);\n\nconst Dashboard = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M21,16V4H3V16H21M21,2A2,2 0 0,1 23,4V16A2,2 0 0,1 21,18H14V20H16V22H8V20H10V18H3C1.89,18 1,17.1 1,16V4C1,2.89 1.89,2 3,2H21M5,6H14V11H5V6M15,6H19V8H15V6M19,9V14H15V9H19M5,12H9V14H5V12M10,12H14V14H10V12Z\" />\n  </svg>\n);\n\nconst ReceiptList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M12,17L7,12H10V8H14V12H17L12,17M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z\" />\n  </svg>\n);\n\nconst PriceListList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M6,10H7V3H14.5C17,3 19,5 19,7.5C19,10 17,12 14.5,12H9V14H15V16H9V21H7V16H6V14H7V12H6V10M14.5,5H9V10H14.5A2.5,2.5 0 0,0 17,7.5A2.5,2.5 0 0,0 14.5,5Z\" />\n  </svg>\n);\n\nconst PriceTypeList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M5,9.5L7.5,14H2.5L5,9.5M3,4H7V8H3V4M5,20A2,2 0 0,0 7,18A2,2 0 0,0 5,16A2,2 0 0,0 3,18A2,2 0 0,0 5,20M9,5V7H21V5H9M9,19H21V17H9V19M9,13H21V11H9V13Z\" />\n  </svg>\n);\n\nconst ProductsFlowReport = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M2,3H19A2,2 0 0,1 21,5V9H19V5H2V19H19V15H21V19A2,2 0 0,1 19,21H2A2,2 0 0,1 0,19V5A2,2 0 0,1 2,3M17,15V13H24V11H17V9L13,12L17,15M4,13H11V11H4V13M4,9H11V7H4V9M4,17H8V15H4V17Z\" />\n  </svg>\n);\n\nconst DebtsFlowReport = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M16,10H22L12,0L2,10H8V14H2L12,24L22,14H16V10M14,16H17L12,21L7,16H10V8H7L12,3L17,8H14V16Z\" />\n  </svg>\n);\n\nconst TaskList = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M19,19H5V8H19M19,3H18V1H16V3H8V1H6V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M16.53,11.06L15.47,10L10.59,14.88L8.47,12.76L7.41,13.82L10.59,17L16.53,11.06Z\" />\n  </svg>\n);\n\nconst DealList = () => (\n  <svg version=\"1.1\"  width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M3,6H21V18H3V6M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M7,8A2,2 0 0,1 5,10V14A2,2 0 0,1 7,16H17A2,2 0 0,1 19,14V10A2,2 0 0,1 17,8H7Z\" />\n  </svg>\n);\n\nconst InvoiceList = () => (\n  <svg version=\"1.1\"  width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M16,15H9V13H16V15M19,11H9V9H19V11M19,7H9V5H19V7M3,5V21H19V23H3A2,2 0 0,1 1,21V5H3M21,1A2,2 0 0,1 23,3V17C23,18.11 22.11,19 21,19H7A2,2 0 0,1 5,17V3C5,1.89 5.89,1 7,1H21M7,3V17H21V3H7Z\" />\n  </svg>\n);\n\nexport default {\n  OrderList,\n  OrdersMy: OrderList,\n  OrdersUnassigned,\n  CashFlow,\n  ProductList,\n  ClientList,\n  OrdersToDeliverReport,\n  ProductSalesReport,\n  NoteList,\n  CashboxList,\n  ExpenseList,\n  PaymentList,\n  OrderDynamics,\n  Dashboard,\n  ReceiptList,\n  PriceListList,\n  PriceTypeList,\n  ProductsFlowReport,\n  DebtsFlowReport,\n  TaskList,\n  DealList,\n  InvoiceList,\n};\n","import { use } from 'katejs/lib/client';\r\nimport { AppDoc, AppDocs, AppPrint, AppSettings, AppImport, AppUser } from 'katejs-modules/lib/client';\r\nimport AppTrigger from './katejs-trigger/lib/AppClient';\r\nimport AppFields from './katejs-fields/lib/AppClient'\r\n\r\n// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport 'moment/locale/ru';\r\nimport 'katejs/lib/client.css';\r\n\r\nimport { structures, title, packageName, Settings } from './structure';\r\n\r\nimport NoteItem from './forms/NoteItem';\r\nimport NoteList from './forms/NoteList';\r\nimport ProductSalesReport from './forms/ProductSalesReport';\r\nimport OrdersToDeliverReport from './forms/OrderToDeliverReport';\r\nimport OrderList from './forms/OrderList';\r\nimport OrderItem from './forms/OrderItem';\r\nimport PaymentItem from './forms/PaymentItem';\r\nimport CashFlow from './forms/CashFlow';\r\nimport OrderDynamics from './forms/OrderDynamics';\r\nimport ClientListMixin from './forms/ClientListMixin';\r\nimport ClientItemMixin from './forms/ClientItemMixin';\r\nimport Dashboard from './forms/Dashboard';\r\nimport ExpenseItem from './forms/ExpenseItem';\r\nimport ReceiptItemMixin from './forms/ReceiptItemMixin';\r\nimport ProductsFlowReport from './forms/ProducsFlowReport';\r\nimport DebtsFlowReport from './forms/DebtsFlowReport';\r\nimport ProductItemMixin from './forms/ProductItemMixin';\r\nimport DealItem from './forms/DealItem';\r\nimport TaskItem from './forms/TaskItem';\r\nimport DealList from './forms/DealList';\r\nimport SaleSchemaItem from './forms/SaleSchemaItem';\r\nimport TaskList from './forms/TaskList';\r\nimport InvoiceItem from './forms/InvoiceItem';\r\n\r\nimport Components from './components';\r\n\r\nimport updates from './updates';\r\nimport logo from './oktopad.svg';\r\nimport icons from './icons';\r\n\r\nimport env from './front.env.json';\r\n\r\nconst AppClient = parent => class Client extends\r\n  use(parent, AppUser, AppDoc, AppPrint, AppSettings, AppDocs, AppImport, AppTrigger, AppFields) {\r\n  static title = title;\r\n  static path = '/app';\r\n  static primaryColor = '#088596';\r\n  static logo = logo;\r\n  // static useLogger = true;\r\n  constructor(params) {\r\n    super(params);\r\n    this.constructor.components = { ...this.constructor.components, ...Components };\r\n\r\n    this.baseUrl = env.apiUrl || '/api';\r\n\r\n    this.vars = {};\r\n\r\n    this.menu.unshift(\r\n      {\r\n        title: 'Reports',\r\n        icon: icons.OrderDynamics,\r\n        rule: { entity: 'Order', method: 'put' },\r\n        submenu: [\r\n          {\r\n            form: 'ProductSalesReport',\r\n            title: 'Product sales',\r\n          },\r\n          {\r\n            form: 'OrdersToDeliverReport',\r\n            title: 'Orders to deliver',\r\n          },\r\n          {\r\n            form: 'CashFlow',\r\n            title: 'Cash flow',\r\n          },\r\n          {\r\n            form: 'OrderDynamics',\r\n            title: 'Order dynamics',\r\n          },\r\n          {\r\n            form: 'ProductsFlowReport',\r\n            title: 'Product flow',\r\n          },\r\n          {\r\n            form: 'DebtsFlowReport',\r\n            title: 'Debt flow',\r\n          },\r\n        ],\r\n      },\r\n    );\r\n\r\n    this.init({ structures, addToMenu: true });\r\n    this.forms = {\r\n      ...this.forms,\r\n      NoteItem,\r\n      NoteList,\r\n      OrderList: OrderList(this.forms.OrderList),\r\n      OrderItem: OrderItem(this.forms.OrderItem),\r\n      PaymentItem,\r\n      ClientList: ClientListMixin(this.forms.ClientList),\r\n      ClientItem: ClientItemMixin(this.forms.ClientItem),\r\n      ProductItem: ProductItemMixin(this.forms.ProductItem),\r\n      DealItem: DealItem(this.forms.DealItem),\r\n      TaskItem: TaskItem(this.forms.TaskItem),\r\n      DealList: DealList(this.forms.DealList),\r\n      SaleSchemaItem: SaleSchemaItem(this.forms.SaleSchemaItem),\r\n      TaskList: TaskList(this.forms.TaskList),\r\n      InvoiceItem: InvoiceItem(this.forms.InvoiceItem),\r\n\r\n      ProductSalesReport,\r\n      OrdersToDeliverReport,\r\n      CashFlow,\r\n      OrderDynamics,\r\n      Dashboard,\r\n      ExpenseItem,\r\n      ReceiptItem: ReceiptItemMixin(this.forms.ReceiptItem),\r\n      ProductsFlowReport,\r\n      DebtsFlowReport,\r\n     };\r\n\r\n    this.forms.PaymentList.doc = true;\r\n    this.forms.ExpenseList.doc = true;\r\n    this.forms.ExpenseItem.doc = true;\r\n    this.forms.PriceListList.doc = true;\r\n    this.forms.PriceListItem.doc = true;\r\n    this.forms.ReceiptList.doc = true;\r\n    this.forms.InvoiceList.doc = true;\r\n\r\n    this.saveAuth = true;\r\n    this.docsContent.push(...updates);\r\n\r\n    this.userAuthorization = {\r\n      usernameTitle: 'User',\r\n    };\r\n    this.userHideRecovery = true;\r\n\r\n    this.docsAccessFilter = (docsItem) => {\r\n      if (docsItem.entity === 'System') return true;\r\n      if (docsItem.entity === 'Agent app') return this.allow('Order', 'put') || this.allow('Order', 'take');\r\n      return this.allow(docsItem.entity, 'put');\r\n    };\r\n\r\n    // temp no dasboard\r\n    // this.menu.unshift({\r\n    //   title: 'Dashboard',\r\n    //   form: 'Dashboard',\r\n    //   rule: {\r\n    //     entity: 'Order',\r\n    //     method: 'put',\r\n    //   },\r\n    // });\r\n\r\n    this.menu.forEach((item) => {\r\n      if (icons[item.form]) {\r\n        // eslint-disable-next-line no-param-reassign\r\n        item.icon = icons[item.form];\r\n      }\r\n      if (item.submenu) {\r\n        item.submenu.forEach((sitem) => {\r\n          if (icons[sitem.form]) {\r\n            // eslint-disable-next-line no-param-reassign\r\n            sitem.icon = icons[sitem.form];\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    this.menu.forEach((menuItem) => {\r\n      if (this.forms[menuItem.form] && this.forms[menuItem.form].entity) {\r\n        // eslint-disable-next-line no-param-reassign\r\n        menuItem.rule = {\r\n          entity: this.forms[menuItem.form].entity,\r\n          method: 'put',\r\n        };\r\n      }\r\n      if (menuItem.submenu) {\r\n        menuItem.submenu.forEach((submenuItem) => {\r\n          if (this.forms[submenuItem.form] && this.forms[submenuItem.form].entity) {\r\n            // eslint-disable-next-line no-param-reassign\r\n            submenuItem.rule = {\r\n              entity: this.forms[submenuItem.form].entity,\r\n              method: 'put',\r\n            };\r\n          }\r\n        });\r\n      }\r\n    });\r\n    this.settingsParams = Settings;\r\n\r\n    this.menu.unshift(\r\n      this.spliceMenuItem('Deals'),\r\n      this.spliceMenuItem('Tasks'),\r\n      this.spliceMenuItem('Clients'),\r\n    );\r\n    this.spliceMenuItem('Extra field values lists'); // temp - remove from menu\r\n    this.spliceMenuItem('Contacts'); // temp - remove from menu\r\n    this.spliceMenuItem('What\\'s new'); // temp\r\n    this.spliceMenuItem('Entity descriptions'); // temp\r\n    this.spliceMenuItem('Notes'); // temp\r\n\r\n    this.entitiesWithExtraFields = ['Deal', 'Task', 'Client'];\r\n\r\n    // make submenu\r\n    this.initSubmenu('Payments', 'Money');\r\n    this.addSubmenu('Money', 'Expenses');\r\n    this.addSubmenu('Money', 'Cashboxs');\r\n    this.initSubmenu('Products', 'Products');\r\n    this.addSubmenu('Products', 'Price types');\r\n    this.addSubmenu('Products', 'Price lists');\r\n    this.addSubmenu('Products', 'Receipts');\r\n    this.initSubmenu('Settings', 'Settings', 'Basic');\r\n    this.addSubmenu('Settings', 'Sale schemas');\r\n    this.addSubmenu('Settings', 'Extra fields  lists');\r\n    this.addSubmenu('Settings', 'Triggers');\r\n    this.addSubmenu('Settings', 'Import');\r\n    this.addSubmenu('Settings', 'Print templates');\r\n\r\n    this.allowCreateInSelect = true;\r\n    this.schemas = {};\r\n\r\n    this.showUsersList = true;\r\n  }\r\n  initSubmenu(nameInitial, nameTarget, submenuTitle = '') {\r\n    const item = this.menu.find(i => i.title === nameInitial);\r\n    item.submenu = [];\r\n    item.submenu.push({\r\n      title: submenuTitle || item.title,\r\n      form: item.form,\r\n      icon: item.icon,\r\n      role: item.role,\r\n    });\r\n    item.title = nameTarget;\r\n    delete item.form;\r\n  }\r\n  addSubmenu(submenuName, itemName) {\r\n    const itemIndex = this.menu.findIndex(i => i.title === itemName);\r\n    const submenu = this.menu.find(i => i.title === submenuName);\r\n    if (!this.menu[itemIndex].icon) {\r\n      this.menu[itemIndex].icon = submenu.icon;\r\n    }\r\n    submenu.submenu.push(this.menu[itemIndex]);\r\n    this.menu.splice(itemIndex, 1);\r\n  }\r\n  spliceMenuItem(itemTitle) {\r\n    const index = this.menu.findIndex(item => item.title === itemTitle);\r\n    if (index > -1) {\r\n      return this.menu.splice(index, 1)[0];\r\n    }\r\n  }\r\n  async afterUserInit() {\r\n    if (super.afterUserInit) {\r\n      await super.afterUserInit();\r\n    }\r\n    await this.fetchSchemas();\r\n  }\r\n  async fetchSchemas() {\r\n    const { response: schemas } = await this.SaleSchema.query();\r\n    if (!schemas) return;\r\n    this.schemas = schemas.reduce((acc, val) => ({ ...acc, [val.uuid]: val}), {});\r\n  }\r\n};\r\nAppClient.package = packageName;\r\nexport default AppClient;\r\n","import { Elements } from 'katejs/lib/client';\nimport ProductCard from './ProductCard';\nimport { reportStyle } from './ClientItemMixin';\n\nexport default Form => class ProductItem extends Form {\n  constructor(args) {\n    super(args);\n\n    this.productCard = new ProductCard({\n      app: this.app,\n      productUuid: args.params.id,\n      content: this.content,\n    });\n\n    this.elements = [\n      {\n        type: Elements.GRID,\n        id: 'pcGrid',\n        elements: [\n          {\n            type: Elements.GROUP,\n            elements: [\n              ...this.elements,\n            ],\n            cols: 12,\n          },\n          {\n            id: 'pcGridRight',\n            type: Elements.GROUP,\n            hidden: true,\n            elements: [\n              ...this.productCard.elements,\n            ],\n            div: true,\n            style: reportStyle,\n            cols: 6,\n          },\n        ],\n      },\n    ];\n    this.elements.get('accountBalances').onChange = () => this.setCardVisibility();\n  }\n  async load() {\n    const result = await super.load();\n    this.setCardVisibility();\n    return result;\n  }\n  setCardVisibility() {\n    const showCard = this.content.accountBalances.value;\n    const cols = showCard ? 6 : 12;\n    this.content.pcGrid.elements = [\n      { ...this.content.pcGrid.elements[0], cols },\n      this.content.pcGrid.elements[1],\n    ];\n    this.content.pcGridRight.hidden = !showCard;\n  }\n};\n","import translations from 'katejs/lib/translations';\n\n/* eslint-disable quote-props */\nconst translate = {\n  languages: ['en', 'ru'],\n  en: {\n    'Orders': 'Sales',\n    'Order': 'Sale',\n  },\n  ru: {\n    ...translations.ru,\n    'Assistant': 'Ассистент',\n    'Prev': 'Пред.',\n    'Next': 'След.',\n    'Notes': 'Заметки',\n    'Note': 'Заметкa',\n    'Note done': 'Завершено',\n    'Done': 'Выполнено',\n    'Description': 'Описание',\n    'Checklist': 'Список',\n    'Show all': 'Показывать все',\n    'NoteDone': 'Завершено',\n    'Orders': 'Заказы',\n    'Order': 'Заказ',\n    'Product': 'Товар',\n    'Products': 'Товары',\n    'Date': 'Дата',\n    'Number': 'Номер',\n    'Clients': 'Клиенты',\n    'Client': 'Клиент',\n    'Phone': 'Телефон',\n    'Total': 'Итого',\n    'Amount': 'Количество',\n    'Price': 'Цена',\n    'Sum': 'Сумма',\n    'Product sales': 'Продажи товаров',\n    'Form report': 'Сформировать',\n    'Period start': 'Начало периода',\n    'Period end': 'Конец периода',\n    'Address': 'Адрес',\n    'Comment': 'Комментарий',\n    'Period': 'Период',\n    'Apply': 'Применить',\n    'Paid': 'Оплачено',\n    'To pay': 'Оплатить',\n    'Find, create': 'Найти, создать',\n    'Find, create client': 'Найти, создать клиента',\n    'Client (name, phone, address)': 'Клиент (имя, телефон, адрес)',\n    'Search (name, phone, address)': 'Поиск (имя, телефон, адрес)',\n    'Spread payment': 'Распределить оплату',\n    'Spread': 'Распределить',\n    'Spread payment from ': 'Распределение оплаты от ',\n    'Doing spread...': 'Распределяем...',\n    'No sum!': 'Нет суммы',\n    'Spreaded ': 'Распределено ',\n    ' to order ': ' на заказ ',\n    'Rest sum ': 'Остаточная суммма ',\n    ' from ': ' от ',\n    'What\\'s new': 'Информация',\n    'Payments': 'Оплаты',\n    'Payment': 'Оплата',\n    'Clientpayments': 'Оплаты клиентов',\n    'Cashboxs': 'Кассы/счета',\n    'Cashbox': 'Касса/счет',\n    'Fill by debts': 'Заполнить по расчетам',\n    'Orders to deliver': 'Заказы к доставке',\n    'Show negative sum': 'Показывать отрицательные суммы',\n    'Expenses': 'Расходы',\n    'Expense': 'Расход',\n    'Apply payment': 'Провести платеж',\n    'Clients debt ': 'Долг клиента ',\n    'Client debt': 'Расчеты с клиентом',\n    'Document': 'Документ',\n    'Sale': 'Продажа',\n    'Cash flow': 'Движение денег',\n    'Cashbox/Document': 'Касса/счет / Документ',\n    'Login': 'Вход',\n    'Registration': 'Регистрация',\n    'Register': 'Зарегистрироваться',\n    'Forgot your password?': 'Забыли пароль?',\n    'Confirm password': 'Подтвердите пароль',\n    'Your name': 'Ваше имя',\n    'Go to authorization': 'Перейти к авторизации',\n    'Password recovery': 'Восстановление пароля',\n    'Recover password': 'Восстановить пароль',\n    'Your account has been created.': 'Ваш аккаунт создан!',\n    'Discount sum': 'Сумма скидки',\n    'Agent': 'Агент',\n    'Status': 'Статус',\n    'New': 'Новый',\n    'Assigned': 'Назначен',\n    'Completed': 'Завершен',\n    'To agent': 'Агенту',\n    'Payment to agent': 'Платеж агенту',\n    'Unassigned orders': 'Свободные заказы',\n    'My orders': 'Мои заказы',\n    'Take order': 'Принять заказ',\n    'Consist': 'Состав',\n    'Money received \\nOrder completed': 'Деньги получены\\nЗаказ выполнен',\n    'Received': 'Получено',\n    'Fill by agent': 'Заполнить по агенту',\n    'System': 'Система',\n    'Agent app': 'Приложение агента',\n    'Settings': 'Настройки',\n    'Print': 'Печать',\n    'Start': 'На начало',\n    'Increase': 'Увеличение',\n    'Decrease': 'Уменьшение',\n    'Details': 'Детали',\n    'Card payment': 'Оплата картой',\n    'Terminal': 'Терминал',\n    'Available to agent': 'Доступен агенту',\n    'Order dynamics': 'Динамика заказов',\n    'Create': 'Создать',\n    'Yesterday': 'Вчера',\n    'Today': 'Сегодня',\n    'Tomorrow': 'Завтра',\n    'Prev week': 'Пред неделя',\n    'This week': 'Эта неделя',\n    'Next week': 'След неделя',\n    'Clients sales': 'Продажи клиенту',\n    'Sales count': 'Количество продаж',\n    'Sales sum': 'Сумма продаж',\n    'Sales average sum': 'Средний чек',\n    'Profile': 'Профиль',\n    'Your email (username)': 'Ваш email (логин)',\n    'Name': 'Имя',\n    'Passwords match': 'Пароли совпадают',\n    'Passwords do not match': 'Пароли не совпадают',\n    'Dashboard': 'Рабочий стол',\n    'Price lists': 'Цены',\n    'PriceList': 'Прайс-лист',\n    'Import': 'Импорт',\n    'Entity': 'Справочник',\n    'Months count': 'Кол-во месяцев',\n    'Pay': 'Оплатить',\n    'Your tariff: ': 'Ваш тариф: ',\n    '. Ends at: ': '. Заканчивается: ',\n    'Search (name or email)': 'Поиск (имя или почта)',\n    'All': 'Все',\n    'Active': 'Активные',\n    'Inactive': 'Неактивный',\n    'Manager': 'Менеджер',\n    'Limits': 'Ограничения',\n    'current month': 'текущий месяц',\n    'Account quota exceeded!': 'Квота аккаунта превышена!',\n    'Money': 'Деньги',\n    'Reports': 'Отчеты',\n    'Price types': 'Типы цен',\n    'Price type': 'Тип цен',\n    'Receipts': 'Поступления',\n    'Receipt': 'Поступление',\n    'Contractor': 'Контрагент',\n    'Product flow': 'Движение товаров',\n    'Account balances': 'Учитывать остатки',\n    'Company name': 'Название компании',\n    'Detail to document': 'Детализировать до документа',\n    'User with this e-mail already exist': 'Пользователь с таким e-mail уже существует',\n    'Password reset': 'Сброс пароля',\n    'Set new password': 'Установить новый пароль',\n    'Account activation': 'Активация',\n    'Activation code': 'Код активации',\n    'Account': 'Учетная запись',\n    'Activate': 'Активировать',\n    'User inactive!': 'Учетная запись не активирована! Проверьте почту!',\n    'Debt flow': 'Взаиморасчеты',\n    'Client/Document': 'Клиент/Документ',\n    'Client debts': 'Долги клиентов',\n    'Product card': 'Карточка товара',\n    'Rest: ': 'Остаток: ',\n    'Deals': 'Сделки',\n    'Deal': 'Сделка',\n    'Tasks': 'Задачи',\n    'Task': 'Задачa',\n    'New Task': 'Новая задачa',\n    'Triggers': 'Триггеры',\n    'Trigger': 'Триггер',\n    'Extra fields lists': 'Дополнительные поля',\n    'Extra fields  lists': 'Доп. поля',\n    'Extra fields list': 'Список дополнительных полей',\n    'Entity name': 'Сущность',\n    'Fields list': 'Список полей',\n    'Condition entity': 'Сущность источник',\n    'Condition': 'Условие',\n    'Action entity': 'Целевая сущность',\n    'Action entity uuid': 'Целевой uuid (необязательно)',\n    'Action entity fields': 'Поля целевой сущности',\n    'Field': 'Поле',\n    'Values': 'Значение',\n    'Salesman': 'Специалист по продажам',\n    'Contacts': 'Контакты',\n    'Contact': 'Контакт',\n    'Schemas': 'Схемы',\n    'Schema': 'Схема',\n    'Steps': 'Шаги',\n    'Step': 'Шаг',\n    'by': 'от',\n    'at': 'из',\n    'Do Comment': 'Комментировать',\n    'Add Task': 'Добавить задачу',\n    'On date': 'На дату',\n    'for': 'для',\n    'New Deal': 'Новая сделка',\n    'List': 'Список',\n    'Borad': 'Доска',\n    'Order': 'Продажа',\n    'Orders': 'Продажи',\n    'Sale schemas': 'Схемы продаж',\n    'Sale schema': 'Схема продаж',\n    'Default schema': 'Схема по умолчанию',\n    'Expired': 'Просрочено',\n    'Day After Tomorrow': 'Послезавтра',\n    'Later': 'Позже',\n    'Print templates': 'Шаблоны печати',\n    'Print template': 'Шаблон печати',\n    'Hide Done': 'Скрыть выполненные',\n    'Step index': 'Шаг',\n    'Deal closed': 'Сделка закрыта',\n    'Hide Closed': 'Скрыть закрытые',\n    'Board': 'Доска',\n    'Closed': 'Закрыто',\n    'Basic': 'Базовые',\n    'Company inn': 'ИНН',\n    'Company kpp': 'КПП',\n    'Company bank name': 'Название банка',\n    'Company bank code': 'БИК',\n    'Company bank corr account': 'Корр. счет',\n    'Company bank account': 'Номер счета',\n    'To Client': 'К Клиенту',\n    'Invoices': 'Счета',\n    'Invoice': 'Счет',\n  },\n};\n\nexport default translate;\n","import KateJSClient from 'katejs/lib/client';\r\n\r\nimport AppClient from './AppClient';\r\nimport translations from './translations';\r\n\r\nKateJSClient({ AppClient, translations });\r\n"],"sourceRoot":""}